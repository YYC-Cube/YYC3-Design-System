---
@file: 主题系统 API
@description: YYC³ Design System 主题系统 API 文档
@author: YanYuCloudCube Team
@version: 1.0.0
@created: 2026-02-28
@updated: 2026-02-28
@status: Active
@tags: api, themes, styling
---

> ***YanYuCloudCube***
> *言启象限 | 语枢未来*
> ***Words Initiate Quadrants, Language Serves as Core for Future***
> *万象归元于云枢 | 深栈智启新纪元*
> ***All things converge in cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 主题系统 API

## 概述

YYC³ Design System 主题系统提供灵活的主题管理功能，支持三种内置主题（Future、Cyber、Business）和自定义主题。每个主题支持亮色和暗色两种模式，可通过 React Context 和 Hooks 轻松使用。

## 核心概念

### 主题（Themes）

系统提供三种预定义主题：

1. **Future Theme**: 未来感主题，适合创新产品
2. **Cyber Theme**: 赛博朋克风格，适合科技产品
3. **Business Theme**: 商务风格，适合企业应用

### 主题模式（Theme Modes）

每个主题支持两种模式：

1. **Light Mode**: 亮色模式，适合白天使用
2. **Dark Mode**: 暗色模式，适合夜间使用

## API 参考

### useTheme Hook

获取和管理主题状态的 Hook。

```typescript
function useTheme(): {
  theme: string;
  mode: 'light' | 'dark';
  setTheme: (theme: string) => void;
  setMode: (mode: 'light' | 'dark') => void;
  toggleMode: () => void;
}
```

#### 返回值

| 属性 | 类型 | 描述 |
|------|------|------|
| `theme` | `string` | 当前主题名称（'future' \| 'cyber' \| 'business'） |
| `mode` | `'light' \| 'dark'` | 当前主题模式 |
| `setTheme` | `(theme: string) => void` | 设置主题的函数 |
| `setMode` | `(mode: 'light' \| 'dark') => void` | 设置主题模式的函数 |
| `toggleMode` | `() => void` | 切换主题模式的函数 |

#### 示例

```tsx
import { useTheme } from '@yyc3/design-system';

function ThemeExample() {
  const { theme, mode, setTheme, setMode, toggleMode } = useTheme();

  return (
    <div>
      <p>当前主题: {theme}</p>
      <p>当前模式: {mode}</p>
      
      <button onClick={toggleMode}>
        切换模式
      </button>
      
      <select 
        value={theme} 
        onChange={(e) => setTheme(e.target.value)}
      >
        <option value="future">Future</option>
        <option value="cyber">Cyber</option>
        <option value="business">Business</option>
      </select>
    </div>
  );
}
```

### ThemeProvider 组件

主题上下文提供者，必须包裹在应用根组件外部。

```typescript
interface ThemeProviderProps {
  children: React.ReactNode;
  initialTheme?: string;
  initialMode?: 'light' | 'dark';
}
```

#### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|---------|------|
| `children` | `React.ReactNode` | - | 子组件 |
| `initialTheme` | `string` | `'future'` | 初始主题 |
| `initialMode` | `'light' \| 'dark'` | `'light'` | 初始主题模式 |

#### 示例

```tsx
import { ThemeProvider } from '@yyc3/design-system';
import { App } from './App';

function Root() {
  return (
    <ThemeProvider initialTheme="future" initialMode="light">
      <App />
    </ThemeProvider>
  );
}
```

### ThemeToggle 组件

主题切换组件，提供图形化的主题切换界面。

```typescript
interface ThemeToggleProps {
  className?: string;
  showModeToggle?: boolean;
  showThemeSwitcher?: boolean;
}
```

#### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|---------|------|
| `className` | `string` | - | 自定义 CSS 类名 |
| `showModeToggle` | `boolean` | `true` | 是否显示模式切换按钮 |
| `showThemeSwitcher` | `boolean` | `true` | 是否显示主题选择器 |

#### 示例

```tsx
import { ThemeToggle } from '@yyc3/design-system';

function Header() {
  return (
    <header>
      <h1>YYC³ Design System</h1>
      <ThemeToggle />
    </header>
  );
}
```

### useTokens Hook

获取当前主题的设计令牌。

```typescript
function useTokens<T = DesignTokens>(): T
```

#### 返回值

返回当前主题的设计令牌对象。

#### 设计令牌结构

```typescript
interface DesignTokens {
  colors: {
    primary: string;
    secondary: string;
    accent: string;
    destructive: string;
    success: string;
    warning: string;
    info: string;
    neutral: {
      50: string;
      100: string;
      200: string;
      300: string;
      400: string;
      500: string;
      600: string;
      700: string;
      800: string;
      900: string;
    };
  };
  typography: {
    fontFamily: {
      sans: string;
      mono: string;
    };
    fontSize: {
      xs: string;
      sm: string;
      base: string;
      lg: string;
      xl: string;
      '2xl': string;
      '3xl': string;
      '4xl': string;
    };
    fontWeight: {
      normal: number;
      medium: number;
      semibold: number;
      bold: number;
    };
  };
  spacing: {
    xs: string;
    sm: string;
    md: string;
    lg: string;
    xl: string;
    '2xl': string;
  };
  borderRadius: {
    sm: string;
    md: string;
    lg: string;
    xl: string;
    full: string;
  };
  shadows: {
    sm: string;
    md: string;
    lg: string;
    xl: string;
  };
  transitions: {
    fast: string;
    base: string;
    slow: string;
  };
  breakpoints: {
    sm: string;
    md: string;
    lg: string;
    xl: string;
    '2xl': string;
  };
}
```

#### 示例

```tsx
import { useTokens } from '@yyc3/design-system';

function TokenExample() {
  const tokens = useTokens();

  return (
    <div style={{
      backgroundColor: tokens.colors.primary,
      color: tokens.colors.neutral[100],
      padding: tokens.spacing.md,
      borderRadius: tokens.borderRadius.md,
    }}>
      使用令牌的组件
    </div>
  );
}
```

## 自定义主题

### 创建自定义主题

```typescript
import { ThemeProvider } from '@yyc3/design-system';

const customTheme = {
  name: 'custom',
  colors: {
    primary: '#ff6b6b',
    secondary: '#4ecdc4',
    accent: '#ffe66d',
    destructive: '#ff0000',
    success: '#00ff00',
    warning: '#ffcc00',
    info: '#00ccff',
    neutral: {
      50: '#fafafa',
      100: '#f5f5f5',
      // ... 其他中性色
    },
  },
  typography: {
    // ... 字体配置
  },
  // ... 其他令牌
};

function App() {
  return (
    <ThemeProvider theme={customTheme}>
      {/* 应用内容 */}
    </ThemeProvider>
  );
}
```

### 扩展现有主题

```typescript
import { extendTheme } from '@yyc3/design-system';
import { futureTheme } from '@yyc3/design-system/themes';

const extendedFutureTheme = extendTheme(futureTheme, {
  colors: {
    custom: '#purple-500',
  },
});
```

## CSS 变量

### 主题变量

主题系统使用 CSS 变量来动态应用主题样式：

```css
:root {
  /* 颜色 */
  --color-primary: #2563eb;
  --color-secondary: #e0f2fe;
  --color-accent: #e0f2fe;
  
  /* 排版 */
  --font-family-sans: 'Inter', sans-serif;
  --font-size-base: 16px;
  
  /* 间距 */
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  
  /* 圆角 */
  --border-radius-sm: 0.25rem;
  --border-radius-md: 0.375rem;
  --border-radius-lg: 0.5rem;
}

[data-theme="dark"] {
  --color-primary: #3b82f6;
  --color-secondary: #1e3a5a;
  /* ... 暗色模式变量 */
}
```

### 使用 CSS 变量

```css
.custom-button {
  background-color: var(--color-primary);
  color: var(--color-neutral-100);
  padding: var(--spacing-md);
  border-radius: var(--border-radius-md);
}
```

## 主题持久化

### LocalStorage

主题和模式自动保存到浏览器的 LocalStorage：

```typescript
const THEME_KEY = 'yyc3-theme';
const MODE_KEY = 'yyc3-mode';

// 保存主题
localStorage.setItem(THEME_KEY, 'future');

// 保存模式
localStorage.setItem(MODE_KEY, 'dark');

// 读取主题
const savedTheme = localStorage.getItem(THEME_KEY) || 'future';

// 读取模式
const savedMode = localStorage.getItem(MODE_KEY) || 'light';
```

### 系统主题跟随

支持自动跟随系统主题设置：

```typescript
import { useTheme } from '@yyc3/design-system';

function SystemThemeExample() {
  const { setMode } = useTheme();

  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    
    const handleChange = (e: MediaQueryListEvent) => {
      setMode(e.matches ? 'dark' : 'light');
    };

    mediaQuery.addEventListener('change', handleChange);
    setMode(mediaQuery.matches ? 'dark' : 'light');

    return () => {
      mediaQuery.removeEventListener('change', handleChange);
    };
  }, [setMode]);

  return <div>系统主题跟随示例</div>;
}
```

## 键盘快捷键

主题系统支持键盘快捷键：

- `Ctrl/Cmd + Alt + T`: 切换主题模式
- `Ctrl/Cmd + Alt + S`: 切换到下一个主题

```typescript
import { useTheme } from '@yyc3/design-system';

function KeyboardShortcutsExample() {
  const { toggleMode } = useTheme();

  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.ctrlKey || e.metaKey) {
        if (e.altKey && e.key === 't') {
          e.preventDefault();
          toggleMode();
        }
      }
    };

    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [toggleMode]);

  return <div>按 Ctrl+Alt+T 切换主题</div>;
}
```

## 主题切换动画

### 平滑过渡

```css
* {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}
```

### 渐变过渡

```typescript
import { useTheme } from '@yyc3/design-system';

function AnimatedThemeToggle() {
  const { mode } = useTheme();

  return (
    <div 
      className={`
        transition-all duration-300 ease-in-out
        ${mode === 'dark' ? 'bg-gray-900' : 'bg-white'}
      `}
    >
      内容
    </div>
  );
}
```

## 最佳实践

### 1. 组件设计

```tsx
function GoodExample() {
  const { mode } = useTheme();
  
  return (
    <div className={`p-4 rounded ${mode === 'dark' ? 'bg-gray-800' : 'bg-white'}`}>
      内容
    </div>
  );
}

function BadExample() {
  return (
    <div className="p-4 rounded bg-white dark:bg-gray-800">
      内容
    </div>
  );
}
```

### 2. 令牌使用

```tsx
function GoodExample() {
  const tokens = useTokens();
  
  return (
    <div style={{ padding: tokens.spacing.md }}>
      内容
    </div>
  );
}

function BadExample() {
  return (
    <div style={{ padding: '16px' }}>
      内容
    </div>
  );
}
```

### 3. 性能优化

```tsx
import { memo } from 'react';
import { useTheme } from '@yyc3/design-system';

const ThemeComponent = memo(function ThemeComponent() {
  const { theme } = useTheme();
  
  return <div>当前主题: {theme}</div>;
});

export { ThemeComponent };
```

## 相关资源

- [Button 组件 API](./components/001-Button组件API.md)
- [Input 组件 API](./components/002-Input组件API.md)
- [组件使用示例](../examples/001-组件使用示例.md)

---

<div align="center">

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for Future***」
> 「***All things converge in cloud pivot; Deep stacks ignite a new era of intelligence***」

</div>
