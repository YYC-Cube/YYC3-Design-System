b5a50cb26a68b21194e5ffab667b68ea
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
const ThemeProvider_1 = require("../theme/ThemeProvider");
const Spinner_1 = require("./Spinner");
const renderWithTheme = (component) => {
    return (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: component }));
};
describe('Spinner', () => {
    describe('基本渲染', () => {
        it('应该渲染加载指示器', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = dom_1.screen.getByRole('status');
            expect(spinner).toBeInTheDocument();
        });
        it('应该有正确的ARIA标签', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = dom_1.screen.getByRole('status');
            expect(spinner).toHaveAttribute('aria-label', 'Loading');
        });
        it('应该有旋转动画', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveStyle({
                animation: 'spin 1s linear infinite',
            });
        });
    });
    describe('尺寸变体', () => {
        it('应该渲染小尺寸Spinner', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, { size: "sm" }));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveStyle({
                width: '1rem',
                height: '1rem',
            });
        });
        it('应该渲染中等尺寸Spinner（默认）', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveStyle({
                width: '1.5rem',
                height: '1.5rem',
            });
        });
        it('应该渲染大尺寸Spinner', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, { size: "lg" }));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveStyle({
                width: '2rem',
                height: '2rem',
            });
        });
    });
    describe('样式', () => {
        it('应该是圆形的', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveStyle({
                borderRadius: '50%',
            });
        });
        it('应该有边框样式', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = container.querySelector('div[role="status"]');
            const style = spinner?.getAttribute('style');
            expect(style).toContain('solid');
        });
        it('应该应用自定义类名', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, { className: "custom-spinner" }));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveClass('custom-spinner');
        });
    });
    describe('主题集成', () => {
        it('应该使用主题颜色', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const spinner = container.querySelector('div[role="status"]');
            expect(spinner).toHaveStyle({
                borderTopColor: expect.any(String),
            });
        });
    });
    describe('动画', () => {
        it('应该定义旋转关键帧动画', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const styleElement = container.querySelector('style');
            expect(styleElement).toBeInTheDocument();
            expect(styleElement?.textContent).toContain('@keyframes spin');
        });
        it('应该包含旋转角度定义', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Spinner_1.Spinner, {}));
            const styleElement = container.querySelector('style');
            expect(styleElement?.textContent).toContain('rotate(0deg)');
            expect(styleElement?.textContent).toContain('rotate(360deg)');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvU3Bpbm5lci50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFDQSxrREFBMkQ7QUFDM0QsOENBQThDO0FBRTlDLDBEQUF1RDtBQUN2RCx1Q0FBb0M7QUFFcEMsTUFBTSxlQUFlLEdBQUcsQ0FBQyxTQUE2QixFQUFFLEVBQUU7SUFDeEQsT0FBTyxJQUFBLGNBQU0sRUFBQyx1QkFBQyw2QkFBYSxjQUFFLFNBQVMsR0FBaUIsQ0FBQyxDQUFDO0FBQzVELENBQUMsQ0FBQztBQUVGLFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFO0lBQ3ZCLFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1FBQ3BCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO1lBQ25CLGVBQWUsQ0FBQyx1QkFBQyxpQkFBTyxLQUFHLENBQUMsQ0FBQztZQUM3QixNQUFNLE9BQU8sR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3RDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7WUFDdEIsZUFBZSxDQUFDLHVCQUFDLGlCQUFPLEtBQUcsQ0FBQyxDQUFDO1lBQzdCLE1BQU0sT0FBTyxHQUFHLFlBQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxZQUFZLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtZQUNqQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsZUFBZSxDQUFDLHVCQUFDLGlCQUFPLEtBQUcsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUM5RCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDO2dCQUMxQixTQUFTLEVBQUUseUJBQXlCO2FBQ3JDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQixFQUFFLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1lBQ3hCLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxlQUFlLENBQUMsdUJBQUMsaUJBQU8sSUFBQyxJQUFJLEVBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztZQUM3RCxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDMUIsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsTUFBTSxFQUFFLE1BQU07YUFDZixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7WUFDN0IsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLGVBQWUsQ0FBQyx1QkFBQyxpQkFBTyxLQUFHLENBQUMsQ0FBQztZQUNuRCxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDMUIsS0FBSyxFQUFFLFFBQVE7Z0JBQ2YsTUFBTSxFQUFFLFFBQVE7YUFDakIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1lBQ3hCLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxlQUFlLENBQUMsdUJBQUMsaUJBQU8sSUFBQyxJQUFJLEVBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztZQUM3RCxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDMUIsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsTUFBTSxFQUFFLE1BQU07YUFDZixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUU7UUFDbEIsRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7WUFDaEIsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLGVBQWUsQ0FBQyx1QkFBQyxpQkFBTyxLQUFHLENBQUMsQ0FBQztZQUNuRCxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDMUIsWUFBWSxFQUFFLEtBQUs7YUFDcEIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtZQUNqQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsZUFBZSxDQUFDLHVCQUFDLGlCQUFPLEtBQUcsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUM5RCxNQUFNLEtBQUssR0FBRyxPQUFPLEVBQUUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtZQUNuQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsZUFBZSxDQUFDLHVCQUFDLGlCQUFPLElBQUMsU0FBUyxFQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQztZQUM5RSxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQixFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsZUFBZSxDQUFDLHVCQUFDLGlCQUFPLEtBQUcsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUM5RCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDO2dCQUMxQixjQUFjLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7YUFDbkMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFO1FBQ2xCLEVBQUUsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1lBQ3JCLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxlQUFlLENBQUMsdUJBQUMsaUJBQU8sS0FBRyxDQUFDLENBQUM7WUFDbkQsTUFBTSxZQUFZLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN6QyxNQUFNLENBQUMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7WUFDcEIsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLGVBQWUsQ0FBQyx1QkFBQyxpQkFBTyxLQUFHLENBQUMsQ0FBQztZQUNuRCxNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELE1BQU0sQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzVELE1BQU0sQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDaEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9jb21wb25lbnRzL1NwaW5uZXIudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IHNjcmVlbiB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvZG9tJztcblxuaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJy4uL3RoZW1lL1RoZW1lUHJvdmlkZXInO1xuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4vU3Bpbm5lcic7XG5cbmNvbnN0IHJlbmRlcldpdGhUaGVtZSA9IChjb21wb25lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCkgPT4ge1xuICByZXR1cm4gcmVuZGVyKDxUaGVtZVByb3ZpZGVyPntjb21wb25lbnR9PC9UaGVtZVByb3ZpZGVyPik7XG59O1xuXG5kZXNjcmliZSgnU3Bpbm5lcicsICgpID0+IHtcbiAgZGVzY3JpYmUoJ+WfuuacrOa4suafkycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5riy5p+T5Yqg6L295oyH56S65ZmoJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFRoZW1lKDxTcGlubmVyIC8+KTtcbiAgICAgIGNvbnN0IHNwaW5uZXIgPSBzY3JlZW4uZ2V0QnlSb2xlKCdzdGF0dXMnKTtcbiAgICAgIGV4cGVjdChzcGlubmVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeacieato+ehrueahEFSSUHmoIfnrb4nLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoVGhlbWUoPFNwaW5uZXIgLz4pO1xuICAgICAgY29uc3Qgc3Bpbm5lciA9IHNjcmVlbi5nZXRCeVJvbGUoJ3N0YXR1cycpO1xuICAgICAgZXhwZWN0KHNwaW5uZXIpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdMb2FkaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pyJ5peL6L2s5Yqo55S7JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8U3Bpbm5lciAvPik7XG4gICAgICBjb25zdCBzcGlubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwic3RhdHVzXCJdJyk7XG4gICAgICBleHBlY3Qoc3Bpbm5lcikudG9IYXZlU3R5bGUoe1xuICAgICAgICBhbmltYXRpb246ICdzcGluIDFzIGxpbmVhciBpbmZpbml0ZScsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+WwuuWvuOWPmOS9kycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5riy5p+T5bCP5bC65a+4U3Bpbm5lcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXJXaXRoVGhlbWUoPFNwaW5uZXIgc2l6ZT1cInNtXCIgLz4pO1xuICAgICAgY29uc3Qgc3Bpbm5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdkaXZbcm9sZT1cInN0YXR1c1wiXScpO1xuICAgICAgZXhwZWN0KHNwaW5uZXIpLnRvSGF2ZVN0eWxlKHtcbiAgICAgICAgd2lkdGg6ICcxcmVtJyxcbiAgICAgICAgaGVpZ2h0OiAnMXJlbScsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmuLLmn5PkuK3nrYnlsLrlr7hTcGlubmVy77yI6buY6K6k77yJJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8U3Bpbm5lciAvPik7XG4gICAgICBjb25zdCBzcGlubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwic3RhdHVzXCJdJyk7XG4gICAgICBleHBlY3Qoc3Bpbm5lcikudG9IYXZlU3R5bGUoe1xuICAgICAgICB3aWR0aDogJzEuNXJlbScsXG4gICAgICAgIGhlaWdodDogJzEuNXJlbScsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmuLLmn5PlpKflsLrlr7hTcGlubmVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8U3Bpbm5lciBzaXplPVwibGdcIiAvPik7XG4gICAgICBjb25zdCBzcGlubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwic3RhdHVzXCJdJyk7XG4gICAgICBleHBlY3Qoc3Bpbm5lcikudG9IYXZlU3R5bGUoe1xuICAgICAgICB3aWR0aDogJzJyZW0nLFxuICAgICAgICBoZWlnaHQ6ICcycmVtJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5qC35byPJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmmK/lnIblvaLnmoQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyV2l0aFRoZW1lKDxTcGlubmVyIC8+KTtcbiAgICAgIGNvbnN0IHNwaW5uZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJzdGF0dXNcIl0nKTtcbiAgICAgIGV4cGVjdChzcGlubmVyKS50b0hhdmVTdHlsZSh7XG4gICAgICAgIGJvcmRlclJhZGl1czogJzUwJScsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmnInovrnmoYbmoLflvI8nLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyV2l0aFRoZW1lKDxTcGlubmVyIC8+KTtcbiAgICAgIGNvbnN0IHNwaW5uZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJzdGF0dXNcIl0nKTtcbiAgICAgIGNvbnN0IHN0eWxlID0gc3Bpbm5lcj8uZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgZXhwZWN0KHN0eWxlKS50b0NvbnRhaW4oJ3NvbGlkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5bqU55So6Ieq5a6a5LmJ57G75ZCNJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8U3Bpbm5lciBjbGFzc05hbWU9XCJjdXN0b20tc3Bpbm5lclwiIC8+KTtcbiAgICAgIGNvbnN0IHNwaW5uZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJzdGF0dXNcIl0nKTtcbiAgICAgIGV4cGVjdChzcGlubmVyKS50b0hhdmVDbGFzcygnY3VzdG9tLXNwaW5uZXInKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+S4u+mimOmbhuaIkCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5L2/55So5Li76aKY6aKc6ImyJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8U3Bpbm5lciAvPik7XG4gICAgICBjb25zdCBzcGlubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwic3RhdHVzXCJdJyk7XG4gICAgICBleHBlY3Qoc3Bpbm5lcikudG9IYXZlU3R5bGUoe1xuICAgICAgICBib3JkZXJUb3BDb2xvcjogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfliqjnlLsnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWumuS5ieaXi+i9rOWFs+mUruW4p+WKqOeUuycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXJXaXRoVGhlbWUoPFNwaW5uZXIgLz4pO1xuICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJyk7XG4gICAgICBleHBlY3Qoc3R5bGVFbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHN0eWxlRWxlbWVudD8udGV4dENvbnRlbnQpLnRvQ29udGFpbignQGtleWZyYW1lcyBzcGluJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5YyF5ZCr5peL6L2s6KeS5bqm5a6a5LmJJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8U3Bpbm5lciAvPik7XG4gICAgICBjb25zdCBzdHlsZUVsZW1lbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICAgIGV4cGVjdChzdHlsZUVsZW1lbnQ/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ3JvdGF0ZSgwZGVnKScpO1xuICAgICAgZXhwZWN0KHN0eWxlRWxlbWVudD8udGV4dENvbnRlbnQpLnRvQ29udGFpbigncm90YXRlKDM2MGRlZyknKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==