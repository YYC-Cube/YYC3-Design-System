77c1f306c68f5774249161805cf5c198
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * @file 面包屑导航组件测试
 * @description 测试Breadcrumb组件的各项功能
 * @module __tests__/components/Breadcrumb.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-23
 */
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
const Breadcrumb_1 = require("../Breadcrumb");
const ThemeProvider_1 = require("../../theme/ThemeProvider");
describe('Breadcrumb', () => {
    const mockItems = [
        { key: 'home', title: '首页', href: '/' },
        { key: 'products', title: '产品', href: '/products' },
        { key: 'detail', title: '详情' },
    ];
    it('应该渲染面包屑导航', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems }) }));
        expect(dom_1.screen.getByText('首页')).toBeInTheDocument();
        expect(dom_1.screen.getByText('产品')).toBeInTheDocument();
        expect(dom_1.screen.getByText('详情')).toBeInTheDocument();
    });
    it('应该使用默认分隔符', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems }) }));
        const separators = dom_1.screen.getAllByText('/');
        expect(separators).toHaveLength(2);
    });
    it('应该使用自定义分隔符', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems, separator: ">" }) }));
        const separators = dom_1.screen.getAllByText('>');
        expect(separators).toHaveLength(2);
    });
    it('应该渲染链接', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems }) }));
        const homeLink = dom_1.screen.getByText('首页').closest('a');
        expect(homeLink).toHaveAttribute('href', '/');
    });
    it('应该支持点击事件', () => {
        const mockOnClick = jest.fn();
        const itemsWithClick = [
            { key: 'home', title: '首页', onClick: mockOnClick },
            { key: 'detail', title: '详情' },
        ];
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: itemsWithClick }) }));
        const homeLink = dom_1.screen.getByText('首页').closest('a');
        homeLink?.click();
        expect(mockOnClick).toHaveBeenCalled();
    });
    it('应该正确标记最后一项', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems }) }));
        const lastItem = dom_1.screen.getByText('详情');
        expect(lastItem).toHaveAttribute('aria-current', 'page');
    });
    it('应该支持禁用状态', () => {
        const itemsWithDisabled = [
            { key: 'home', title: '首页', href: '/', disabled: true },
            { key: 'detail', title: '详情' },
        ];
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: itemsWithDisabled }) }));
        const homeLink = dom_1.screen.getByText('首页').closest('a');
        expect(homeLink).toHaveAttribute('aria-disabled', 'true');
    });
    it('应该支持自定义类名', () => {
        const { container } = (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems, className: "custom-breadcrumb" }) }));
        expect(container.querySelector('.custom-breadcrumb')).toBeInTheDocument();
    });
    it('应该支持自定义分隔符组件', () => {
        const customSeparator = (0, jsx_runtime_1.jsx)("span", { className: "custom-separator", children: "\u2192" });
        const { container } = (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: mockItems, separator: customSeparator }) }));
        const customSeparators = container.querySelectorAll('.custom-separator');
        expect(customSeparators.length).toBe(2);
    });
    it('应该正确处理空项', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: [] }) }));
        expect(dom_1.screen.queryByRole('navigation')).toBeInTheDocument();
    });
    it('应该支持单个项', () => {
        const singleItem = [{ key: 'home', title: '首页' }];
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Breadcrumb_1.Breadcrumb, { items: singleItem }) }));
        expect(dom_1.screen.getByText('首页')).toBeInTheDocument();
        expect(dom_1.screen.queryByText('/')).not.toBeInTheDocument();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL0JyZWFkY3J1bWIudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7O0FBQUE7Ozs7Ozs7R0FPRztBQUVILGtEQUEyRDtBQUMzRCw4Q0FBOEM7QUFFOUMsOENBQTJDO0FBQzNDLDZEQUEwRDtBQUUxRCxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtJQUMxQixNQUFNLFNBQVMsR0FBRztRQUNoQixFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFO1FBQ3ZDLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7UUFDbkQsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7S0FDL0IsQ0FBQztJQUVGLEVBQUUsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO1FBQ25CLElBQUEsY0FBTSxFQUNKLHVCQUFDLDZCQUFhLGNBQ1osdUJBQUMsdUJBQVUsSUFBQyxLQUFLLEVBQUUsU0FBUyxHQUFJLEdBQ2xCLENBQ2pCLENBQUM7UUFDRixNQUFNLENBQUMsWUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDbkQsTUFBTSxDQUFDLFlBQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ25ELE1BQU0sQ0FBQyxZQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUNyRCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO1FBQ25CLElBQUEsY0FBTSxFQUNKLHVCQUFDLDZCQUFhLGNBQ1osdUJBQUMsdUJBQVUsSUFBQyxLQUFL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Y0FDWix1QkFBQyx1QkFBVSxJQUFDLEtBQUssRUFBRSxFQUFFLEdBQUksR0FDWCxDQUNqQixDQUFDO1FBQ0YsTUFBTSxDQUFDLFlBQU0sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQy9ELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDakIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDbEQsSUFBQSxjQUFNLEVBQ0osdUJBQUMsNkJBQWEsY0FDWix1QkFBQyx1QkFBVSxJQUFDLEtBQUssRUFBRSxVQUFVLEdBQUksR0FDbkIsQ0FDakIsQ0FBQztRQUNGLE1BQU0sQ0FBQyxZQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNuRCxNQUFNLENBQUMsWUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzFELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL0JyZWFkY3J1bWIudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSDpnaLljIXlsZHlr7zoiKrnu4Tku7bmtYvor5VcbiAqIEBkZXNjcmlwdGlvbiDmtYvor5VCcmVhZGNydW1i57uE5Lu255qE5ZCE6aG55Yqf6IO9XG4gKiBAbW9kdWxlIF9fdGVzdHNfXy9jb21wb25lbnRzL0JyZWFkY3J1bWIudGVzdFxuICogQGF1dGhvciBZWUPCs1xuICogQHZlcnNpb24gMS4wLjBcbiAqIEBjcmVhdGVkIDIwMjYtMDItMjNcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgc2NyZWVuIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9kb20nO1xuXG5pbXBvcnQgeyBCcmVhZGNydW1iIH0gZnJvbSAnLi4vQnJlYWRjcnVtYic7XG5pbXBvcnQgeyBUaGVtZVByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vdGhlbWUvVGhlbWVQcm92aWRlcic7XG5cbmRlc2NyaWJlKCdCcmVhZGNydW1iJywgKCkgPT4ge1xuICBjb25zdCBtb2NrSXRlbXMgPSBbXG4gICAgeyBrZXk6ICdob21lJywgdGl0bGU6ICfpppbpobUnLCBocmVmOiAnLycgfSxcbiAgICB7IGtleTogJ3Byb2R1Y3RzJywgdGl0bGU6ICfkuqflk4EnLCBocmVmOiAnL3Byb2R1Y3RzJyB9LFxuICAgIHsga2V5OiAnZGV0YWlsJywgdGl0bGU6ICfor6bmg4UnIH0sXG4gIF07XG5cbiAgaXQoJ+W6lOivpea4suafk+mdouWMheWxkeWvvOiIqicsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPEJyZWFkY3J1bWIgaXRlbXM9e21vY2tJdGVtc30gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfpppbpobUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn5Lqn5ZOBJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+ivpuaDhScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5L2/55So6buY6K6k5YiG6ZqU56ymJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8QnJlYWRjcnVtYiBpdGVtcz17bW9ja0l0ZW1zfSAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG4gICAgY29uc3Qgc2VwYXJhdG9ycyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoJy8nKTtcbiAgICBleHBlY3Qoc2VwYXJhdG9ycykudG9IYXZlTGVuZ3RoKDIpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5L2/55So6Ieq5a6a5LmJ5YiG6ZqU56ymJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8QnJlYWRjcnVtYiBpdGVtcz17bW9ja0l0ZW1zfSBzZXBhcmF0b3I9XCI+XCIgLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGNvbnN0IHNlcGFyYXRvcnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCc+Jyk7XG4gICAgZXhwZWN0KHNlcGFyYXRvcnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpea4suafk+mTvuaOpScsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPEJyZWFkY3J1bWIgaXRlbXM9e21vY2tJdGVtc30gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGNvbnN0IGhvbWVMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgn6aaW6aG1JykuY2xvc2VzdCgnYScpO1xuICAgIGV4cGVjdChob21lTGluaykudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy8nKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeeCueWHu+S6i+S7ticsICgpID0+IHtcbiAgICBjb25zdCBtb2NrT25DbGljayA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBpdGVtc1dpdGhDbGljayA9IFtcbiAgICAgIHsga2V5OiAnaG9tZScsIHRpdGxlOiAn6aaW6aG1Jywgb25DbGljazogbW9ja09uQ2xpY2sgfSxcbiAgICAgIHsga2V5OiAnZGV0YWlsJywgdGl0bGU6ICfor6bmg4UnIH0sXG4gICAgXTtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPEJyZWFkY3J1bWIgaXRlbXM9e2l0ZW1zV2l0aENsaWNrfSAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG4gICAgY29uc3QgaG9tZUxpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCfpppbpobUnKS5jbG9zZXN0KCdhJyk7XG4gICAgaG9tZUxpbms/LmNsaWNrKCk7XG4gICAgZXhwZWN0KG1vY2tPbkNsaWNrKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmraPnoa7moIforrDmnIDlkI7kuIDpobknLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxCcmVhZGNydW1iIGl0ZW1zPXttb2NrSXRlbXN9IC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBjb25zdCBsYXN0SXRlbSA9IHNjcmVlbi5nZXRCeVRleHQoJ+ivpuaDhScpO1xuICAgIGV4cGVjdChsYXN0SXRlbSkudG9IYXZlQXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnLCAncGFnZScpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB56aB55So54q25oCBJywgKCkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zV2l0aERpc2FibGVkID0gW1xuICAgICAgeyBrZXk6ICdob21lJywgdGl0bGU6ICfpppbpobUnLCBocmVmOiAnLycsIGRpc2FibGVkOiB0cnVlIH0sXG4gICAgICB7IGtleTogJ2RldGFpbCcsIHRpdGxlOiAn6K+m5oOFJyB9LFxuICAgIF07XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxCcmVhZGNydW1iIGl0ZW1zPXtpdGVtc1dpdGhEaXNhYmxlZH0gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGNvbnN0IGhvbWVMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgn6aaW6aG1JykuY2xvc2VzdCgnYScpO1xuICAgIGV4cGVjdChob21lTGluaykudG9IYXZlQXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeiHquWumuS5ieexu+WQjScsICgpID0+IHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxCcmVhZGNydW1iIGl0ZW1zPXttb2NrSXRlbXN9IGNsYXNzTmFtZT1cImN1c3RvbS1icmVhZGNydW1iXCIgLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1c3RvbS1icmVhZGNydW1iJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmlK/mjIHoh6rlrprkuYnliIbpmpTnrKbnu4Tku7YnLCAoKSA9PiB7XG4gICAgY29uc3QgY3VzdG9tU2VwYXJhdG9yID0gPHNwYW4gY2xhc3NOYW1lPVwiY3VzdG9tLXNlcGFyYXRvclwiPuKGkjwvc3Bhbj47XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8QnJlYWRjcnVtYiBpdGVtcz17bW9ja0l0ZW1zfSBzZXBhcmF0b3I9e2N1c3RvbVNlcGFyYXRvcn0gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGNvbnN0IGN1c3RvbVNlcGFyYXRvcnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmN1c3RvbS1zZXBhcmF0b3InKTtcbiAgICBleHBlY3QoY3VzdG9tU2VwYXJhdG9ycy5sZW5ndGgpLnRvQmUoMik7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmraPnoa7lpITnkIbnqbrpobknLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxCcmVhZGNydW1iIGl0ZW1zPXtbXX0gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVJvbGUoJ25hdmlnYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeWNleS4qumhuScsICgpID0+IHtcbiAgICBjb25zdCBzaW5nbGVJdGVtID0gW3sga2V5OiAnaG9tZScsIHRpdGxlOiAn6aaW6aG1JyB9XTtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPEJyZWFkY3J1bWIgaXRlbXM9e3NpbmdsZUl0ZW19IC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn6aaW6aG1JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnLycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==