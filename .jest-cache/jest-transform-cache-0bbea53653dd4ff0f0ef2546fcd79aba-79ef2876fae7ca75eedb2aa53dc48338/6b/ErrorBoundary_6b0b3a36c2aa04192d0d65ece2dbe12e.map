{"version":3,"names":["cov_2kp5gwa9g1","actualCoverage","s","react_1","require","ErrorLogger_1","ThemeProvider_1","ErrorFallback","error","errorInfo","onReset","className","b","dataTestId","f","tokens","useTheme","containerStyles","display","flexDirection","alignItems","justifyContent","minHeight","padding","backgroundColor","color","iconStyles","fontSize","marginBottom","titleStyles","fontWeight","messageStyles","textAlign","maxWidth","detailsStyles","borderRadius","width","overflow","detailsTitleStyles","detailsTextStyles","fontFamily","whiteSpace","wordBreak","buttonStyles","border","cursor","transition","buttonHoverStyles","opacity","jsx_runtime_1","jsxs","style","children","jsx","message","componentStack","onClick","onMouseEnter","e","Object","assign","target","onMouseLeave","exports","ErrorBoundary","Component","constructor","props","handleReset","setState","hasError","state","getDerivedStateFromError","componentDidCatch","errorLogger","handle","component","action","additionalData","onError","render","fallback"],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/components/ErrorBoundary.tsx"],"sourcesContent":["/**\n * @file 错误边界组件\n * @description YYC³ Design System错误边界组件\n * @component ErrorBoundary\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-23\n * @updated 2026-02-23\n * @copyright Copyright (c) 2026 YYC³\n * @license MIT\n */\n\nimport { Component, ReactNode, ErrorInfo } from 'react';\nimport { errorLogger } from '../core/ErrorLogger';\nimport { ErrorBoundaryState } from '../types/error';\nimport { useTheme } from '../theme/ThemeProvider';\n\nexport interface ErrorBoundaryProps {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n  component?: string;\n  'data-testid'?: string;\n}\n\nexport interface ErrorFallbackProps {\n  error: Error;\n  errorInfo: ErrorInfo | null;\n  onReset?: () => void;\n  className?: string;\n  'data-testid'?: string;\n}\n\nexport const ErrorFallback = ({\n  error,\n  errorInfo,\n  onReset,\n  className = '',\n  'data-testid': dataTestId,\n}: ErrorFallbackProps) => {\n  const { tokens } = useTheme();\n\n  const containerStyles = {\n    display: 'flex',\n    flexDirection: 'column' as const,\n    alignItems: 'center' as const,\n    justifyContent: 'center' as const,\n    minHeight: '400px',\n    padding: '40px',\n    backgroundColor: (tokens['color.background'] as string) || '#fff',\n    color: (tokens['color.text.primary'] as string) || '#333',\n  };\n\n  const iconStyles = {\n    fontSize: '64px',\n    marginBottom: '20px',\n  };\n\n  const titleStyles = {\n    fontSize: '24px',\n    fontWeight: 'bold' as const,\n    marginBottom: '12px',\n    color: (tokens['color.error'] as string) || '#ff4d4f',\n  };\n\n  const messageStyles = {\n    fontSize: '16px',\n    marginBottom: '24px',\n    textAlign: 'center' as const,\n    maxWidth: '600px',\n    color: (tokens['color.text.secondary'] as string) || '#666',\n  };\n\n  const detailsStyles = {\n    backgroundColor: (tokens['color.surface'] as string) || '#f5f5f5',\n    padding: '16px',\n    borderRadius: '4px',\n    marginBottom: '24px',\n    maxWidth: '800px',\n    width: '100%',\n    overflow: 'auto',\n  };\n\n  const detailsTitleStyles = {\n    fontSize: '14px',\n    fontWeight: 'bold' as const,\n    marginBottom: '8px',\n    color: (tokens['color.text.primary'] as string) || '#333',\n  };\n\n  const detailsTextStyles = {\n    fontSize: '12px',\n    fontFamily: 'monospace',\n    color: (tokens['color.text.secondary'] as string) || '#666',\n    whiteSpace: 'pre-wrap' as const,\n    wordBreak: 'break-word' as const,\n  };\n\n  const buttonStyles = {\n    padding: '10px 20px',\n    backgroundColor: (tokens['color.primary'] as string) || '#d45a5f',\n    color: '#fff',\n    border: 'none',\n    borderRadius: '4px',\n    cursor: 'pointer',\n    fontSize: '14px',\n    fontWeight: '500',\n    transition: 'all 0.2s',\n  };\n\n  const buttonHoverStyles = {\n    ...buttonStyles,\n    opacity: 0.9,\n  };\n\n  return (\n    <div className={className} style={containerStyles} data-testid={dataTestId}>\n      <div style={iconStyles}>⚠️</div>\n      <h1 style={titleStyles}>出错了</h1>\n      <p style={messageStyles}>抱歉，应用程序遇到了一个错误。请尝试刷新页面或联系支持团队。</p>\n\n      {errorInfo && (\n        <details style={detailsStyles}>\n          <summary style={detailsTitleStyles}>错误详情</summary>\n          <pre style={detailsTextStyles}>\n            {error.message}\n            {'\\n\\n'}\n            {errorInfo.componentStack}\n          </pre>\n        </details>\n      )}\n\n      {onReset && (\n        <button\n          style={buttonStyles}\n          onClick={onReset}\n          onMouseEnter={(e) => Object.assign((e.target as HTMLElement).style, buttonHoverStyles)}\n          onMouseLeave={(e) => Object.assign((e.target as HTMLElement).style, buttonStyles)}\n        >\n          重新加载\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    this.setState({\n      errorInfo,\n    });\n\n    errorLogger.handle(error, {\n      component: this.props.component || 'ErrorBoundary',\n      action: 'componentDidCatch',\n      additionalData: {\n        componentStack: errorInfo.componentStack,\n      },\n    });\n\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  handleReset = (): void => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <ErrorFallback\n          error={this.state.error!}\n          errorInfo={this.state.errorInfo}\n          onReset={this.handleReset}\n          data-testid=\"error-fallback\"\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}\n"],"mappings":"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","ignoreList":[]}