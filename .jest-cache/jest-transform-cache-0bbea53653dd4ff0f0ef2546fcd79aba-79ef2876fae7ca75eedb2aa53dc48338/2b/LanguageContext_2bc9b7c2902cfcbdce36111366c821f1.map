{"version":3,"names":["exports","useLanguage","cov_23xu6hgqjb","s","LanguageProvider","react_1","require","zh_json_1","__importDefault","en_json_1","LanguageContext","createContext","defaultT","args","f","length","b","defaultContext","lang","setLang","toggleLang","t","resolveKey","obj","path","parts","split","current","part","undefined","ctx","useContext","children","setLangState","useState","saved","localStorage","getItem","useEffect","setItem","document","documentElement","setAttribute","useCallback","l","prev","locales","useMemo","zh","default","en","key","resolved","otherLang","fallback","handler","e","ctrlKey","altKey","toLowerCase","preventDefault","window","addEventListener","removeEventListener","jsx_runtime_1","jsx","Provider","value"],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/context/LanguageContext.tsx"],"sourcesContent":["/**\n * YYC³ Design System — Language Context\n *\n * Token Reference:\n *   - Persists to localStorage(\"yyc3-lang\")\n *   - Sets html[lang] attribute for accessibility\n *   - Keyboard shortcut: Ctrl+Alt+L toggles zh ↔ en\n *\n * Supports two call signatures:\n *   t('nav.home')          → key-based lookup from locale JSON\n *   t('首页', 'Home')      → inline fallback (legacy)\n */\nimport React, { createContext, useContext, useState, useCallback, useEffect, useMemo } from 'react';\nimport zhLocale from '../locales/zh.json';\nimport enLocale from '../locales/en.json';\n\nexport type Language = 'zh' | 'en';\n\ntype TFunction = {\n  (key: string): string;\n  (zh: string, en: string): string;\n};\n\ninterface LanguageContextType {\n  lang: Language;\n  setLang: (lang: Language) => void;\n  toggleLang: () => void;\n  t: TFunction;\n}\n\nconst LanguageContext = createContext<LanguageContextType | null>(null);\n\n// Default t function for when provider is not yet available\nconst defaultT: TFunction = ((...args: [string] | [string, string]): string => {\n  if (args.length === 2) return args[0];\n  return args[0];\n}) as TFunction;\n\nconst defaultContext: LanguageContextType = {\n  lang: 'zh',\n  setLang: () => {},\n  toggleLang: () => {},\n  t: defaultT,\n};\n\n// Resolve dot-notation key from nested object\nfunction resolveKey(obj: Record<string, unknown>, path: string): string | undefined {\n  const parts = path.split('.');\n  let current: unknown = obj;\n  for (const part of parts) {\n    if (current === null || current === undefined || typeof current !== 'object') return undefined;\n    current = (current as Record<string, unknown>)[part];\n  }\n  return typeof current === 'string' ? current : undefined;\n}\n\nexport function useLanguage() {\n  const ctx = useContext(LanguageContext);\n  return ctx ?? defaultContext;\n}\n\nexport function LanguageProvider({ children }: { children: React.ReactNode }) {\n  const [lang, setLangState] = useState<Language>(() => {\n    const saved = localStorage.getItem('yyc3-lang');\n    return (saved as Language) || 'zh';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('yyc3-lang', lang);\n    document.documentElement.setAttribute('lang', lang === 'zh' ? 'zh-CN' : 'en');\n  }, [lang]);\n\n  const setLang = useCallback((l: Language) => setLangState(l), []);\n\n  const toggleLang = useCallback(() => {\n    setLangState((prev) => (prev === 'zh' ? 'en' : 'zh'));\n  }, []);\n\n  const locales = useMemo(\n    () => ({ zh: zhLocale as Record<string, unknown>, en: enLocale as Record<string, unknown> }),\n    []\n  );\n\n  const t: TFunction = useCallback(\n    (...args: [string] | [string, string]): string => {\n      if (args.length === 2) {\n        // Legacy inline: t('中文', 'English')\n        return lang === 'zh' ? args[0] : args[1];\n      }\n      // Key-based: t('nav.home')\n      const key = args[0];\n      const resolved = resolveKey(locales[lang], key);\n      if (resolved !== undefined) return resolved;\n      // Fallback: try other locale, or return key itself\n      const otherLang = lang === 'zh' ? 'en' : 'zh';\n      const fallback = resolveKey(locales[otherLang], key);\n      return fallback !== undefined ? fallback : key;\n    },\n    [lang, locales]\n  ) as TFunction;\n\n  // Keyboard shortcut: Ctrl+Alt+L\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.ctrlKey && e.altKey && e.key.toLowerCase() === 'l') {\n        e.preventDefault();\n        toggleLang();\n      }\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n  }, [toggleLang]);\n\n  return (\n    <LanguageContext.Provider value={{ lang, setLang, toggleLang, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}