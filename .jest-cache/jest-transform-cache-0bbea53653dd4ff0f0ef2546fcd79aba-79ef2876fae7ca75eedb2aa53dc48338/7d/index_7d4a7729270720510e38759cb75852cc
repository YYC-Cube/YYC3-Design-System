7feea476108c75da389697f0d62aaf0c
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.destroyPerformanceMonitoring = exports.getPerformanceMetrics = exports.initPerformanceMonitoring = void 0;
const monitor_1 = __importDefault(require("./monitor"));
let monitor = null;
const initPerformanceMonitoring = (reportUrl) => {
    if (typeof window !== 'undefined' && !monitor) {
        monitor = new monitor_1.default(reportUrl);
        monitor.init();
        window.performanceMonitor = monitor;
    }
};
exports.initPerformanceMonitoring = initPerformanceMonitoring;
const getPerformanceMetrics = () => {
    return monitor ? monitor.getMetrics() : {};
};
exports.getPerformanceMetrics = getPerformanceMetrics;
const destroyPerformanceMonitoring = () => {
    if (monitor) {
        monitor.destroy();
        monitor = null;
        delete window.performanceMonitor;
    }
};
exports.destroyPerformanceMonitoring = destroyPerformanceMonitoring;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3BlcmZvcm1hbmNlL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHdEQUEyQztBQU0zQyxJQUFJLE9BQU8sR0FBOEIsSUFBSSxDQUFDO0FBRXZDLE1BQU0seUJBQXlCLEdBQUcsQ0FBQyxTQUFrQixFQUFFLEVBQUU7SUFDOUQsSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM5QyxPQUFPLEdBQUcsSUFBSSxpQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1QyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZCxNQUE0QixDQUFDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQztJQUM3RCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBTlcsUUFBQSx5QkFBeUIsNkJBTXBDO0FBRUssTUFBTSxxQkFBcUIsR0FBRyxHQUFHLEVBQUU7SUFDeEMsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0FBQzdDLENBQUMsQ0FBQztBQUZXLFFBQUEscUJBQXFCLHlCQUVoQztBQUVLLE1BQU0sNEJBQTRCLEdBQUcsR0FBRyxFQUFFO0lBQy9DLElBQUksT0FBTyxFQUFFLENBQUM7UUFDWixPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbEIsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNmLE9BQVEsTUFBNEIsQ0FBQyxrQkFBa0IsQ0FBQztJQUMxRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBTlcsUUFBQSw0QkFBNEIsZ0NBTXZDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9wZXJmb3JtYW5jZS9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGVyZm9ybWFuY2VNb25pdG9yIGZyb20gJy4vbW9uaXRvcic7XG5cbmludGVyZmFjZSBQZXJmb3JtYW5jZVdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gIHBlcmZvcm1hbmNlTW9uaXRvcj86IFBlcmZvcm1hbmNlTW9uaXRvcjtcbn1cblxubGV0IG1vbml0b3I6IFBlcmZvcm1hbmNlTW9uaXRvciB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgY29uc3QgaW5pdFBlcmZvcm1hbmNlTW9uaXRvcmluZyA9IChyZXBvcnRVcmw/OiBzdHJpbmcpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICFtb25pdG9yKSB7XG4gICAgbW9uaXRvciA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3IocmVwb3J0VXJsKTtcbiAgICBtb25pdG9yLmluaXQoKTtcbiAgICAod2luZG93IGFzIFBlcmZvcm1hbmNlV2luZG93KS5wZXJmb3JtYW5jZU1vbml0b3IgPSBtb25pdG9yO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UGVyZm9ybWFuY2VNZXRyaWNzID0gKCkgPT4ge1xuICByZXR1cm4gbW9uaXRvciA/IG1vbml0b3IuZ2V0TWV0cmljcygpIDoge307XG59O1xuXG5leHBvcnQgY29uc3QgZGVzdHJveVBlcmZvcm1hbmNlTW9uaXRvcmluZyA9ICgpID0+IHtcbiAgaWYgKG1vbml0b3IpIHtcbiAgICBtb25pdG9yLmRlc3Ryb3koKTtcbiAgICBtb25pdG9yID0gbnVsbDtcbiAgICBkZWxldGUgKHdpbmRvdyBhcyBQZXJmb3JtYW5jZVdpbmRvdykucGVyZm9ybWFuY2VNb25pdG9yO1xuICB9XG59O1xuIl0sInZlcnNpb24iOjN9