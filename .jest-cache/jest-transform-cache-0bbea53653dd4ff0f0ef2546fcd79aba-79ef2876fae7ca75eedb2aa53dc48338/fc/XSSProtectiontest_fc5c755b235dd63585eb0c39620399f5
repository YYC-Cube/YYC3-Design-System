ea01b9c4824ba74a9f40e74b82b23368
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * @file XSS防护测试
 * @description 测试XSS防护功能
 * @module __tests__/security/XSSProtection.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-19
 */
const React = __importStar(require("react"));
const XSSProtection_1 = require("../XSSProtection");
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
describe('XSS Protection Module', () => {
    beforeEach(() => {
        (0, react_1.cleanup)();
    });
    describe('XSSProvider', () => {
        it('应该提供默认配置', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [dirty, setDirty] = React.useState('<script>alert("xss")</script>');
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize(dirty).then(setClean);
                }, [dirty, sanitize]);
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "input", value: dirty, onChange: (e) => setDirty(e.target.value) }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const input = dom_1.screen.getByTestId('input');
            const output = dom_1.screen.getByTestId('output');
            expect(input).toBeInTheDocument();
            expect(output).toBeInTheDocument();
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('<script>');
            });
        });
        it('应该支持自定义配置', async () => {
            const customConfig = {
                allowedTags: ['b', 'i', 'em'],
                allowedAttributes: {},
            };
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [input] = React.useState('<b>bold</b><script>evil</script>');
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize(input).then(setClean);
                }, [input, sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { config: customConfig, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toContain('bold');
            });
            expect(output.textContent).not.toContain('<script>');
        });
        it('应该处理HTML实体编码', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('&lt;script&gt;alert(1)&lt;/script&gt;').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toBeDefined();
            });
        });
        it('应该过滤危险属性', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<div onclick="alert(1)">click</div>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('onclick');
            });
        });
    });
    describe('useXSS Hook', () => {
        it('应该返回sanitize函数', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<p>safe content</p>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output).toBeInTheDocument();
            });
        });
        it('应该处理空字符串', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toBe('');
            });
        });
        it('应该处理null和undefined', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [cleanNull, setCleanNull] = React.useState('');
                const [cleanUndefined, setCleanUndefined] = React.useState('');
                React.useEffect(() => {
                    sanitize(null).then(setCleanNull);
                    sanitize(undefined).then(setCleanUndefined);
                }, [sanitize]);
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "output-null", children: cleanNull }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "output-undefined", children: cleanUndefined })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const outputNull = dom_1.screen.getByTestId('output-null');
            const outputUndefined = dom_1.screen.getByTestId('output-undefined');
            await (0, react_1.waitFor)(() => {
                expect(outputNull).toBeInTheDocument();
                expect(outputUndefined).toBeInTheDocument();
            });
        });
        it('应该处理特殊字符', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<>&"\'').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toBeDefined();
            });
        });
    });
    describe('XSS攻击防护', () => {
        it('应该阻止script标签注入', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<script>alert("xss")</script>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('<script>');
                expect(output.textContent).not.toContain('alert');
            });
        });
        it('应该阻止iframe注入', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<iframe src="evil.com"></iframe>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('<iframe');
            });
        });
        it('应该阻止javascript:协议', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<a href="javascript:alert(1)">click</a>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('javascript:');
            });
        });
        it('应该阻止on事件处理器', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<div onmouseover="alert(1)">hover</div>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('onmouseover');
            });
        });
        it('应该阻止data:URL', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<img src="data:text/html,<script>alert(1)</script>">').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).not.toContain('data:');
            });
        });
    });
    describe('安全内容保留', () => {
        it('应该保留安全的HTML标签', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<p><strong>bold</strong> and <em>italic</em></p>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toContain('bold');
                expect(output.textContent).toContain('italic');
            });
        });
        it('应该保留链接', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<a href="https://example.com">safe link</a>').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toContain('safe link');
            });
        });
        it('应该保留图片', async () => {
            const TestComponent = () => {
                const { sanitize } = (0, XSSProtection_1.useXSS)();
                const [clean, setClean] = React.useState('');
                React.useEffect(() => {
                    sanitize('<img src="https://example.com/image.jpg" alt="image">').then(setClean);
                }, [sanitize]);
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "output", children: clean });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(XSSProtection_1.XSSProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const output = dom_1.screen.getByTestId('output');
            await (0, react_1.waitFor)(() => {
                expect(output.textContent).toBeDefined();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3NlY3VyaXR5L19fdGVzdHNfXy9YU1NQcm90ZWN0aW9uLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7O0dBT0c7QUFFSCw2Q0FBK0I7QUFDL0Isb0RBQXVEO0FBQ3ZELGtEQUFrRjtBQUNsRiw4Q0FBOEM7QUFFOUMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtJQUNyQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsSUFBQSxlQUFPLEdBQUUsQ0FBQztJQUNaLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDM0IsRUFBRSxDQUFDLFVBQVUsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4QixNQUFNLGFBQWEsR0FBRyxHQUFHLEVBQUU7Z0JBQ3pCLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxJQUFBLHNCQUFNLEdBQUUsQ0FBQztnQkFDOUIsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLCtCQUErQixDQUFDLENBQUM7Z0JBQzFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFFN0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7b0JBQ25CLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ2pDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUV0QixPQUFPLENBQ0wsNENBQ0UsaURBQW1CLE9BQU8sRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxN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O2dCQUN6QixNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsSUFBQSxzQkFBTSxHQUFFLENBQUM7Z0JBQzlCLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFFN0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7b0JBQ25CLFFBQVEsQ0FBQyx1REFBdUQsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDbkYsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFFZixPQUFPLCtDQUFpQixRQUFRLFlBQUUsS0FBSyxHQUFPLENBQUM7WUFDakQsQ0FBQyxDQUFDO1lBRUYsSUFBQSxjQUFNLEVBQ0osdUJBQUMsMkJBQVcsY0FDVix1QkFBQyxhQUFhLEtBQUcsR0FDTCxDQUNmLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxZQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTVDLE1BQU0sSUFBQSxlQUFPLEVBQUMsR0FBRyxFQUFFO2dCQUNqQixNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9zZWN1cml0eS9fX3Rlc3RzX18vWFNTUHJvdGVjdGlvbi50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIFhTU+mYsuaKpOa1i+ivlVxuICogQGRlc2NyaXB0aW9uIOa1i+ivlVhTU+mYsuaKpOWKn+iDvVxuICogQG1vZHVsZSBfX3Rlc3RzX18vc2VjdXJpdHkvWFNTUHJvdGVjdGlvbi50ZXN0XG4gKiBAYXV0aG9yIFlZQ8KzXG4gKiBAdmVyc2lvbiAxLjAuMFxuICogQGNyZWF0ZWQgMjAyNi0wMi0xOVxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFhTU1Byb3ZpZGVyLCB1c2VYU1MgfSBmcm9tICcuLi9YU1NQcm90ZWN0aW9uJztcbmltcG9ydCB7IHJlbmRlciwgY2xlYW51cCwgZmlyZUV2ZW50LCB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IHNjcmVlbiB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvZG9tJztcblxuZGVzY3JpYmUoJ1hTUyBQcm90ZWN0aW9uIE1vZHVsZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xlYW51cCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnWFNTUHJvdmlkZXInLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaPkOS+m+m7mOiupOmFjee9ricsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc2FuaXRpemUgfSA9IHVzZVhTUygpO1xuICAgICAgICBjb25zdCBbZGlydHksIHNldERpcnR5XSA9IFJlYWN0LnVzZVN0YXRlKCc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+Jyk7XG4gICAgICAgIGNvbnN0IFtjbGVhbiwgc2V0Q2xlYW5dID0gUmVhY3QudXNlU3RhdGUoJycpO1xuXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgc2FuaXRpemUoZGlydHkpLnRoZW4oc2V0Q2xlYW4pO1xuICAgICAgICB9LCBbZGlydHksIHNhbml0aXplXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGlucHV0IGRhdGEtdGVzdGlkPVwiaW5wdXRcIiB2YWx1ZT17ZGlydHl9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0RGlydHkoZS50YXJnZXQudmFsdWUpfSAvPlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFhTU1Byb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvWFNTUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5wdXQnKTtcbiAgICAgIGNvbnN0IG91dHB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0Jyk7XG5cbiAgICAgIGV4cGVjdChpbnB1dCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChvdXRwdXQpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS5ub3QudG9Db250YWluKCc8c2NyaXB0PicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB6Ieq5a6a5LmJ6YWN572uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tQ29uZmlnID0ge1xuICAgICAgICBhbGxvd2VkVGFnczogWydiJywgJ2knLCAnZW0nXSxcbiAgICAgICAgYWxsb3dlZEF0dHJpYnV0ZXM6IHt9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzYW5pdGl6ZSB9ID0gdXNlWFNTKCk7XG4gICAgICAgIGNvbnN0IFtpbnB1dF0gPSBSZWFjdC51c2VTdGF0ZSgnPGI+Ym9sZDwvYj48c2NyaXB0PmV2aWw8L3NjcmlwdD4nKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZShpbnB1dCkudGhlbihzZXRDbGVhbik7XG4gICAgICAgIH0sIFtpbnB1dCwgc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlciBjb25maWc9e2N1c3RvbUNvbmZpZ30+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9YU1NQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG91dHB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ2JvbGQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS5ub3QudG9Db250YWluKCc8c2NyaXB0PicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhkhUTUzlrp7kvZPnvJbnoIEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnJmx0O3NjcmlwdCZndDthbGVydCgxKSZsdDsvc2NyaXB0Jmd0OycpLnRoZW4oc2V0Q2xlYW4pO1xuICAgICAgICB9LCBbc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L1hTU1Byb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvdXRwdXQnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChvdXRwdXQudGV4dENvbnRlbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xov4fmu6TljbHpmanlsZ7mgKcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnPGRpdiBvbmNsaWNrPVwiYWxlcnQoMSlcIj5jbGljazwvZGl2PicpLnRoZW4oc2V0Q2xlYW4pO1xuICAgICAgICB9LCBbc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L1hTU1Byb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvdXRwdXQnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChvdXRwdXQudGV4dENvbnRlbnQpLm5vdC50b0NvbnRhaW4oJ29uY2xpY2snKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXNlWFNTIEhvb2snLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpei/lOWbnnNhbml0aXpl5Ye95pWwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzYW5pdGl6ZSB9ID0gdXNlWFNTKCk7XG4gICAgICAgIGNvbnN0IFtjbGVhbiwgc2V0Q2xlYW5dID0gUmVhY3QudXNlU3RhdGUoJycpO1xuXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgc2FuaXRpemUoJzxwPnNhZmUgY29udGVudDwvcD4nKS50aGVuKHNldENsZWFuKTtcbiAgICAgICAgfSwgW3Nhbml0aXplXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJvdXRwdXRcIj57Y2xlYW59PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8WFNTUHJvdmlkZXI+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9YU1NQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG91dHB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qob3V0cHV0KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG56m65a2X56ym5LiyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzYW5pdGl6ZSB9ID0gdXNlWFNTKCk7XG4gICAgICAgIGNvbnN0IFtjbGVhbiwgc2V0Q2xlYW5dID0gUmVhY3QudXNlU3RhdGUoJycpO1xuXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgc2FuaXRpemUoJycpLnRoZW4oc2V0Q2xlYW4pO1xuICAgICAgICB9LCBbc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L1hTU1Byb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvdXRwdXQnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChvdXRwdXQudGV4dENvbnRlbnQpLnRvQmUoJycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CGbnVsbOWSjHVuZGVmaW5lZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc2FuaXRpemUgfSA9IHVzZVhTUygpO1xuICAgICAgICBjb25zdCBbY2xlYW5OdWxsLCBzZXRDbGVhbk51bGxdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgICAgICBjb25zdCBbY2xlYW5VbmRlZmluZWQsIHNldENsZWFuVW5kZWZpbmVkXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcblxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIHNhbml0aXplKG51bGwgYXMgdW5rbm93biBhcyBzdHJpbmcpLnRoZW4oc2V0Q2xlYW5OdWxsKTtcbiAgICAgICAgICBzYW5pdGl6ZSh1bmRlZmluZWQgYXMgdW5rbm93biBhcyBzdHJpbmcpLnRoZW4oc2V0Q2xlYW5VbmRlZmluZWQpO1xuICAgICAgICB9LCBbc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwib3V0cHV0LW51bGxcIj57Y2xlYW5OdWxsfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dC11bmRlZmluZWRcIj57Y2xlYW5VbmRlZmluZWR9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L1hTU1Byb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0TnVsbCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0LW51bGwnKTtcbiAgICAgIGNvbnN0IG91dHB1dFVuZGVmaW5lZCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0LXVuZGVmaW5lZCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG91dHB1dE51bGwpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChvdXRwdXRVbmRlZmluZWQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbnibnmrorlrZfnrKYnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnPD4mXCJcXCcnKS50aGVuKHNldENsZWFuKTtcbiAgICAgICAgfSwgW3Nhbml0aXplXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJvdXRwdXRcIj57Y2xlYW59PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8WFNTUHJvdmlkZXI+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9YU1NQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG91dHB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdYU1PmlLvlh7vpmLLmiqQnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpemYu+atonNjcmlwdOagh+etvuazqOWFpScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc2FuaXRpemUgfSA9IHVzZVhTUygpO1xuICAgICAgICBjb25zdCBbY2xlYW4sIHNldENsZWFuXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcblxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIHNhbml0aXplKCc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+JykudGhlbihzZXRDbGVhbik7XG4gICAgICAgIH0sIFtzYW5pdGl6ZV0pO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwib3V0cHV0XCI+e2NsZWFufTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFhTU1Byb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvWFNTUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBvdXRwdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ291dHB1dCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG91dHB1dC50ZXh0Q29udGVudCkubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcbiAgICAgICAgZXhwZWN0KG91dHB1dC50ZXh0Q29udGVudCkubm90LnRvQ29udGFpbignYWxlcnQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpemYu+atomlmcmFtZeazqOWFpScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc2FuaXRpemUgfSA9IHVzZVhTUygpO1xuICAgICAgICBjb25zdCBbY2xlYW4sIHNldENsZWFuXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcblxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIHNhbml0aXplKCc8aWZyYW1lIHNyYz1cImV2aWwuY29tXCI+PC9pZnJhbWU+JykudGhlbihzZXRDbGVhbik7XG4gICAgICAgIH0sIFtzYW5pdGl6ZV0pO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwib3V0cHV0XCI+e2NsZWFufTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFhTU1Byb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvWFNTUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBvdXRwdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ291dHB1dCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG91dHB1dC50ZXh0Q29udGVudCkubm90LnRvQ29udGFpbignPGlmcmFtZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6Zi75q2iamF2YXNjcmlwdDrljY/orq4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnPGEgaHJlZj1cImphdmFzY3JpcHQ6YWxlcnQoMSlcIj5jbGljazwvYT4nKS50aGVuKHNldENsZWFuKTtcbiAgICAgICAgfSwgW3Nhbml0aXplXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJvdXRwdXRcIj57Y2xlYW59PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8WFNTUHJvdmlkZXI+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9YU1NQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG91dHB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS5ub3QudG9Db250YWluKCdqYXZhc2NyaXB0OicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6Zi75q2ib27kuovku7blpITnkIblmagnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnPGRpdiBvbm1vdXNlb3Zlcj1cImFsZXJ0KDEpXCI+aG92ZXI8L2Rpdj4nKS50aGVuKHNldENsZWFuKTtcbiAgICAgICAgfSwgW3Nhbml0aXplXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJvdXRwdXRcIj57Y2xlYW59PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8WFNTUHJvdmlkZXI+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9YU1NQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG91dHB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3V0cHV0Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS5ub3QudG9Db250YWluKCdvbm1vdXNlb3ZlcicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6Zi75q2iZGF0YTpVUkwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnPGltZyBzcmM9XCJkYXRhOnRleHQvaHRtbCw8c2NyaXB0PmFsZXJ0KDEpPC9zY3JpcHQ+XCI+JykudGhlbihzZXRDbGVhbik7XG4gICAgICAgIH0sIFtzYW5pdGl6ZV0pO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwib3V0cHV0XCI+e2NsZWFufTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFhTU1Byb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvWFNTUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBvdXRwdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ291dHB1dCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG91dHB1dC50ZXh0Q29udGVudCkubm90LnRvQ29udGFpbignZGF0YTonKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5a6J5YWo5YaF5a655L+d55WZJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xkv53nlZnlronlhajnmoRIVE1M5qCH562+JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzYW5pdGl6ZSB9ID0gdXNlWFNTKCk7XG4gICAgICAgIGNvbnN0IFtjbGVhbiwgc2V0Q2xlYW5dID0gUmVhY3QudXNlU3RhdGUoJycpO1xuXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgc2FuaXRpemUoJzxwPjxzdHJvbmc+Ym9sZDwvc3Ryb25nPiBhbmQgPGVtPml0YWxpYzwvZW0+PC9wPicpLnRoZW4oc2V0Q2xlYW4pO1xuICAgICAgICB9LCBbc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L1hTU1Byb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvdXRwdXQnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChvdXRwdXQudGV4dENvbnRlbnQpLnRvQ29udGFpbignYm9sZCcpO1xuICAgICAgICBleHBlY3Qob3V0cHV0LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ2l0YWxpYycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5L+d55WZ6ZO+5o6lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzYW5pdGl6ZSB9ID0gdXNlWFNTKCk7XG4gICAgICAgIGNvbnN0IFtjbGVhbiwgc2V0Q2xlYW5dID0gUmVhY3QudXNlU3RhdGUoJycpO1xuXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgc2FuaXRpemUoJzxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tXCI+c2FmZSBsaW5rPC9hPicpLnRoZW4oc2V0Q2xlYW4pO1xuICAgICAgICB9LCBbc2FuaXRpemVdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm91dHB1dFwiPntjbGVhbn08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxYU1NQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L1hTU1Byb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvdXRwdXQnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChvdXRwdXQudGV4dENvbnRlbnQpLnRvQ29udGFpbignc2FmZSBsaW5rJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xkv53nlZnlm77niYcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNhbml0aXplIH0gPSB1c2VYU1MoKTtcbiAgICAgICAgY29uc3QgW2NsZWFuLCBzZXRDbGVhbl0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG5cbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBzYW5pdGl6ZSgnPGltZyBzcmM9XCJodHRwczovL2V4YW1wbGUuY29tL2ltYWdlLmpwZ1wiIGFsdD1cImltYWdlXCI+JykudGhlbihzZXRDbGVhbik7XG4gICAgICAgIH0sIFtzYW5pdGl6ZV0pO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwib3V0cHV0XCI+e2NsZWFufTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFhTU1Byb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvWFNTUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBvdXRwdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ291dHB1dCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG91dHB1dC50ZXh0Q29udGVudCkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9