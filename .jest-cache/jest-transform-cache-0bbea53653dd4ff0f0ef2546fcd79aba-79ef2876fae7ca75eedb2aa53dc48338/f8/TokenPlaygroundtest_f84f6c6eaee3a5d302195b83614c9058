cfe40347ff21543794ebe5a73f1de664
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
require("@testing-library/jest-dom");
const TokenPlayground_1 = require("./TokenPlayground");
const ThemeProvider_1 = require("../theme/ThemeProvider");
const renderWithTheme = (component) => {
    return (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: component }));
};
describe('TokenPlayground', () => {
    describe('TokenPlayground 组件', () => {
        it('应该渲染组件', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText(/Token Playground/i)).toBeInTheDocument();
        });
        it('应该支持自定义类名', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, { className: "custom-class" }));
            expect(container.querySelector('.custom-class')).toBeInTheDocument();
        });
    });
    describe('getTokenValue', () => {
        it('应该获取简单的令牌值', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, 'color.primary');
            expect(result).toBe('#ff0000');
        });
        it('应该获取嵌套的令牌值', () => {
            const tokens = { color: { primary: '#ff0000' } };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, 'color.primary');
            expect(result).toBe('#ff0000');
        });
        it('应该处理不存在的令牌', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, 'color.nonexistent');
            expect(result).toBeUndefined();
        });
    });
    describe('getTokenColor', () => {
        it('应该获取颜色令牌', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenColor)(tokens, 'color.primary');
            expect(result).toEqual({ hex: '#ff0000', oklch: '', foreground: '#fff' });
        });
        it('应该处理不存在的颜色令牌', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenColor)(tokens, 'color.nonexistent');
            expect(result).toBeNull();
        });
    });
    describe('getTokenString', () => {
        it('应该获取字符串令牌', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenString)(tokens, 'color.primary', '#000000');
            expect(result).toBe('#ff0000');
        });
        it('应该返回默认值', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenString)(tokens, 'color.nonexistent', '#000000');
            expect(result).toBe('#000000');
        });
        it('应该处理非字符串令牌', () => {
            const tokens = { 'color.primary': { hex: '#ff0000', oklch: '', foreground: '#fff' } };
            const result = (0, TokenPlayground_1.getTokenString)(tokens, 'color.primary', '#000000');
            expect(result).toBe('#000000');
        });
    });
    describe('TokenPlayground 交互功能', () => {
        it('应该显示令牌分类', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText('color')).toBeInTheDocument();
        });
        it('应该默认选择第一个令牌', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText('color.primary')).toBeInTheDocument();
        });
        it('应该点击令牌进行选择', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            const tokenItems = container.querySelectorAll('[style*="cursor: pointer"]');
            if (tokenItems.length > 1) {
                const secondToken = tokenItems[1];
                secondToken.click();
                expect(dom_1.screen.getByText('Value')).toBeInTheDocument();
            }
        });
        it('应该显示颜色预览', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText('Color Preview')).toBeInTheDocument();
        });
        it('应该显示令牌值', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText('Value')).toBeInTheDocument();
        });
    });
    describe('TokenPlayground 主题集成', () => {
        it('应该使用主题令牌', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            const containerDiv = container.firstChild;
            expect(containerDiv).toHaveStyle({
                padding: '2rem',
            });
        });
        it('应该应用主题颜色', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            const header = dom_1.screen.getByText(/Token Playground/i);
            expect(header).toBeInTheDocument();
        });
    });
    describe('TokenPlayground 边界情况', () => {
        it('应该处理空令牌对象', () => {
            const result = (0, TokenPlayground_1.getTokenValue)({}, 'color.primary');
            expect(result).toBeUndefined();
        });
        it('应该处理无效路径', () => {
            const tokens = { 'color.primary': '#ff0000' };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, '');
            expect(result).toBeUndefined();
        });
        it('应该处理深层嵌套路径', () => {
            const tokens = {
                color: {
                    primary: {
                        hex: '#ff0000',
                        oklch: '',
                        foreground: '#fff',
                    },
                },
            };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, 'color.primary.hex');
            expect(result).toBe('#ff0000');
        });
        it('应该处理数组值', () => {
            const tokens = { 'color.primary': ['#ff0000', '#00ff00'] };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, 'color.primary');
            expect(result).toEqual(['#ff0000', '#00ff00']);
        });
        it('应该处理null值', () => {
            const tokens = { 'color.primary': null };
            const result = (0, TokenPlayground_1.getTokenValue)(tokens, 'color.primary');
            expect(result).toBeNull();
        });
    });
    describe('TokenPlayground 颜色令牌', () => {
        it('应该识别颜色令牌', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText('Color Preview')).toBeInTheDocument();
        });
        it('应该显示颜色预览背景', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            const colorPreview = dom_1.screen.getByText(/Color Preview/i);
            expect(colorPreview).toBeInTheDocument();
        });
    });
    describe('TokenPlayground 鼠标交互', () => {
        it('应该响应鼠标悬停', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            const tokenItems = container.querySelectorAll('[style*="cursor: pointer"]');
            if (tokenItems.length > 0) {
                const firstToken = tokenItems[0];
                react_1.fireEvent.mouseEnter(firstToken);
                expect(firstToken.style.backgroundColor).not.toBe('transparent');
                react_1.fireEvent.mouseLeave(firstToken);
                expect(firstToken.style.backgroundColor).toBe('transparent');
            }
        });
    });
    describe('TokenPlayground 响应式布局', () => {
        it('应该使用网格布局', () => {
            const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            const gridContainer = container.querySelector('[style*="display: grid"]');
            expect(gridContainer).toBeInTheDocument();
        });
        it('应该有标题', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText(/Token Playground/i)).toBeInTheDocument();
        });
        it('应该有令牌列表', () => {
            renderWithTheme((0, jsx_runtime_1.jsx)(TokenPlayground_1.TokenPlayground, {}));
            expect(dom_1.screen.getByText('color')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvVG9rZW5QbGF5Z3JvdW5kLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7OztBQVVBLGtEQUEyRDtBQUMzRCw4Q0FBOEM7QUFFOUMscUNBQW1DO0FBQ25DLHVEQUFrRztBQUNsRywwREFBdUQ7QUFFdkQsTUFBTSxlQUFlLEdBQUcsQ0FBQyxTQUE2QixFQUFFLEVBQUU7SUFDeEQsT0FBTyxJQUFBLGNBQU0sRUFBQyx1QkFBQyw2QkFBYSxjQUFFLFNBQVMsR0FBaUIsQ0FBQyxDQUFDO0FBQzVELENBQUMsQ0FBQztBQUVGLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7SUFDL0IsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtRQUNsQyxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtZQUNoQixlQUFlLENBQUMsdUJBQUMsaUNBQWUsS0FBRyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLFlBQU0sQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDcEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtZQUNuQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsZUFBZSxDQUFDLHVCQUFDLGlDQUFlLElBQUMsU0FBUyxFQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7WUFDcEYsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtRQUM3QixFQUFFLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtZQUNwQixNQUFNLE1BQU0sR0FBRyxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsQ0FB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bUIsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNwRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFO1lBQ2pCLGVBQWUsQ0FBQyx1QkFBQyxpQ0FBZSxLQUFHLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9jb21wb25lbnRzL1Rva2VuUGxheWdyb3VuZC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIOS7pOeJjOa4uOS5kOWcuue7hOS7tua1i+ivlVxuICogQGRlc2NyaXB0aW9uIOa1i+ivlSBUb2tlblBsYXlncm91bmQg57uE5Lu255qE5ZCE6aG55Yqf6IO9XG4gKiBAbW9kdWxlIF9fdGVzdHNfXy9jb21wb25lbnRzL1Rva2VuUGxheWdyb3VuZC50ZXN0XG4gKiBAYXV0aG9yIFlZQ8KzXG4gKiBAdmVyc2lvbiAxLjAuMFxuICogQGNyZWF0ZWQgMjAyNi0wMi0yMVxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L2RvbSc7XG5cbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XG5pbXBvcnQgeyBUb2tlblBsYXlncm91bmQsIGdldFRva2VuVmFsdWUsIGdldFRva2VuQ29sb3IsIGdldFRva2VuU3RyaW5nIH0gZnJvbSAnLi9Ub2tlblBsYXlncm91bmQnO1xuaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJy4uL3RoZW1lL1RoZW1lUHJvdmlkZXInO1xuXG5jb25zdCByZW5kZXJXaXRoVGhlbWUgPSAoY29tcG9uZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIHJlbmRlcig8VGhlbWVQcm92aWRlcj57Y29tcG9uZW50fTwvVGhlbWVQcm92aWRlcj4pO1xufTtcblxuZGVzY3JpYmUoJ1Rva2VuUGxheWdyb3VuZCcsICgpID0+IHtcbiAgZGVzY3JpYmUoJ1Rva2VuUGxheWdyb3VuZCDnu4Tku7YnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpea4suafk+e7hOS7ticsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhUaGVtZSg8VG9rZW5QbGF5Z3JvdW5kIC8+KTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9Ub2tlbiBQbGF5Z3JvdW5kL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaUr+aMgeiHquWumuS5ieexu+WQjScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXJXaXRoVGhlbWUoPFRva2VuUGxheWdyb3VuZCBjbGFzc05hbWU9XCJjdXN0b20tY2xhc3NcIiAvPik7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tY2xhc3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFRva2VuVmFsdWUnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiOt+WPlueugOWNleeahOS7pOeJjOWAvCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VucyA9IHsgJ2NvbG9yLnByaW1hcnknOiAnI2ZmMDAwMCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuVmFsdWUodG9rZW5zLCAnY29sb3IucHJpbWFyeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnI2ZmMDAwMCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeiOt+WPluW1jOWll+eahOS7pOeJjOWAvCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VucyA9IHsgY29sb3I6IHsgcHJpbWFyeTogJyNmZjAwMDAnIH0gfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuVmFsdWUodG9rZW5zLCAnY29sb3IucHJpbWFyeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnI2ZmMDAwMCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuS4jeWtmOWcqOeahOS7pOeJjCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VucyA9IHsgJ2NvbG9yLnByaW1hcnknOiAnI2ZmMDAwMCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuVmFsdWUodG9rZW5zLCAnY29sb3Iubm9uZXhpc3RlbnQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFRva2VuQ29sb3InLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiOt+WPluminOiJsuS7pOeJjCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VucyA9IHsgJ2NvbG9yLnByaW1hcnknOiAnI2ZmMDAwMCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuQ29sb3IodG9rZW5zLCAnY29sb3IucHJpbWFyeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7IGhleDogJyNmZjAwMDAnLCBva2xjaDogJycsIGZvcmVncm91bmQ6ICcjZmZmJyB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbkuI3lrZjlnKjnmoTpopzoibLku6TniYwnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbnMgPSB7ICdjb2xvci5wcmltYXJ5JzogJyNmZjAwMDAnIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRUb2tlbkNvbG9yKHRva2VucywgJ2NvbG9yLm5vbmV4aXN0ZW50Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0VG9rZW5TdHJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiOt+WPluWtl+espuS4suS7pOeJjCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VucyA9IHsgJ2NvbG9yLnByaW1hcnknOiAnI2ZmMDAwMCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuU3RyaW5nKHRva2VucywgJ2NvbG9yLnByaW1hcnknLCAnIzAwMDAwMCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnI2ZmMDAwMCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpei/lOWbnum7mOiupOWAvCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VucyA9IHsgJ2NvbG9yLnByaW1hcnknOiAnI2ZmMDAwMCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuU3RyaW5nKHRva2VucywgJ2NvbG9yLm5vbmV4aXN0ZW50JywgJyMwMDAwMDAnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJyMwMDAwMDAnKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbpnZ7lrZfnrKbkuLLku6TniYwnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbnMgPSB7ICdjb2xvci5wcmltYXJ5JzogeyBoZXg6ICcjZmYwMDAwJywgb2tsY2g6ICcnLCBmb3JlZ3JvdW5kOiAnI2ZmZicgfSB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0VG9rZW5TdHJpbmcodG9rZW5zLCAnY29sb3IucHJpbWFyeScsICcjMDAwMDAwJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcjMDAwMDAwJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb2tlblBsYXlncm91bmQg5Lqk5LqS5Yqf6IO9JywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmmL7npLrku6TniYzliIbnsbsnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoVGhlbWUoPFRva2VuUGxheWdyb3VuZCAvPik7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnY29sb3InKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xpu5jorqTpgInmi6nnrKzkuIDkuKrku6TniYwnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoVGhlbWUoPFRva2VuUGxheWdyb3VuZCAvPik7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnY29sb3IucHJpbWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeeCueWHu+S7pOeJjOi/m+ihjOmAieaLqScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXJXaXRoVGhlbWUoPFRva2VuUGxheWdyb3VuZCAvPik7XG4gICAgICBjb25zdCB0b2tlbkl0ZW1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tzdHlsZSo9XCJjdXJzb3I6IHBvaW50ZXJcIl0nKTtcbiAgICAgIGlmICh0b2tlbkl0ZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY29uc3Qgc2Vjb25kVG9rZW4gPSB0b2tlbkl0ZW1zWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBzZWNvbmRUb2tlbi5jbGljaygpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVmFsdWUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmmL7npLrpopzoibLpooTop4gnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoVGhlbWUoPFRva2VuUGxheWdyb3VuZCAvPik7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29sb3IgUHJldmlldycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaYvuekuuS7pOeJjOWAvCcsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhUaGVtZSg8VG9rZW5QbGF5Z3JvdW5kIC8+KTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdWYWx1ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVG9rZW5QbGF5Z3JvdW5kIOS4u+mimOmbhuaIkCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5L2/55So5Li76aKY5Luk54mMJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcldpdGhUaGVtZSg8VG9rZW5QbGF5Z3JvdW5kIC8+KTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckRpdiA9IGNvbnRhaW5lci5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgICAgZXhwZWN0KGNvbnRhaW5lckRpdikudG9IYXZlU3R5bGUoe1xuICAgICAgICBwYWRkaW5nOiAnMnJlbScsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlupTnlKjkuLvpopjpopzoibInLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoVGhlbWUoPFRva2VuUGxheWdyb3VuZCAvPik7XG4gICAgICBjb25zdCBoZWFkZXIgPSBzY3JlZW4uZ2V0QnlUZXh0KC9Ub2tlbiBQbGF5Z3JvdW5kL2kpO1xuICAgICAgZXhwZWN0KGhlYWRlcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rva2VuUGxheWdyb3VuZCDovrnnlYzmg4XlhrUnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWkhOeQhuepuuS7pOeJjOWvueixoScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuVmFsdWUoe30sICdjb2xvci5wcmltYXJ5Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5peg5pWI6Lev5b6EJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW5zID0geyAnY29sb3IucHJpbWFyeSc6ICcjZmYwMDAwJyB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0VG9rZW5WYWx1ZSh0b2tlbnMsICcnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbmt7HlsYLltYzlpZfot6/lvoQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbnMgPSB7XG4gICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgcHJpbWFyeToge1xuICAgICAgICAgICAgaGV4OiAnI2ZmMDAwMCcsXG4gICAgICAgICAgICBva2xjaDogJycsXG4gICAgICAgICAgICBmb3JlZ3JvdW5kOiAnI2ZmZicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRUb2tlblZhbHVlKHRva2VucywgJ2NvbG9yLnByaW1hcnkuaGV4Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcjZmYwMDAwJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5pWw57uE5YC8JywgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW5zID0geyAnY29sb3IucHJpbWFyeSc6IFsnI2ZmMDAwMCcsICcjMDBmZjAwJ10gfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuVmFsdWUodG9rZW5zLCAnY29sb3IucHJpbWFyeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbJyNmZjAwMDAnLCAnIzAwZmYwMCddKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIZudWxs5YC8JywgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW5zID0geyAnY29sb3IucHJpbWFyeSc6IG51bGwgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRva2VuVmFsdWUodG9rZW5zLCAnY29sb3IucHJpbWFyeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rva2VuUGxheWdyb3VuZCDpopzoibLku6TniYwnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeivhuWIq+minOiJsuS7pOeJjCcsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhUaGVtZSg8VG9rZW5QbGF5Z3JvdW5kIC8+KTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb2xvciBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pi+56S66aKc6Imy6aKE6KeI6IOM5pmvJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFRoZW1lKDxUb2tlblBsYXlncm91bmQgLz4pO1xuICAgICAgY29uc3QgY29sb3JQcmV2aWV3ID0gc2NyZWVuLmdldEJ5VGV4dCgvQ29sb3IgUHJldmlldy9pKTtcbiAgICAgIGV4cGVjdChjb2xvclByZXZpZXcpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb2tlblBsYXlncm91bmQg6byg5qCH5Lqk5LqSJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xlk43lupTpvKDmoIfmgqzlgZwnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyV2l0aFRoZW1lKDxUb2tlblBsYXlncm91bmQgLz4pO1xuICAgICAgY29uc3QgdG9rZW5JdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbc3R5bGUqPVwiY3Vyc29yOiBwb2ludGVyXCJdJyk7XG4gICAgICBpZiAodG9rZW5JdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0VG9rZW4gPSB0b2tlbkl0ZW1zWzBdIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIGZpcmVFdmVudC5tb3VzZUVudGVyKGZpcnN0VG9rZW4pO1xuICAgICAgICBleHBlY3QoZmlyc3RUb2tlbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLm5vdC50b0JlKCd0cmFuc3BhcmVudCcpO1xuXG4gICAgICAgIGZpcmVFdmVudC5tb3VzZUxlYXZlKGZpcnN0VG9rZW4pO1xuICAgICAgICBleHBlY3QoZmlyc3RUb2tlbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmUoJ3RyYW5zcGFyZW50Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb2tlblBsYXlncm91bmQg5ZON5bqU5byP5biD5bGAJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xkvb/nlKjnvZHmoLzluIPlsYAnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyV2l0aFRoZW1lKDxUb2tlblBsYXlncm91bmQgLz4pO1xuICAgICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbc3R5bGUqPVwiZGlzcGxheTogZ3JpZFwiXScpO1xuICAgICAgZXhwZWN0KGdyaWRDb250YWluZXIpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pyJ5qCH6aKYJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFRoZW1lKDxUb2tlblBsYXlncm91bmQgLz4pO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL1Rva2VuIFBsYXlncm91bmQvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pyJ5Luk54mM5YiX6KGoJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFRoZW1lKDxUb2tlblBsYXlncm91bmQgLz4pO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ2NvbG9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=