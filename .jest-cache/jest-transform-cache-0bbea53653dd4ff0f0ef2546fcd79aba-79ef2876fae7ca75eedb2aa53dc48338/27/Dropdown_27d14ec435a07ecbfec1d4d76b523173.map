{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/components/Dropdown.tsx","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/components/Dropdown.tsx"],"sourcesContent":["/**\n * @file 下拉菜单组件\n * @description 下拉菜单组件，支持键盘导航和多级菜单\n * @component Dropdown\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-23\n * @updated 2026-02-23\n * @copyright Copyright (c) 2026 YYC³\n * @license MIT\n */\n\nimport { memo, useState, useRef, useEffect, useCallback, ReactNode, ReactElement } from 'react';\nimport { useTheme } from '../theme/ThemeProvider';\n\nexport interface DropdownOption {\n  key: string;\n  label: ReactNode;\n  icon?: ReactNode;\n  disabled?: boolean;\n  divider?: boolean;\n  children?: DropdownOption[];\n  onClick?: () => void;\n}\n\nexport interface DropdownProps {\n  trigger?: 'click' | 'hover';\n  placement?: 'bottomLeft' | 'bottomCenter' | 'bottomRight' | 'topLeft' | 'topCenter' | 'topRight';\n  options: DropdownOption[];\n  children: ReactElement;\n  disabled?: boolean;\n  visible?: boolean;\n  onVisibleChange?: (visible: boolean) => void;\n  className?: string;\n  'data-testid'?: string;\n}\n\nexport const Dropdown = memo<DropdownProps>(\n  ({\n    trigger = 'click',\n    placement = 'bottomLeft',\n    options,\n    children,\n    disabled = false,\n    visible: controlledVisible,\n    onVisibleChange,\n    className = '',\n    'data-testid': dataTestId,\n  }) => {\n    const { tokens } = useTheme();\n    const [internalVisible, setInternalVisible] = useState(false);\n    const [activeKey, setActiveKey] = useState<string | null>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    const visible = controlledVisible !== undefined ? controlledVisible : internalVisible;\n\n    const handleVisibleChange = useCallback(\n      (newVisible: boolean) => {\n        if (disabled) return;\n        setInternalVisible(newVisible);\n        onVisibleChange?.(newVisible);\n      },\n      [disabled, onVisibleChange]\n    );\n\n    const handleClick = useCallback(() => {\n      if (trigger === 'click') {\n        handleVisibleChange(!visible);\n      }\n    }, [trigger, visible, handleVisibleChange]);\n\n    const handleMouseEnter = useCallback(() => {\n      if (trigger === 'hover') {\n        handleVisibleChange(true);\n      }\n    }, [trigger, handleVisibleChange]);\n\n    const handleMouseLeave = useCallback(() => {\n      if (trigger === 'hover') {\n        handleVisibleChange(false);\n      }\n    }, [trigger, handleVisibleChange]);\n\n    const handleOptionClick = useCallback(\n      (option: DropdownOption) => {\n        if (option.disabled) return;\n        option.onClick?.();\n        handleVisibleChange(false);\n      },\n      [handleVisibleChange]\n    );\n\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent) => {\n        if (!visible || disabled) return;\n\n        const enabledOptions = options.filter((opt) => !opt.disabled);\n        const currentIndex = enabledOptions.findIndex((opt) => opt.key === activeKey);\n\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            const nextIndex = currentIndex < enabledOptions.length - 1 ? currentIndex + 1 : 0;\n            setActiveKey(enabledOptions[nextIndex].key);\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            const prevIndex = currentIndex > 0 ? currentIndex - 1 : enabledOptions.length - 1;\n            setActiveKey(enabledOptions[prevIndex].key);\n            break;\n          case 'Enter':\n          case ' ':\n            e.preventDefault();\n            if (activeKey) {\n              const option = options.find((opt) => opt.key === activeKey);\n              if (option) {\n                handleOptionClick(option);\n              }\n            }\n            break;\n          case 'Escape':\n            e.preventDefault();\n            handleVisibleChange(false);\n            break;\n        }\n      },\n      [visible, disabled, options, activeKey, handleOptionClick, handleVisibleChange]\n    );\n\n    useEffect(() => {\n      const handleClickOutside = (event: MouseEvent) => {\n        if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n          handleVisibleChange(false);\n        }\n      };\n\n      if (visible) {\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => {\n          document.removeEventListener('mousedown', handleClickOutside);\n        };\n      }\n    }, [visible, handleVisibleChange]);\n\n    useEffect(() => {\n      if (visible) {\n        const firstEnabledOption = options.find((opt) => !opt.disabled);\n        if (firstEnabledOption) {\n          setActiveKey(firstEnabledOption.key);\n        }\n      } else {\n        setActiveKey(null);\n      }\n    }, [visible, options]);\n\n    const getPlacementStyles = (): React.CSSProperties => {\n      const baseStyles: React.CSSProperties = {\n        position: 'absolute',\n        zIndex: 1000,\n        minWidth: '160px',\n        maxHeight: '300px',\n        overflowY: 'auto',\n      };\n\n      switch (placement) {\n        case 'bottomLeft':\n          return { ...baseStyles, top: '100%', left: 0, marginTop: '4px' };\n        case 'bottomCenter':\n          return {\n            ...baseStyles,\n            top: '100%',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            marginTop: '4px',\n          };\n        case 'bottomRight':\n          return { ...baseStyles, top: '100%', right: 0, marginTop: '4px' };\n        case 'topLeft':\n          return { ...baseStyles, bottom: '100%', left: 0, marginBottom: '4px' };\n        case 'topCenter':\n          return {\n            ...baseStyles,\n            bottom: '100%',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            marginBottom: '4px',\n          };\n        case 'topRight':\n          return { ...baseStyles, bottom: '100%', right: 0, marginBottom: '4px' };\n        default:\n          return baseStyles;\n      }\n    };\n\n    const containerStyles: React.CSSProperties = {\n      position: 'relative',\n      display: 'inline-block',\n    };\n\n    const dropdownStyles: React.CSSProperties = {\n      ...getPlacementStyles(),\n      backgroundColor: (tokens['color.background'] as string) || '#fff',\n      border: `1px solid ${(tokens['color.border'] as string) || '#e0e0e0'}`,\n      borderRadius: '4px',\n      boxShadow: `0 2px 8px rgba(0, 0, 0, 0.1)`,\n      padding: '4px 0',\n      opacity: visible ? 1 : 0,\n      visibility: visible ? 'visible' : 'hidden',\n      transition: 'opacity 0.2s, visibility 0.2s',\n    };\n\n    const optionStyles: React.CSSProperties = {\n      padding: '8px 12px',\n      display: 'flex',\n      alignItems: 'center',\n      gap: '8px',\n      cursor: 'pointer',\n      transition: 'background-color 0.2s',\n      fontSize: '14px',\n      color: (tokens['color.text.primary'] as string) || '#333',\n    };\n\n    const optionHoverStyles: React.CSSProperties = {\n      ...optionStyles,\n      backgroundColor: (tokens['color.hover'] as string) || '#f5f5f5',\n    };\n\n    const activeOptionStyles: React.CSSProperties = {\n      ...optionStyles,\n      backgroundColor: (tokens['color.primary.light'] as string) || '#f0f0f0',\n    };\n\n    const disabledOptionStyles: React.CSSProperties = {\n      ...optionStyles,\n      opacity: 0.5,\n      cursor: 'not-allowed',\n    };\n\n    const dividerStyles: React.CSSProperties = {\n      height: '1px',\n      backgroundColor: (tokens['color.border'] as string) || '#e0e0e0',\n      margin: '4px 0',\n    };\n\n    const iconStyles: React.CSSProperties = {\n      fontSize: '16px',\n      color: (tokens['color.text.secondary'] as string) || '#666',\n    };\n\n    const arrowStyles: React.CSSProperties = {\n      marginLeft: 'auto',\n      fontSize: '12px',\n      color: (tokens['color.text.disabled'] as string) || '#999',\n    };\n\n    const renderOption = (option: DropdownOption, level = 0): ReactNode => {\n      const isActive = option.key === activeKey;\n      const hasChildren = option.children && option.children.length > 0;\n\n      return (\n        <div key={option.key}>\n          {option.divider ? (\n            <div style={dividerStyles} />\n          ) : (\n            <div\n              style={{\n                ...(option.disabled\n                  ? disabledOptionStyles\n                  : isActive\n                    ? activeOptionStyles\n                    : optionStyles),\n                paddingLeft: `${12 + level * 16}px`,\n              }}\n              onClick={() => handleOptionClick(option)}\n              onMouseEnter={() => !option.disabled && setActiveKey(option.key)}\n              onMouseLeave={() => !option.disabled && setActiveKey(null)}\n              role=\"menuitem\"\n              tabIndex={-1}\n              aria-disabled={option.disabled}\n            >\n              {option.icon && <span style={iconStyles}>{option.icon}</span>}\n              <span>{option.label}</span>\n              {hasChildren && <span style={arrowStyles}>›</span>}\n            </div>\n          )}\n          {hasChildren && (\n            <div>{option.children?.map((child) => renderOption(child, level + 1))}</div>\n          )}\n        </div>\n      );\n    };\n\n    return (\n      <div\n        ref={containerRef}\n        className={className}\n        style={containerStyles}\n        data-testid={dataTestId}\n        onClick={handleClick}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        role=\"button\"\n        aria-haspopup=\"true\"\n        aria-expanded={visible}\n      >\n        {children}\n        {visible && (\n          <div ref={dropdownRef} style={dropdownStyles} role=\"menu\" aria-label=\"Dropdown menu\">\n            {options.map((option) => renderOption(option))}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nDropdown.displayName = 'Dropdown';\n"],"version":3}