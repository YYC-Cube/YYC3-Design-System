93b712a04b996fe593a70cdacc597b64
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
const Radio_1 = require("./Radio");
const ThemeProvider_1 = require("../theme/ThemeProvider");
describe('Radio 组件', () => {
    const renderWithTheme = (component) => {
        return (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: component }));
    };
    it('应该正确渲染未选中的 Radio', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test" }));
        const radio = dom_1.screen.getByRole('radio');
        expect(radio).toBeInTheDocument();
        expect(radio).not.toBeChecked();
    });
    it('应该正确渲染选中的 Radio', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", checked: true }));
        const radio = dom_1.screen.getByRole('radio');
        expect(radio).toBeChecked();
    });
    it('应该在点击时调用 onChange', () => {
        const handleChange = jest.fn();
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", onChange: handleChange }));
        const radio = dom_1.screen.getByRole('radio');
        react_1.fireEvent.click(radio);
        expect(handleChange).toHaveBeenCalledWith('option1');
    });
    it('应该在禁用状态下不响应点击', () => {
        const handleChange = jest.fn();
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", disabled: true, onChange: handleChange }));
        const radio = dom_1.screen.getByRole('radio');
        expect(radio).toBeDisabled();
    });
    it('应该正确渲染子元素', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", children: "Option Label" }));
        expect(dom_1.screen.getByText('Option Label')).toBeInTheDocument();
    });
    it('应该在没有子元素时不渲染 label', () => {
        const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test" }));
        const radio = dom_1.screen.getByRole('radio');
        const label = container.querySelector('label > span:last-child');
        expect(label).not.toBeInTheDocument();
        expect(radio).toBeInTheDocument();
    });
    it('应该应用自定义 className', () => {
        const { container } = renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", className: "custom-class" }));
        const label = container.querySelector('.custom-class');
        expect(label).toBeInTheDocument();
    });
    it('应该正确设置 name 属性', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test-name" }));
        const radio = dom_1.screen.getByRole('radio');
        expect(radio).toHaveAttribute('name', 'test-name');
    });
    it('应该正确设置 value 属性', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "test-value", name: "test" }));
        const radio = dom_1.screen.getByRole('radio');
        expect(radio).toHaveAttribute('value', 'test-value');
    });
    it('应该在禁用时设置正确的属性', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", disabled: true }));
        const radio = dom_1.screen.getByRole('radio');
        expect(radio).toBeDisabled();
    });
    it('应该在选中时显示内部圆点', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", checked: true }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        const dot = radioContainer?.querySelector('span');
        expect(dot).toBeInTheDocument();
        expect(dot).toHaveStyle({ display: 'block' });
    });
    it('应该在未选中时隐藏内部圆点', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", checked: false }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        const dot = radioContainer?.querySelector('span');
        expect(dot).toBeInTheDocument();
        expect(dot).toHaveStyle({ display: 'none' });
    });
    it('应该在禁用时应用正确的样式', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", disabled: true }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        expect(radioContainer).toHaveStyle({
            cursor: 'not-allowed',
            opacity: 0.5,
        });
    });
    it('应该在未禁用时应用正确的样式', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test" }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        expect(radioContainer).toHaveStyle({
            cursor: 'pointer',
            opacity: 1,
        });
    });
    it('应该在点击标签时触发 radio 的 change', () => {
        const handleChange = jest.fn();
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", onChange: handleChange, children: "Option Label" }));
        const label = dom_1.screen.getByText('Option Label');
        react_1.fireEvent.click(label);
        expect(handleChange).toHaveBeenCalledWith('option1');
    });
    it('应该在没有 value 时不调用 onChange', () => {
        const handleChange = jest.fn();
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { name: "test", onChange: handleChange }));
        const radio = dom_1.screen.getByRole('radio');
        react_1.fireEvent.click(radio);
        expect(handleChange).not.toHaveBeenCalled();
    });
    it('应该正确处理多个 Radio 组件', () => {
        renderWithTheme((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", checked: true, children: "Option 1" }), (0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option2", name: "test", children: "Option 2" }), (0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option3", name: "test", children: "Option 3" })] }));
        expect(dom_1.screen.getByText('Option 1')).toBeInTheDocument();
        expect(dom_1.screen.getByText('Option 2')).toBeInTheDocument();
        expect(dom_1.screen.getByText('Option 3')).toBeInTheDocument();
    });
    it('应该在禁用时正确处理子元素样式', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", disabled: true, children: "Disabled Option" }));
        const label = dom_1.screen.getByText('Disabled Option');
        expect(label).toHaveStyle({
            cursor: 'not-allowed',
        });
    });
    it('应该在未禁用时正确处理子元素样式', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", children: "Enabled Option" }));
        const label = dom_1.screen.getByText('Enabled Option');
        expect(label).toHaveStyle({
            cursor: 'pointer',
        });
    });
    it('应该应用正确的边框样式', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test" }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        expect(radioContainer).toHaveStyle({
            borderRadius: '50%',
            border: '2px solid rgb(160, 160, 160)',
        });
    });
    it('应该在选中时应用正确的背景色', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", checked: true }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        expect(radioContainer).toHaveStyle({
            backgroundColor: 'rgb(224, 106, 112)',
        });
    });
    it('应该在未选中时应用透明背景', () => {
        renderWithTheme((0, jsx_runtime_1.jsx)(Radio_1.Radio, { value: "option1", name: "test", checked: false }));
        const radio = dom_1.screen.getByRole('radio');
        const container = radio.parentElement;
        const radioContainer = container?.querySelector('div');
        expect(radioContainer).not.toHaveStyle({
            backgroundColor: 'rgb(212, 90, 95)',
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvUmFkaW8udGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7O0FBVUEsa0RBQTJEO0FBQzNELDhDQUE4QztBQUU5QyxtQ0FBZ0M7QUFDaEMsMERBQXVEO0FBRXZELFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO0lBQ3hCLE1BQU0sZUFBZSxHQUFHLENBQUMsU0FBNkIsRUFBRSxFQUFFO1FBQ3hELE9BQU8sSUFBQSxjQUFNLEVBQUMsdUJBQUMsNkJBQWEsY0FBRSxTQUFTLEdBQWlCLENBQUMsQ0FBQztJQUM1RCxDQUFDLENBQUM7SUFFRixFQUFFLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO1FBQzFCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUV2RCxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQ3pCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLE9BQU8sU0FBRyxDQUFDLENBQUM7UUFFL0QsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQzNCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUMvQixlQUFlLENBQUMsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxRQUFRLEVBQUUsWUFBWSxHQUFJLENBQUMsQ0FBQztRQUUvRSxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLGlCQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRXZCLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN2RCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1FBQ3ZCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUMvQixlQUFlLENBQUMsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxRQUFRLFFBQUMsUUFBUSxFQUFFLFlBQVksR0FBSSxDQUFDLENBQUM7UUFFeEYsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtRQUNuQixlQUFlLENBQ2IsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sNkJBRTFCLENBQ1QsQ0FBQztRQUVGLE1BQU0sQ0FBQyxZQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMvRCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7UUFDNUIsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUU3RSxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUNqRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDdEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDcEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQzNCLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxlQUFlLENBQ25DLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLEVBQUMsU0FBUyxFQUFDLGNBQWMsR0FBRyxDQUMvRCxDQUFDO1FBRUYsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUN2RCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDeEIsZUFBZSxDQUFDLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRTVELE1BQU0sS0FBSyxHQUFHLFlBQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDckQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQ3pCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxJQUFJLEVBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUUxRCxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3ZELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDdkIsZUFBZSxDQUFDLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLEVBQUMsUUFBUSxTQUFHLENBQUMsQ0FBQztRQUVoRSxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUMvQixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1FBQ3RCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLE9BQU8sU0FBRyxDQUFDLENBQUM7UUFFL0QsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3RDLE1BQU0sY0FBYyxHQUFHLFNBQVMsRUFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkQsTUFBTSxHQUFHLEdBQUcsY0FBYyxFQUFFLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNoQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtRQUN2QixlQUFlLENBQUMsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxPQUFPLEVBQUUsS0FBSyxHQUFJLENBQUMsQ0FBQztRQUV2RSxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDdEMsTUFBTSxjQUFjLEdBQUcsU0FBUyxFQUFFLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2RCxNQUFNLEdBQUcsR0FBRyxjQUFjLEVBQUUsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xELE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUMvQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1FBQ3ZCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLFFBQVEsU0FBRyxDQUFDLENBQUM7UUFFaEUsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3RDLE1BQU0sY0FBYyxHQUFHLFNBQVMsRUFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztZQUNqQyxNQUFNLEVBQUUsYUFBYTtZQUNyQixPQUFPLEVBQUUsR0FBRztTQUNiLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtRQUN4QixlQUFlLENBQUMsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFFdkQsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3RDLE1BQU0sY0FBYyxHQUFHLFNBQVMsRUFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztZQUNqQyxNQUFNLEVBQUUsU0FBUztZQUNqQixPQUFPLEVBQUUsQ0FBQztTQUNYLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDL0IsZUFBZSxDQUNiLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLEVBQUMsUUFBUSxFQUFFLFlBQVksNkJBRWpELENBQ1QsQ0FBQztRQUVGLE1BQU0sS0FBSyxHQUFHLFlBQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDL0MsaUJBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdkIsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDL0IsZUFBZSxDQUFDLHVCQUFDLGFBQUssSUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLFFBQVEsRUFBRSxZQUFZLEdBQUksQ0FBQyxDQUFDO1FBRS9ELE1BQU0sS0FBSyxHQUFHLFlBQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDeEMsaUJBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdkIsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzlDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtRQUMzQixlQUFlLENBQ2IsNENBQ0UsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxPQUFPLCtCQUVsQyxFQUNSLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLHlCQUUxQixFQUNSLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLHlCQUUxQixJQUNKLENBQ1AsQ0FBQztRQUVGLE1BQU0sQ0FBQyxZQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN6RCxNQUFNLENBQUMsWUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDekQsTUFBTSxDQUFDLFlBQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzNELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtRQUN6QixlQUFlLENBQ2IsdUJBQUMsYUFBSyxJQUFDLEtBQUssRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxRQUFRLHNDQUVuQyxDQUNULENBQUM7UUFFRixNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDbEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQztZQUN4QixNQUFNLEVBQUUsYUFBYTtTQUN0QixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDMUIsZUFBZSxDQUNiLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLCtCQUUxQixDQUNULENBQUM7UUFFRixNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQztZQUN4QixNQUFNLEVBQUUsU0FBUztTQUNsQixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQ3JCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUV2RCxNQUFNLEtBQUssR0FBRyxZQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDdEMsTUFBTSxjQUFjLEdBQUcsU0FBUyxFQUFFLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2RCxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsV0FBVyxDQUFDO1lBQ2pDLFlBQVksRUFBRSxLQUFLO1lBQ25CLE1BQU0sRUFBRSw4QkFBOEI7U0FDdkMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQ3hCLGVBQWUsQ0FBQyx1QkFBQyxhQUFLLElBQUMsS0FBSyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLE9BQU8sU0FBRyxDQUFDLENBQUM7UUFFL0QsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3RDLE1BQU0sY0FBYyxHQUFHLFNBQVMsRUFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztZQUNqQyxlQUFlLEVBQUUsb0JBQW9CO1NBQ3RDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDdkIsZUFBZSxDQUFDLHVCQUFDLGFBQUssSUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFFLEtBQUssR0FBSSxDQUFDLENBQUM7UUFFdkUsTUFBTSxLQUFLLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3RDLE1BQU0sY0FBYyxHQUFHLFNBQVMsRUFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUM7WUFDckMsZUFBZSxFQUFFLGtCQUFrQjtTQUNwQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9jb21wb25lbnRzL1JhZGlvLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgUmFkaW8g57uE5Lu25rWL6K+VXG4gKiBAZGVzY3JpcHRpb24g5rWL6K+VIFJhZGlvIOe7hOS7tueahOWQhOmhueWKn+iDvVxuICogQG1vZHVsZSBfX3Rlc3RzX18vY29tcG9uZW50cy9SYWRpby50ZXN0XG4gKiBAYXV0aG9yIFlZQ8KzXG4gKiBAdmVyc2lvbiAxLjAuMFxuICogQGNyZWF0ZWQgMjAyNi0wMi0xOFxuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L2RvbSc7XG5cbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnLi9SYWRpbyc7XG5pbXBvcnQgeyBUaGVtZVByb3ZpZGVyIH0gZnJvbSAnLi4vdGhlbWUvVGhlbWVQcm92aWRlcic7XG5cbmRlc2NyaWJlKCdSYWRpbyDnu4Tku7YnLCAoKSA9PiB7XG4gIGNvbnN0IHJlbmRlcldpdGhUaGVtZSA9IChjb21wb25lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiByZW5kZXIoPFRoZW1lUHJvdmlkZXI+e2NvbXBvbmVudH08L1RoZW1lUHJvdmlkZXI+KTtcbiAgfTtcblxuICBpdCgn5bqU6K+l5q2j56Gu5riy5p+T5pyq6YCJ5Lit55qEIFJhZGlvJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhUaGVtZSg8UmFkaW8gdmFsdWU9XCJvcHRpb24xXCIgbmFtZT1cInRlc3RcIiAvPik7XG5cbiAgICBjb25zdCByYWRpbyA9IHNjcmVlbi5nZXRCeVJvbGUoJ3JhZGlvJyk7XG4gICAgZXhwZWN0KHJhZGlvKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChyYWRpbykubm90LnRvQmVDaGVja2VkKCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmraPnoa7muLLmn5PpgInkuK3nmoQgUmFkaW8nLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIGNoZWNrZWQgLz4pO1xuXG4gICAgY29uc3QgcmFkaW8gPSBzY3JlZW4uZ2V0QnlSb2xlKCdyYWRpbycpO1xuICAgIGV4cGVjdChyYWRpbykudG9CZUNoZWNrZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOeCueWHu+aXtuiwg+eUqCBvbkNoYW5nZScsICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IC8+KTtcblxuICAgIGNvbnN0IHJhZGlvID0gc2NyZWVuLmdldEJ5Um9sZSgncmFkaW8nKTtcbiAgICBmaXJlRXZlbnQuY2xpY2socmFkaW8pO1xuXG4gICAgZXhwZWN0KGhhbmRsZUNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ29wdGlvbjEnKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOemgeeUqOeKtuaAgeS4i+S4jeWTjeW6lOeCueWHuycsICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIGRpc2FibGVkIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IC8+KTtcblxuICAgIGNvbnN0IHJhZGlvID0gc2NyZWVuLmdldEJ5Um9sZSgncmFkaW8nKTtcbiAgICBleHBlY3QocmFkaW8pLnRvQmVEaXNhYmxlZCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5q2j56Gu5riy5p+T5a2Q5YWD57SgJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhUaGVtZShcbiAgICAgIDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiPlxuICAgICAgICBPcHRpb24gTGFiZWxcbiAgICAgIDwvUmFkaW8+XG4gICAgKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcHRpb24gTGFiZWwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOayoeacieWtkOWFg+e0oOaXtuS4jea4suafkyBsYWJlbCcsICgpID0+IHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIC8+KTtcblxuICAgIGNvbnN0IHJhZGlvID0gc2NyZWVuLmdldEJ5Um9sZSgncmFkaW8nKTtcbiAgICBjb25zdCBsYWJlbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdsYWJlbCA+IHNwYW46bGFzdC1jaGlsZCcpO1xuICAgIGV4cGVjdChsYWJlbCkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHJhZGlvKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5bqU55So6Ieq5a6a5LmJIGNsYXNzTmFtZScsICgpID0+IHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyV2l0aFRoZW1lKFxuICAgICAgPFJhZGlvIHZhbHVlPVwib3B0aW9uMVwiIG5hbWU9XCJ0ZXN0XCIgY2xhc3NOYW1lPVwiY3VzdG9tLWNsYXNzXCIgLz5cbiAgICApO1xuXG4gICAgY29uc3QgbGFiZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1c3RvbS1jbGFzcycpO1xuICAgIGV4cGVjdChsYWJlbCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeato+ehruiuvue9riBuYW1lIOWxnuaApycsICgpID0+IHtcbiAgICByZW5kZXJXaXRoVGhlbWUoPFJhZGlvIHZhbHVlPVwib3B0aW9uMVwiIG5hbWU9XCJ0ZXN0LW5hbWVcIiAvPik7XG5cbiAgICBjb25zdCByYWRpbyA9IHNjcmVlbi5nZXRCeVJvbGUoJ3JhZGlvJyk7XG4gICAgZXhwZWN0KHJhZGlvKS50b0hhdmVBdHRyaWJ1dGUoJ25hbWUnLCAndGVzdC1uYW1lJyk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmraPnoa7orr7nva4gdmFsdWUg5bGe5oCnJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhUaGVtZSg8UmFkaW8gdmFsdWU9XCJ0ZXN0LXZhbHVlXCIgbmFtZT1cInRlc3RcIiAvPik7XG5cbiAgICBjb25zdCByYWRpbyA9IHNjcmVlbi5nZXRCeVJvbGUoJ3JhZGlvJyk7XG4gICAgZXhwZWN0KHJhZGlvKS50b0hhdmVBdHRyaWJ1dGUoJ3ZhbHVlJywgJ3Rlc3QtdmFsdWUnKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOemgeeUqOaXtuiuvue9ruato+ehrueahOWxnuaApycsICgpID0+IHtcbiAgICByZW5kZXJXaXRoVGhlbWUoPFJhZGlvIHZhbHVlPVwib3B0aW9uMVwiIG5hbWU9XCJ0ZXN0XCIgZGlzYWJsZWQgLz4pO1xuXG4gICAgY29uc3QgcmFkaW8gPSBzY3JlZW4uZ2V0QnlSb2xlKCdyYWRpbycpO1xuICAgIGV4cGVjdChyYWRpbykudG9CZURpc2FibGVkKCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XlnKjpgInkuK3ml7bmmL7npLrlhoXpg6jlnIbngrknLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIGNoZWNrZWQgLz4pO1xuXG4gICAgY29uc3QgcmFkaW8gPSBzY3JlZW4uZ2V0QnlSb2xlKCdyYWRpbycpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhZGlvLnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcmFkaW9Db250YWluZXIgPSBjb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpO1xuICAgIGNvbnN0IGRvdCA9IHJhZGlvQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG4gICAgZXhwZWN0KGRvdCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QoZG90KS50b0hhdmVTdHlsZSh7IGRpc3BsYXk6ICdibG9jaycgfSk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XlnKjmnKrpgInkuK3ml7bpmpDol4/lhoXpg6jlnIbngrknLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIGNoZWNrZWQ9e2ZhbHNlfSAvPik7XG5cbiAgICBjb25zdCByYWRpbyA9IHNjcmVlbi5nZXRCeVJvbGUoJ3JhZGlvJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcmFkaW8ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCByYWRpb0NvbnRhaW5lciA9IGNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignZGl2Jyk7XG4gICAgY29uc3QgZG90ID0gcmFkaW9Db250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICBleHBlY3QoZG90KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChkb3QpLnRvSGF2ZVN0eWxlKHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5Zyo56aB55So5pe25bqU55So5q2j56Gu55qE5qC35byPJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhUaGVtZSg8UmFkaW8gdmFsdWU9XCJvcHRpb24xXCIgbmFtZT1cInRlc3RcIiBkaXNhYmxlZCAvPik7XG5cbiAgICBjb25zdCByYWRpbyA9IHNjcmVlbi5nZXRCeVJvbGUoJ3JhZGlvJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcmFkaW8ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCByYWRpb0NvbnRhaW5lciA9IGNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignZGl2Jyk7XG4gICAgZXhwZWN0KHJhZGlvQ29udGFpbmVyKS50b0hhdmVTdHlsZSh7XG4gICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICBvcGFjaXR5OiAwLjUsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XlnKjmnKrnpoHnlKjml7blupTnlKjmraPnoa7nmoTmoLflvI8nLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIC8+KTtcblxuICAgIGNvbnN0IHJhZGlvID0gc2NyZWVuLmdldEJ5Um9sZSgncmFkaW8nKTtcbiAgICBjb25zdCBjb250YWluZXIgPSByYWRpby5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHJhZGlvQ29udGFpbmVyID0gY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCdkaXYnKTtcbiAgICBleHBlY3QocmFkaW9Db250YWluZXIpLnRvSGF2ZVN0eWxlKHtcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgb3BhY2l0eTogMSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOeCueWHu+agh+etvuaXtuinpuWPkSByYWRpbyDnmoQgY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICByZW5kZXJXaXRoVGhlbWUoXG4gICAgICA8UmFkaW8gdmFsdWU9XCJvcHRpb24xXCIgbmFtZT1cInRlc3RcIiBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfT5cbiAgICAgICAgT3B0aW9uIExhYmVsXG4gICAgICA8L1JhZGlvPlxuICAgICk7XG5cbiAgICBjb25zdCBsYWJlbCA9IHNjcmVlbi5nZXRCeVRleHQoJ09wdGlvbiBMYWJlbCcpO1xuICAgIGZpcmVFdmVudC5jbGljayhsYWJlbCk7XG5cbiAgICBleHBlY3QoaGFuZGxlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnb3B0aW9uMScpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5Zyo5rKh5pyJIHZhbHVlIOaXtuS4jeiwg+eUqCBvbkNoYW5nZScsICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyBuYW1lPVwidGVzdFwiIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IC8+KTtcblxuICAgIGNvbnN0IHJhZGlvID0gc2NyZWVuLmdldEJ5Um9sZSgncmFkaW8nKTtcbiAgICBmaXJlRXZlbnQuY2xpY2socmFkaW8pO1xuXG4gICAgZXhwZWN0KGhhbmRsZUNoYW5nZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeato+ehruWkhOeQhuWkmuS4qiBSYWRpbyDnu4Tku7YnLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKFxuICAgICAgPGRpdj5cbiAgICAgICAgPFJhZGlvIHZhbHVlPVwib3B0aW9uMVwiIG5hbWU9XCJ0ZXN0XCIgY2hlY2tlZD5cbiAgICAgICAgICBPcHRpb24gMVxuICAgICAgICA8L1JhZGlvPlxuICAgICAgICA8UmFkaW8gdmFsdWU9XCJvcHRpb24yXCIgbmFtZT1cInRlc3RcIj5cbiAgICAgICAgICBPcHRpb24gMlxuICAgICAgICA8L1JhZGlvPlxuICAgICAgICA8UmFkaW8gdmFsdWU9XCJvcHRpb24zXCIgbmFtZT1cInRlc3RcIj5cbiAgICAgICAgICBPcHRpb24gM1xuICAgICAgICA8L1JhZGlvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcHRpb24gMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcHRpb24gMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcHRpb24gMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5Zyo56aB55So5pe25q2j56Gu5aSE55CG5a2Q5YWD57Sg5qC35byPJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhUaGVtZShcbiAgICAgIDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIGRpc2FibGVkPlxuICAgICAgICBEaXNhYmxlZCBPcHRpb25cbiAgICAgIDwvUmFkaW8+XG4gICAgKTtcblxuICAgIGNvbnN0IGxhYmVsID0gc2NyZWVuLmdldEJ5VGV4dCgnRGlzYWJsZWQgT3B0aW9uJyk7XG4gICAgZXhwZWN0KGxhYmVsKS50b0hhdmVTdHlsZSh7XG4gICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XlnKjmnKrnpoHnlKjml7bmraPnoa7lpITnkIblrZDlhYPntKDmoLflvI8nLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKFxuICAgICAgPFJhZGlvIHZhbHVlPVwib3B0aW9uMVwiIG5hbWU9XCJ0ZXN0XCI+XG4gICAgICAgIEVuYWJsZWQgT3B0aW9uXG4gICAgICA8L1JhZGlvPlxuICAgICk7XG5cbiAgICBjb25zdCBsYWJlbCA9IHNjcmVlbi5nZXRCeVRleHQoJ0VuYWJsZWQgT3B0aW9uJyk7XG4gICAgZXhwZWN0KGxhYmVsKS50b0hhdmVTdHlsZSh7XG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeW6lOeUqOato+ehrueahOi+ueahhuagt+W8jycsICgpID0+IHtcbiAgICByZW5kZXJXaXRoVGhlbWUoPFJhZGlvIHZhbHVlPVwib3B0aW9uMVwiIG5hbWU9XCJ0ZXN0XCIgLz4pO1xuXG4gICAgY29uc3QgcmFkaW8gPSBzY3JlZW4uZ2V0QnlSb2xlKCdyYWRpbycpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhZGlvLnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcmFkaW9Db250YWluZXIgPSBjb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpO1xuICAgIGV4cGVjdChyYWRpb0NvbnRhaW5lcikudG9IYXZlU3R5bGUoe1xuICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICAgIGJvcmRlcjogJzJweCBzb2xpZCByZ2IoMTYwLCAxNjAsIDE2MCknLFxuICAgIH0pO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5Zyo6YCJ5Lit5pe25bqU55So5q2j56Gu55qE6IOM5pmv6ImyJywgKCkgPT4ge1xuICAgIHJlbmRlcldpdGhUaGVtZSg8UmFkaW8gdmFsdWU9XCJvcHRpb24xXCIgbmFtZT1cInRlc3RcIiBjaGVja2VkIC8+KTtcblxuICAgIGNvbnN0IHJhZGlvID0gc2NyZWVuLmdldEJ5Um9sZSgncmFkaW8nKTtcbiAgICBjb25zdCBjb250YWluZXIgPSByYWRpby5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHJhZGlvQ29udGFpbmVyID0gY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCdkaXYnKTtcbiAgICBleHBlY3QocmFkaW9Db250YWluZXIpLnRvSGF2ZVN0eWxlKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYigyMjQsIDEwNiwgMTEyKScsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XlnKjmnKrpgInkuK3ml7blupTnlKjpgI/mmI7og4zmma8nLCAoKSA9PiB7XG4gICAgcmVuZGVyV2l0aFRoZW1lKDxSYWRpbyB2YWx1ZT1cIm9wdGlvbjFcIiBuYW1lPVwidGVzdFwiIGNoZWNrZWQ9e2ZhbHNlfSAvPik7XG5cbiAgICBjb25zdCByYWRpbyA9IHNjcmVlbi5nZXRCeVJvbGUoJ3JhZGlvJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcmFkaW8ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCByYWRpb0NvbnRhaW5lciA9IGNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignZGl2Jyk7XG4gICAgZXhwZWN0KHJhZGlvQ29udGFpbmVyKS5ub3QudG9IYXZlU3R5bGUoe1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiKDIxMiwgOTAsIDk1KScsXG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=