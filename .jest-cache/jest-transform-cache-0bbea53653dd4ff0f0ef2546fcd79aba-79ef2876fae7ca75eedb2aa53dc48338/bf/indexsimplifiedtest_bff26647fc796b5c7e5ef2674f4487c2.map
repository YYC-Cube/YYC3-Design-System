{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/resource-optimization/__tests__/index-simplified.test.ts","mappings":";AAAA;;;;;;;GAOG;;AAEH,qEAGuC;AAEvC,+DAIoC;AAEpC,8DAK+B;AAE/B,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;IAC3B,UAAU,CAAC,GAAG,EAAE;QACd,IAAA,mCAAe,GAAE,CAAC;QAClB,IAAA,+BAAc,GAAE,CAAC;QACjB,IAAA,sCAAiB,GAAE,CAAC;IACtB,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE;QACvB,EAAE,CAAC,4BAA4B,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,OAAO,GAAG,+BAA+B,CAAC;YAEhD,MAAM,MAAM,CAAC,IAAA,oCAAgB,EAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QACjE,CAAC,EAAE,KAAK,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE;QACvB,EAAE,CAAC,uBAAuB,EAAE,KAAK,IAAI,EAAE;YACrC,MAAM,QAAQ,GAAG;gBACf,UAAU,EAAE,WAAW;gBACvB,OAAO,EAAE,gCAAgC;aAC1C,CAAC;YAEF,MAAM,MAAM,CAAC,IAAA,4BAAW,EAAC,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QAC1F,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kBAAkB,EAAE,GAAG,EAAE;YAC1B,MAAM,KAAK,GAAG,IAAA,sCAAqB,GAAE,CAAC;YACtC,MAAM,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;YAC5B,MAAM,CAAC,KAAK,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,YAAY,EAAE,GAAG,EAAE;YACpB,IAAA,+BAAc,GAAE,CAAC;YACjB,MAAM,KAAK,GAAG,IAAA,sCAAqB,GAAE,CAAC;YACtC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE;QACvB,EAAE,CAAC,2BAA2B,EAAE,GAAG,EAAE;YACnC,MAAM,OAAO,GAAG,+BAA+B,CAAC;YAEhD,MAAM,CAAC,GAAG,EAAE,CAAC,IAAA,oCAAe,EAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QACjE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kBAAkB,EAAE,GAAG,EAAE;YAC1B,MAAM,KAAK,GAAG,IAAA,8CAAyB,GAAE,CAAC;YAC1C,MAAM,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;YAC5B,MAAM,CAAC,KAAK,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,cAAc,EAAE,GAAG,EAAE;YACtB,IAAA,sCAAiB,GAAE,CAAC;YACpB,MAAM,KAAK,GAAG,IAAA,8CAAyB,GAAE,CAAC;YAC1C,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,aAAa,EAAE,GAAG,EAAE;YACrB,MAAM,KAAK,GAAG,IAAA,yCAAoB,GAAE,CAAC;YACrC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;QAC3B,EAAE,CAAC,iBAAiB,EAAE,KAAK,IAAI,EAAE;YAC/B,MAAM,OAAO,GAAG,4LAA4L,CAAC;YAE7M,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;YAChC,MAAM,IAAA,oCAAgB,EAAC,OAAO,CAAC,CAAC;YAChC,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;YAE9B,MAAM,QAAQ,GAAG,GAAG,GAAG,KAAK,CAAC;YAC7B,MAAM,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,EAAE,KAAK,CAAC,CAAC;QAEV,EAAE,CAAC,iBAAiB,EAAE,KAAK,IAAI,EAAE;YAC/B,MAAM,QAAQ,GAAG;gBACf,UAAU,EAAE,WAAW;gBACvB,OAAO,EAAE,yBAAyB;aACnC,CAAC;YAEF,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;YAChC,MAAM,IAAA,4BAAW,EAAC,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;YACzD,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;YAE9B,MAAM,QAAQ,GAAG,GAAG,GAAG,KAAK,CAAC;YAC7B,MAAM,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,EAAE,KAAK,CAAC,CAAC;QAEV,EAAE,CAAC,iBAAiB,EAAE,GAAG,EAAE;YACzB,MAAM,OAAO,GAAG,+BAA+B,CAAC;YAEhD,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;YAChC,IAAA,oCAAe,EAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YACnC,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;YAE9B,MAAM,QAAQ,GAAG,GAAG,GAAG,KAAK,CAAC;YAC7B,MAAM,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,EAAE,KAAK,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/resource-optimization/__tests__/index-simplified.test.ts"],"sourcesContent":["/**\n * @file 资源优化测试（简化版）\n * @description 测试资源优化相关的工具函数（简化版本，避免复杂 Mock）\n * @module __tests__/resource-optimization-simplified.test\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-28\n */\n\nimport {\n  preloadLazyImage,\n  clearImageCache,\n} from '../../utils/image-lazy-loader';\n\nimport {\n  preloadFont,\n  clearFontCache,\n  getFontPreloaderStats,\n} from '../../utils/font-preloader';\n\nimport {\n  preloadResource,\n  clearAllResources,\n  getResourcePreloaderStats,\n  generatePreloadHints,\n} from '../resource-preloader';\n\ndescribe('资源优化测试（简化版）', () => {\n  beforeEach(() => {\n    clearImageCache();\n    clearFontCache();\n    clearAllResources();\n  });\n\n  describe('图片预加载测试', () => {\n    it('应该能够调用 preloadLazyImage 函数', async () => {\n      const mockSrc = 'https://example.com/image.jpg';\n      \n      await expect(preloadLazyImage(mockSrc)).resolves.not.toThrow();\n    }, 10000);\n  });\n\n  describe('字体预加载测试', () => {\n    it('应该能够调用 preloadFont 函数', async () => {\n      const mockFont = {\n        fontFamily: 'Test Font',\n        fontSrc: 'https://example.com/font.woff2',\n      };\n\n      await expect(preloadFont(mockFont.fontFamily, mockFont.fontSrc)).resolves.not.toThrow();\n    });\n\n    it('应该能够获取字体预加载器统计信息', () => {\n      const stats = getFontPreloaderStats();\n      expect(stats).toBeDefined();\n      expect(stats).toHaveProperty('cacheSize');\n    });\n\n    it('应该能够清空字体缓存', () => {\n      clearFontCache();\n      const stats = getFontPreloaderStats();\n      expect(stats.cacheSize).toBe(0);\n    });\n  });\n\n  describe('资源预加载测试', () => {\n    it('应该能够调用 preloadResource 函数', () => {\n      const mockUrl = 'https://example.com/script.js';\n      \n      expect(() => preloadResource(mockUrl, 'script')).not.toThrow();\n    });\n\n    it('应该能够获取资源预加载器统计信息', () => {\n      const stats = getResourcePreloaderStats();\n      expect(stats).toBeDefined();\n      expect(stats).toHaveProperty('count');\n    });\n\n    it('应该能够清空所有资源缓存', () => {\n      clearAllResources();\n      const stats = getResourcePreloaderStats();\n      expect(stats.count).toBe(0);\n    });\n\n    it('应该能够生成预加载提示', () => {\n      const hints = generatePreloadHints();\n      expect(Array.isArray(hints)).toBe(true);\n    });\n  });\n\n  describe('性能基准测试（简化版）', () => {\n    it('应该能够在合理时间内预加载图片', async () => {\n      const mockSrc = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PC9zdmc+';\n      \n      const start = performance.now();\n      await preloadLazyImage(mockSrc);\n      const end = performance.now();\n      \n      const loadTime = end - start;\n      expect(loadTime).toBeLessThan(5000);\n    }, 10000);\n\n    it('应该能够在合理时间内预加载字体', async () => {\n      const mockFont = {\n        fontFamily: 'Test Font',\n        fontSrc: 'data:font/woff2;base64,',\n      };\n\n      const start = performance.now();\n      await preloadFont(mockFont.fontFamily, mockFont.fontSrc);\n      const end = performance.now();\n      \n      const loadTime = end - start;\n      expect(loadTime).toBeLessThan(5000);\n    }, 10000);\n\n    it('应该能够在合理时间内预加载资源', () => {\n      const mockUrl = 'https://example.com/script.js';\n\n      const start = performance.now();\n      preloadResource(mockUrl, 'script');\n      const end = performance.now();\n      \n      const loadTime = end - start;\n      expect(loadTime).toBeLessThan(5000);\n    }, 10000);\n  });\n});\n"],"version":3}