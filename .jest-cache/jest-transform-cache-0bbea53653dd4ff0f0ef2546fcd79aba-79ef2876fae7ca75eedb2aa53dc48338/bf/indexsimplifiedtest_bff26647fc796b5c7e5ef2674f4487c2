14e3d6f096f25058f5c3528e53bb0c5c
"use strict";
/**
 * @file 资源优化测试（简化版）
 * @description 测试资源优化相关的工具函数（简化版本，避免复杂 Mock）
 * @module __tests__/resource-optimization-simplified.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-28
 */
Object.defineProperty(exports, "__esModule", { value: true });
const image_lazy_loader_1 = require("../../utils/image-lazy-loader");
const font_preloader_1 = require("../../utils/font-preloader");
const resource_preloader_1 = require("../resource-preloader");
describe('资源优化测试（简化版）', () => {
    beforeEach(() => {
        (0, image_lazy_loader_1.clearImageCache)();
        (0, font_preloader_1.clearFontCache)();
        (0, resource_preloader_1.clearAllResources)();
    });
    describe('图片预加载测试', () => {
        it('应该能够调用 preloadLazyImage 函数', async () => {
            const mockSrc = 'https://example.com/image.jpg';
            await expect((0, image_lazy_loader_1.preloadLazyImage)(mockSrc)).resolves.not.toThrow();
        }, 10000);
    });
    describe('字体预加载测试', () => {
        it('应该能够调用 preloadFont 函数', async () => {
            const mockFont = {
                fontFamily: 'Test Font',
                fontSrc: 'https://example.com/font.woff2',
            };
            await expect((0, font_preloader_1.preloadFont)(mockFont.fontFamily, mockFont.fontSrc)).resolves.not.toThrow();
        });
        it('应该能够获取字体预加载器统计信息', () => {
            const stats = (0, font_preloader_1.getFontPreloaderStats)();
            expect(stats).toBeDefined();
            expect(stats).toHaveProperty('cacheSize');
        });
        it('应该能够清空字体缓存', () => {
            (0, font_preloader_1.clearFontCache)();
            const stats = (0, font_preloader_1.getFontPreloaderStats)();
            expect(stats.cacheSize).toBe(0);
        });
    });
    describe('资源预加载测试', () => {
        it('应该能够调用 preloadResource 函数', () => {
            const mockUrl = 'https://example.com/script.js';
            expect(() => (0, resource_preloader_1.preloadResource)(mockUrl, 'script')).not.toThrow();
        });
        it('应该能够获取资源预加载器统计信息', () => {
            const stats = (0, resource_preloader_1.getResourcePreloaderStats)();
            expect(stats).toBeDefined();
            expect(stats).toHaveProperty('count');
        });
        it('应该能够清空所有资源缓存', () => {
            (0, resource_preloader_1.clearAllResources)();
            const stats = (0, resource_preloader_1.getResourcePreloaderStats)();
            expect(stats.count).toBe(0);
        });
        it('应该能够生成预加载提示', () => {
            const hints = (0, resource_preloader_1.generatePreloadHints)();
            expect(Array.isArray(hints)).toBe(true);
        });
    });
    describe('性能基准测试（简化版）', () => {
        it('应该能够在合理时间内预加载图片', async () => {
            const mockSrc = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PC9zdmc+';
            const start = performance.now();
            await (0, image_lazy_loader_1.preloadLazyImage)(mockSrc);
            const end = performance.now();
            const loadTime = end - start;
            expect(loadTime).toBeLessThan(5000);
        }, 10000);
        it('应该能够在合理时间内预加载字体', async () => {
            const mockFont = {
                fontFamily: 'Test Font',
                fontSrc: 'data:font/woff2;base64,',
            };
            const start = performance.now();
            await (0, font_preloader_1.preloadFont)(mockFont.fontFamily, mockFont.fontSrc);
            const end = performance.now();
            const loadTime = end - start;
            expect(loadTime).toBeLessThan(5000);
        }, 10000);
        it('应该能够在合理时间内预加载资源', () => {
            const mockUrl = 'https://example.com/script.js';
            const start = performance.now();
            (0, resource_preloader_1.preloadResource)(mockUrl, 'script');
            const end = performance.now();
            const loadTime = end - start;
            expect(loadTime).toBeLessThan(5000);
        }, 10000);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3Jlc291cmNlLW9wdGltaXphdGlvbi9fX3Rlc3RzX18vaW5kZXgtc2ltcGxpZmllZC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztHQU9HOztBQUVILHFFQUd1QztBQUV2QywrREFJb0M7QUFFcEMsOERBSytCO0FBRS9CLFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO0lBQzNCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFBLG1DQUFlLEdBQUUsQ0FBQztRQUNsQixJQUFBLCtCQUFjLEdBQUUsQ0FBQztRQUNqQixJQUFBLHNDQUFpQixHQUFFLENBQUM7SUFDdEIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUN2QixFQUFFLENBQUMsNEJBQTRCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDMUMsTUFBTSxPQUFPLEdBQUcsK0JBQStCLENBQUM7WUFFaEQsTUFBTSxNQUFNLENBQUMsSUFBQSxvQ0FBZ0IsRUFBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ1osQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUN2QixFQUFFLENBQUMsdUJBQXVCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDckMsTUFBTSxRQUFRLEdBQUc7Z0JBQ2YsVUFBVSxFQUFFLFdBQVc7Z0JBQ3ZCLE9BQU8sRUFBRSxnQ0FBZ0M7YUFDMUMsQ0FBQztZQUVGLE1BQU0sTUFBTSxDQUFDLElBQUEsNEJBQVcsRUFBQyxRQUFRLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDMUYsQ0FBQyxDQUFDLENBQUM7UUFF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QyxRQUFRLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN6RCxNQUFNLEdBQUcsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFFOUIsTUFBTSxRQUFRLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQztZQUM3QixNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUVWLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7WUFDekIsTUFBTSxPQUFPLEdBQUcsK0JBQStCLENBQUM7WUFFaEQsTUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ2hDLElBQUEsb0NBQWUsRUFBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDbkMsTUFBTSxHQUFHLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBRTlCLE1BQU0sUUFBUSxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUM7WUFDN0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDWixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9yZXNvdXJjZS1vcHRpbWl6YXRpb24vX190ZXN0c19fL2luZGV4LXNpbXBsaWZpZWQudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIOi1hOa6kOS8mOWMlua1i+ivle+8iOeugOWMlueJiO+8iVxuICogQGRlc2NyaXB0aW9uIOa1i+ivlei1hOa6kOS8mOWMluebuOWFs+eahOW3peWFt+WHveaVsO+8iOeugOWMlueJiOacrO+8jOmBv+WFjeWkjeadgiBNb2Nr77yJXG4gKiBAbW9kdWxlIF9fdGVzdHNfXy9yZXNvdXJjZS1vcHRpbWl6YXRpb24tc2ltcGxpZmllZC50ZXN0XG4gKiBAYXV0aG9yIFlZQ8KzXG4gKiBAdmVyc2lvbiAxLjAuMFxuICogQGNyZWF0ZWQgMjAyNi0wMi0yOFxuICovXG5cbmltcG9ydCB7XG4gIHByZWxvYWRMYXp5SW1hZ2UsXG4gIGNsZWFySW1hZ2VDYWNoZSxcbn0gZnJvbSAnLi4vLi4vdXRpbHMvaW1hZ2UtbGF6eS1sb2FkZXInO1xuXG5pbXBvcnQge1xuICBwcmVsb2FkRm9udCxcbiAgY2xlYXJGb250Q2FjaGUsXG4gIGdldEZvbnRQcmVsb2FkZXJTdGF0cyxcbn0gZnJvbSAnLi4vLi4vdXRpbHMvZm9udC1wcmVsb2FkZXInO1xuXG5pbXBvcnQge1xuICBwcmVsb2FkUmVzb3VyY2UsXG4gIGNsZWFyQWxsUmVzb3VyY2VzLFxuICBnZXRSZXNvdXJjZVByZWxvYWRlclN0YXRzLFxuICBnZW5lcmF0ZVByZWxvYWRIaW50cyxcbn0gZnJvbSAnLi4vcmVzb3VyY2UtcHJlbG9hZGVyJztcblxuZGVzY3JpYmUoJ+i1hOa6kOS8mOWMlua1i+ivle+8iOeugOWMlueJiO+8iScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xlYXJJbWFnZUNhY2hlKCk7XG4gICAgY2xlYXJGb250Q2FjaGUoKTtcbiAgICBjbGVhckFsbFJlc291cmNlcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgn5Zu+54mH6aKE5Yqg6L295rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/osIPnlKggcHJlbG9hZExhenlJbWFnZSDlh73mlbAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU3JjID0gJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnJztcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KHByZWxvYWRMYXp5SW1hZ2UobW9ja1NyYykpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSwgMTAwMDApO1xuICB9KTtcblxuICBkZXNjcmliZSgn5a2X5L2T6aKE5Yqg6L295rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/osIPnlKggcHJlbG9hZEZvbnQg5Ye95pWwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZvbnQgPSB7XG4gICAgICAgIGZvbnRGYW1pbHk6ICdUZXN0IEZvbnQnLFxuICAgICAgICBmb250U3JjOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9mb250LndvZmYyJyxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGV4cGVjdChwcmVsb2FkRm9udChtb2NrRm9udC5mb250RmFtaWx5LCBtb2NrRm9udC5mb250U3JjKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/ojrflj5blrZfkvZPpooTliqDovb3lmajnu5/orqHkv6Hmga8nLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IGdldEZvbnRQcmVsb2FkZXJTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnY2FjaGVTaXplJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6IO95aSf5riF56m65a2X5L2T57yT5a2YJywgKCkgPT4ge1xuICAgICAgY2xlYXJGb250Q2FjaGUoKTtcbiAgICAgIGNvbnN0IHN0YXRzID0gZ2V0Rm9udFByZWxvYWRlclN0YXRzKCk7XG4gICAgICBleHBlY3Qoc3RhdHMuY2FjaGVTaXplKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6LWE5rqQ6aKE5Yqg6L295rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/osIPnlKggcHJlbG9hZFJlc291cmNlIOWHveaVsCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tVcmwgPSAnaHR0cHM6Ly9leGFtcGxlLmNvbS9zY3JpcHQuanMnO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4gcHJlbG9hZFJlc291cmNlKG1vY2tVcmwsICdzY3JpcHQnKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/ojrflj5botYTmupDpooTliqDovb3lmajnu5/orqHkv6Hmga8nLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IGdldFJlc291cmNlUHJlbG9hZGVyU3RhdHMoKTtcbiAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ2NvdW50Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6IO95aSf5riF56m65omA5pyJ6LWE5rqQ57yT5a2YJywgKCkgPT4ge1xuICAgICAgY2xlYXJBbGxSZXNvdXJjZXMoKTtcbiAgICAgIGNvbnN0IHN0YXRzID0gZ2V0UmVzb3VyY2VQcmVsb2FkZXJTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzLmNvdW50KS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeiDveWkn+eUn+aIkOmihOWKoOi9veaPkOekuicsICgpID0+IHtcbiAgICAgIGNvbnN0IGhpbnRzID0gZ2VuZXJhdGVQcmVsb2FkSGludHMoKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGhpbnRzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+aAp+iDveWfuuWHhua1i+ivle+8iOeugOWMlueJiO+8iScsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6IO95aSf5Zyo5ZCI55CG5pe26Ze05YaF6aKE5Yqg6L295Zu+54mHJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVEF3SWlCb1pXbG5hSFE5SWpFd01DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNDhjbVZqZENCM2FXUjBhRDBpTVRBd0pTSWdhR1ZwWjJoMFBTSXhNREFsSWlCbWFXeHNQU0lqWmpCbU1HWXdJaTgrUEM5emRtYysnO1xuICAgICAgXG4gICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgYXdhaXQgcHJlbG9hZExhenlJbWFnZShtb2NrU3JjKTtcbiAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2FkVGltZSA9IGVuZCAtIHN0YXJ0O1xuICAgICAgZXhwZWN0KGxvYWRUaW1lKS50b0JlTGVzc1RoYW4oNTAwMCk7XG4gICAgfSwgMTAwMDApO1xuXG4gICAgaXQoJ+W6lOivpeiDveWkn+WcqOWQiOeQhuaXtumXtOWGhemihOWKoOi9veWtl+S9kycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGb250ID0ge1xuICAgICAgICBmb250RmFtaWx5OiAnVGVzdCBGb250JyxcbiAgICAgICAgZm9udFNyYzogJ2RhdGE6Zm9udC93b2ZmMjtiYXNlNjQsJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBhd2FpdCBwcmVsb2FkRm9udChtb2NrRm9udC5mb250RmFtaWx5LCBtb2NrRm9udC5mb250U3JjKTtcbiAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2FkVGltZSA9IGVuZCAtIHN0YXJ0O1xuICAgICAgZXhwZWN0KGxvYWRUaW1lKS50b0JlTGVzc1RoYW4oNTAwMCk7XG4gICAgfSwgMTAwMDApO1xuXG4gICAgaXQoJ+W6lOivpeiDveWkn+WcqOWQiOeQhuaXtumXtOWGhemihOWKoOi9vei1hOa6kCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tVcmwgPSAnaHR0cHM6Ly9leGFtcGxlLmNvbS9zY3JpcHQuanMnO1xuXG4gICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgcHJlbG9hZFJlc291cmNlKG1vY2tVcmwsICdzY3JpcHQnKTtcbiAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2FkVGltZSA9IGVuZCAtIHN0YXJ0O1xuICAgICAgZXhwZWN0KGxvYWRUaW1lKS50b0JlTGVzc1RoYW4oNTAwMCk7XG4gICAgfSwgMTAwMDApO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9