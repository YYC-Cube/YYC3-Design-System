{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/security/__tests__/CSRFProtection.test.tsx","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/security/__tests__/CSRFProtection.test.tsx"],"sourcesContent":["/**\n * @file CSRF防护测试\n * @description 测试CSRF防护功能\n * @module __tests__/security/CSRFProtection.test\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-19\n */\n\nimport * as React from 'react';\nimport { render, fireEvent, waitFor, cleanup } from '@testing-library/react';\nimport { screen } from '@testing-library/dom';\n\nimport {\n  CSRFProvider,\n  CSRFProtectedForm,\n  useCSRF,\n  CSRFProtectedFetch,\n  withCSRFProtection,\n  createCSRFMiddleware,\n  validateCSRFToken,\n  createStrictConfig,\n  createModerateConfig,\n  createPermissiveConfig,\n} from '../CSRFProtection';\n\nglobal.fetch = jest.fn() as any;\n\ndescribe('CSRF Protection Module', () => {\n  beforeEach(() => {\n    cleanup();\n    jest.clearAllMocks();\n  });\n\n  describe('CSRFProvider', () => {\n    it('应该生成并存储token', async () => {\n      const TestComponent = () => {\n        const { token, config } = useCSRF();\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"token-length\">{config?.tokenLength}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        const tokenLength = screen.getByTestId('token-length');\n        expect(token.textContent).not.toBe('loading');\n        expect(tokenLength.textContent).toBe('32');\n      });\n    });\n\n    it('应该支持自定义配置', async () => {\n      const customConfig = {\n        tokenLength: 16,\n        expirationTime: 60000,\n      };\n\n      const TestComponent = () => {\n        const { token, config } = useCSRF();\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"config-length\">{config?.tokenLength}</div>\n            <div data-testid=\"config-expiry\">{config?.expirationTime}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider config={customConfig}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        const configLength = screen.getByTestId('config-length');\n        const configExpiry = screen.getByTestId('config-expiry');\n        expect(token.textContent).not.toBe('loading');\n        expect(configLength.textContent).toBe('16');\n        expect(configExpiry.textContent).toBe('60000');\n      });\n    });\n\n    it('应该从服务器端获取token', async () => {\n      const serverToken = 'server-generated-token';\n      (global.fetch as any).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ token: serverToken }),\n      });\n\n      const TestComponent = () => {\n        const { token } = useCSRF();\n        return <div data-testid=\"token\">{token || 'loading'}</div>;\n      };\n\n      render(\n        <CSRFProvider serverEndpoint=\"/api/csrf-token\">\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).toBe(serverToken);\n      });\n    });\n  });\n\n  describe('useCSRF Hook', () => {\n    it('应该返回CSRF相关的状态和方法', async () => {\n      const TestComponent = () => {\n        const { token, refreshTokens, clearTokens } = useCSRF();\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <button data-testid=\"refresh\" onClick={refreshTokens}>\n              Refresh\n            </button>\n            <button data-testid=\"clear\" onClick={clearTokens}>\n              Clear\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const refreshButton = screen.getByTestId('refresh');\n      const clearButton = screen.getByTestId('clear');\n      expect(refreshButton).toBeInTheDocument();\n      expect(clearButton).toBeInTheDocument();\n    });\n\n    it('应该验证token有效性', async () => {\n      const TestComponent = () => {\n        const { token, validateToken } = useCSRF();\n        const [isValid, setIsValid] = React.useState<boolean | null>(null);\n\n        const handleValidate = () => {\n          setIsValid(validateToken(token || ''));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"valid\">\n              {isValid === null ? 'not-tested' : isValid ? 'valid' : 'invalid'}\n            </div>\n            <button data-testid=\"validate\" onClick={handleValidate}>\n              Validate\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const validateButton = screen.getByTestId('validate');\n      fireEvent.click(validateButton);\n\n      await waitFor(() => {\n        const valid = screen.getByTestId('valid');\n        expect(valid.textContent).toBe('valid');\n      });\n    });\n\n    it('应该刷新token', async () => {\n      const TestComponent = () => {\n        const { token, refreshTokens } = useCSRF();\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <button data-testid=\"refresh\" onClick={refreshTokens}>\n              Refresh\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const firstToken = screen.getByTestId('token').textContent;\n\n      const refreshButton = screen.getByTestId('refresh');\n      fireEvent.click(refreshButton);\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe(firstToken);\n      });\n    });\n\n    it('应该清除token', async () => {\n      const TestComponent = () => {\n        const { token, clearTokens } = useCSRF();\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'cleared'}</div>\n            <button data-testid=\"clear\" onClick={clearTokens}>\n              Clear\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('cleared');\n      });\n\n      const clearButton = screen.getByTestId('clear');\n      fireEvent.click(clearButton);\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).toBe('cleared');\n      });\n    });\n\n    it('应该添加token到请求', async () => {\n      const TestComponent = () => {\n        const { token, addToRequest } = useCSRF();\n        const [hasToken, setHasToken] = React.useState(false);\n\n        const handleAdd = () => {\n          const request = addToRequest({\n            method: 'POST',\n            headers: {},\n          });\n          setHasToken(!!request.headers?.['X-CSRF-Token']);\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"has-token\">{hasToken ? 'yes' : 'no'}</div>\n            <button data-testid=\"add\" onClick={handleAdd}>\n              Add\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const addButton = screen.getByTestId('add');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        const hasToken = screen.getByTestId('has-token');\n        expect(hasToken.textContent).toBe('yes');\n      });\n    });\n\n    it('应该添加token到URL', async () => {\n      const TestComponent = () => {\n        const { token, addToURL } = useCSRF();\n        const [url, setUrl] = React.useState('');\n\n        const handleAdd = () => {\n          setUrl(addToURL('/api/endpoint'));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"url\">{url || 'no-url'}</div>\n            <button data-testid=\"add\" onClick={handleAdd}>\n              Add\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const addButton = screen.getByTestId('add');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        const url = screen.getByTestId('url');\n        expect(url.textContent).toContain('csrf_token');\n      });\n    });\n\n    it('应该在没有token时保持URL不变', async () => {\n      const TestComponent = () => {\n        const { addToURL, clearTokens } = useCSRF();\n        const [url, setUrl] = React.useState('');\n\n        const handleAdd = () => {\n          clearTokens();\n          setUrl(addToURL('/api/endpoint'));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"url\">{url || 'no-url'}</div>\n            <button data-testid=\"add\" onClick={handleAdd}>\n              Add\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const addButton = screen.getByTestId('add');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        const url = screen.getByTestId('url');\n        expect(url.textContent).toContain('/api/endpoint');\n      });\n    });\n\n    it('应该添加token到表单', async () => {\n      const TestComponent = () => {\n        const { token, addToForm } = useCSRF();\n        const formRef = React.useRef<HTMLFormElement>(null);\n        const [hasToken, setHasToken] = React.useState(false);\n\n        const handleAdd = () => {\n          if (formRef.current) {\n            addToForm(formRef.current);\n            const input = formRef.current.querySelector(\n              'input[name=\"csrf_token\"]'\n            ) as HTMLInputElement;\n            setHasToken(!!input && input.value === token);\n          }\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"has-token\">{hasToken ? 'yes' : 'no'}</div>\n            <form ref={formRef} data-testid=\"form\">\n              <button type=\"button\" data-testid=\"add\" onClick={handleAdd}>\n                Add\n              </button>\n            </form>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const addButton = screen.getByTestId('add');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        const hasToken = screen.getByTestId('has-token');\n        expect(hasToken.textContent).toBe('yes');\n      });\n    });\n  });\n\n  describe('CSRFProtectedForm', () => {\n    it('应该在表单中自动添加CSRF token', async () => {\n      const handleSubmit = jest.fn();\n\n      const TestComponent = () => {\n        return (\n          <CSRFProtectedForm onSubmit={handleSubmit} data-testid=\"form\">\n            <button type=\"submit\">Submit</button>\n          </CSRFProtectedForm>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const form = screen.getByTestId('form');\n        expect(form).toBeInTheDocument();\n      });\n    });\n\n    it('应该支持自定义字段名', async () => {\n      const handleSubmit = jest.fn();\n      const TestComponent = () => {\n        return (\n          <CSRFProtectedForm onSubmit={handleSubmit} data-testid=\"form\">\n            <button type=\"submit\">Submit</button>\n          </CSRFProtectedForm>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const form = screen.getByTestId('form');\n        expect(form).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('CSRFProtectedFetch', () => {\n    it('应该在fetch请求中自动添加CSRF token', async () => {\n      (global.fetch as any).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true }),\n      });\n\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [result, setResult] = React.useState<unknown>(null);\n\n        const handleClick = async () => {\n          try {\n            const response = await CSRFProtectedFetch(\n              '/api/endpoint',\n              {\n                method: 'POST',\n                body: JSON.stringify({ data: 'test' }),\n              },\n              csrfContext\n            );\n            const data = await response.json();\n            setResult(data);\n          } catch (error) {\n            console.error('Fetch error:', error);\n          }\n        };\n\n        return (\n          <div>\n            <button data-testid=\"fetch\" onClick={handleClick}>\n              Fetch\n            </button>\n            <div data-testid=\"result\">{result ? JSON.stringify(result) : 'no-result'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const fetchButton = screen.getByTestId('fetch');\n        expect(fetchButton).toBeInTheDocument();\n      });\n\n      const fetchButton = screen.getByTestId('fetch');\n      fireEvent.click(fetchButton);\n\n      await waitFor(() => {\n        const result = screen.getByTestId('result');\n        expect(result.textContent).toContain('success');\n      });\n    });\n\n    it('应该处理fetch错误', async () => {\n      (global.fetch as any).mockRejectedValueOnce(new Error('Network error'));\n\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [error, setError] = React.useState<string | null>(null);\n\n        const handleClick = async () => {\n          try {\n            await CSRFProtectedFetch(\n              '/api/endpoint',\n              {\n                method: 'POST',\n              },\n              csrfContext\n            );\n          } catch (err) {\n            setError((err as Error).message);\n          }\n        };\n\n        return (\n          <div>\n            <button data-testid=\"fetch\" onClick={handleClick}>\n              Fetch\n            </button>\n            <div data-testid=\"error\">{error || 'no-error'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const fetchButton = screen.getByTestId('fetch');\n      fireEvent.click(fetchButton);\n\n      await waitFor(() => {\n        const error = screen.getByTestId('error');\n        expect(error.textContent).toContain('Network error');\n      });\n    });\n\n    it('应该支持自定义headers', async () => {\n      (global.fetch as any).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true }),\n      });\n\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [called, setCalled] = React.useState(false);\n\n        const handleClick = async () => {\n          await CSRFProtectedFetch(\n            '/api/endpoint',\n            {\n              method: 'POST',\n              headers: {\n                'X-Custom-Header': 'custom-value',\n              },\n            },\n            csrfContext\n          );\n          setCalled(true);\n        };\n\n        return (\n          <div>\n            <button data-testid=\"fetch\" onClick={handleClick}>\n              Fetch\n            </button>\n            <div data-testid=\"called\">{called ? 'called' : 'not-called'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const fetchButton = screen.getByTestId('fetch');\n      fireEvent.click(fetchButton);\n\n      await waitFor(() => {\n        const called = screen.getByTestId('called');\n        expect(called.textContent).toBe('called');\n      });\n    });\n  });\n\n  describe('withCSRFProtection', () => {\n    it('应该包装组件并添加CSRF保护', async () => {\n      const TestComponent = () => {\n        const { token } = useCSRF();\n        return <div data-testid=\"token\">{token || 'loading'}</div>;\n      };\n\n      const WrappedComponent = withCSRFProtection(TestComponent);\n\n      render(<WrappedComponent />);\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n    });\n\n    it('应该支持自定义配置', async () => {\n      const customConfig = {\n        tokenLength: 16,\n        expirationTime: 60000,\n      };\n\n      const TestComponent = () => {\n        const { config } = useCSRF();\n        return <div data-testid=\"config-length\">{config?.tokenLength}</div>;\n      };\n\n      const WrappedComponent = withCSRFProtection(TestComponent, customConfig);\n\n      render(<WrappedComponent />);\n\n      await waitFor(() => {\n        const configLength = screen.getByTestId('config-length');\n        expect(configLength.textContent).toBe('16');\n      });\n    });\n\n    it('应该保留组件的displayName', () => {\n      const TestComponent = () => <div>Test</div>;\n      TestComponent.displayName = 'TestComponent';\n      const WrappedComponent = withCSRFProtection(TestComponent);\n\n      expect(WrappedComponent.displayName).toBe('withCSRFProtection(TestComponent)');\n    });\n  });\n\n  describe('createCSRFMiddleware', () => {\n    it('应该创建CSRF中间件', async () => {\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const middleware = createCSRFMiddleware(csrfContext);\n        return (\n          <div data-testid=\"has-middleware\">{middleware ? 'has-middleware' : 'no-middleware'}</div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const hasMiddleware = screen.getByTestId('has-middleware');\n        expect(hasMiddleware.textContent).toBe('has-middleware');\n      });\n    });\n\n    it('应该提供fetch方法', async () => {\n      (global.fetch as any).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true }),\n      });\n\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [called, setCalled] = React.useState(false);\n\n        const handleClick = async () => {\n          const middleware = createCSRFMiddleware(csrfContext);\n          await middleware.fetch('/api/endpoint');\n          setCalled(true);\n        };\n\n        return (\n          <div>\n            <button data-testid=\"fetch\" onClick={handleClick}>\n              Fetch\n            </button>\n            <div data-testid=\"called\">{called ? 'called' : 'not-called'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const fetchButton = screen.getByTestId('fetch');\n      fireEvent.click(fetchButton);\n\n      await waitFor(() => {\n        const called = screen.getByTestId('called');\n        expect(called.textContent).toBe('called');\n      });\n    });\n\n    it('应该提供XMLHttpRequest方法', async () => {\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const middleware = createCSRFMiddleware(csrfContext);\n        return (\n          <div data-testid=\"has-xhr\">\n            {typeof middleware.XMLHttpRequest === 'function' ? 'has-xhr' : 'no-xhr'}\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const hasXHR = screen.getByTestId('has-xhr');\n        expect(hasXHR.textContent).toBe('has-xhr');\n      });\n    });\n\n    it('应该创建XMLHttpRequest实例', async () => {\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [hasXHR, setHasXHR] = React.useState(false);\n\n        const handleClick = () => {\n          const middleware = createCSRFMiddleware(csrfContext);\n          const xhr = middleware.XMLHttpRequest();\n          setHasXHR(!!xhr);\n        };\n\n        return (\n          <div>\n            <button data-testid=\"create-xhr\" onClick={handleClick}>\n              Create XHR\n            </button>\n            <div data-testid=\"has-xhr\">{hasXHR ? 'yes' : 'no'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const createButton = screen.getByTestId('create-xhr');\n      fireEvent.click(createButton);\n\n      await waitFor(() => {\n        const hasXHR = screen.getByTestId('has-xhr');\n        expect(hasXHR.textContent).toBe('yes');\n      });\n    });\n\n    it('应该支持XMLHttpRequest的open方法', async () => {\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [opened, setOpened] = React.useState(false);\n\n        const handleClick = () => {\n          const middleware = createCSRFMiddleware(csrfContext);\n          const xhr = middleware.XMLHttpRequest();\n          xhr.open('GET', '/api/endpoint');\n          setOpened(true);\n        };\n\n        return (\n          <div>\n            <button data-testid=\"open-xhr\" onClick={handleClick}>\n              Open XHR\n            </button>\n            <div data-testid=\"opened\">{opened ? 'yes' : 'no'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const openButton = screen.getByTestId('open-xhr');\n      fireEvent.click(openButton);\n\n      await waitFor(() => {\n        const opened = screen.getByTestId('opened');\n        expect(opened.textContent).toBe('yes');\n      });\n    });\n\n    it('应该支持XMLHttpRequest的setRequestHeader方法', async () => {\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [headerSet, setHeaderSet] = React.useState(false);\n\n        const handleClick = () => {\n          const middleware = createCSRFMiddleware(csrfContext);\n          const xhr = middleware.XMLHttpRequest();\n          xhr.open('POST', '/api/endpoint');\n          xhr.setRequestHeader('Content-Type', 'application/json');\n          setHeaderSet(true);\n        };\n\n        return (\n          <div>\n            <button data-testid=\"set-header\" onClick={handleClick}>\n              Set Header\n            </button>\n            <div data-testid=\"header-set\">{headerSet ? 'yes' : 'no'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const setHeaderButton = screen.getByTestId('set-header');\n      fireEvent.click(setHeaderButton);\n\n      await waitFor(() => {\n        const headerSet = screen.getByTestId('header-set');\n        expect(headerSet.textContent).toBe('yes');\n      });\n    });\n\n    it('应该支持XMLHttpRequest的send方法', async () => {\n      const TestComponent = () => {\n        const csrfContext = useCSRF();\n        const [sent, setSent] = React.useState(false);\n\n        const handleClick = () => {\n          const middleware = createCSRFMiddleware(csrfContext);\n          const xhr = middleware.XMLHttpRequest();\n          xhr.open('POST', '/api/endpoint');\n          xhr.send('test data');\n          setSent(true);\n        };\n\n        return (\n          <div>\n            <button data-testid=\"send\" onClick={handleClick}>\n              Send\n            </button>\n            <div data-testid=\"sent\">{sent ? 'yes' : 'no'}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const sendButton = screen.getByTestId('send');\n      fireEvent.click(sendButton);\n\n      await waitFor(() => {\n        const sent = screen.getByTestId('sent');\n        expect(sent.textContent).toBe('yes');\n      });\n    });\n  });\n\n  describe('validateCSRFToken', () => {\n    it('应该验证CSRF token', async () => {\n      const TestComponent = () => {\n        const { token } = useCSRF();\n        return <div data-testid=\"token\">{token || 'loading'}</div>;\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const tokenElement = screen.getByTestId('token');\n        const token = tokenElement.textContent;\n        expect(token).not.toBe('loading');\n\n        if (token && token !== 'loading') {\n          const request = new Request(new URL('/api/endpoint', window.location.origin).toString(), {\n            method: 'POST',\n            headers: {\n              'X-CSRF-Token': token,\n            },\n          });\n          const isValid = validateCSRFToken(request, token, {\n            headerName: 'X-CSRF-Token',\n            parameterName: 'csrf_token',\n          });\n          expect(isValid).toBe(true);\n        }\n      });\n    });\n\n    it('应该允许安全方法', () => {\n      const request = new Request(new URL('/api/endpoint', window.location.origin).toString(), {\n        method: 'GET',\n      });\n      const isValid = validateCSRFToken(request, null, {\n        headerName: 'X-CSRF-Token',\n        parameterName: 'csrf_token',\n      });\n      expect(isValid).toBe(true);\n    });\n\n    it('应该拒绝无效token', () => {\n      const request = new Request(new URL('/api/endpoint', window.location.origin).toString(), {\n        method: 'POST',\n        headers: {\n          'X-CSRF-Token': 'invalid-token',\n        },\n      });\n      const isValid = validateCSRFToken(request, 'valid-token', {\n        headerName: 'X-CSRF-Token',\n        parameterName: 'csrf_token',\n      });\n      expect(isValid).toBe(false);\n    });\n\n    it('应该从URL参数验证token', () => {\n      const url = new URL('/api/endpoint?csrf_token=valid-token', window.location.origin);\n      const request = new Request(url.toString(), {\n        method: 'POST',\n      });\n      const isValid = validateCSRFToken(request, 'valid-token', {\n        headerName: 'X-CSRF-Token',\n        parameterName: 'csrf_token',\n      });\n      expect(isValid).toBe(true);\n    });\n  });\n\n  describe('createStrictConfig', () => {\n    it('应该创建严格的CSRF配置', () => {\n      const config = createStrictConfig();\n\n      expect(config.tokenLength).toBe(64);\n      expect(config.expirationTime).toBe(1800000);\n      expect(config.requireSamesite).toBe('strict');\n      expect(config.requireSecure).toBe(true);\n      expect(config.doubleSubmitCookie).toBe(true);\n      expect(config.regenerateOnLoad).toBe(true);\n      expect(config.storageType).toBe('session');\n    });\n  });\n\n  describe('createModerateConfig', () => {\n    it('应该创建适度的CSRF配置', () => {\n      const config = createModerateConfig();\n\n      expect(config.tokenLength).toBe(32);\n      expect(config.expirationTime).toBe(3600000);\n      expect(config.requireSamesite).toBe('lax');\n      expect(config.requireSecure).toBe(true);\n      expect(config.doubleSubmitCookie).toBe(true);\n      expect(config.regenerateOnLoad).toBe(false);\n      expect(config.storageType).toBe('memory');\n    });\n  });\n\n  describe('createPermissiveConfig', () => {\n    it('应该创建宽松的CSRF配置', () => {\n      const config = createPermissiveConfig();\n\n      expect(config.tokenLength).toBe(16);\n      expect(config.expirationTime).toBe(7200000);\n      expect(config.requireSamesite).toBe('lax');\n      expect(config.requireSecure).toBe(false);\n      expect(config.doubleSubmitCookie).toBe(false);\n      expect(config.regenerateOnLoad).toBe(false);\n      expect(config.storageType).toBe('local');\n    });\n  });\n\n  describe('错误处理', () => {\n    it('应该处理无效token验证', async () => {\n      const TestComponent = () => {\n        const { validateToken } = useCSRF();\n        const [isValid, setIsValid] = React.useState<boolean | null>(null);\n\n        const handleValidate = () => {\n          setIsValid(validateToken('invalid-token'));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"valid\">\n              {isValid === null ? 'not-tested' : isValid ? 'valid' : 'invalid'}\n            </div>\n            <button data-testid=\"validate\" onClick={handleValidate}>\n              Validate\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const validateButton = screen.getByTestId('validate');\n      fireEvent.click(validateButton);\n\n      await waitFor(() => {\n        const valid = screen.getByTestId('valid');\n        expect(valid.textContent).toBe('invalid');\n      });\n    });\n\n    it('应该处理服务器端token获取失败', async () => {\n      (global.fetch as any).mockRejectedValueOnce(new Error('Server error'));\n\n      const TestComponent = () => {\n        const { token } = useCSRF();\n        return <div data-testid=\"token\">{token || 'loading'}</div>;\n      };\n\n      render(\n        <CSRFProvider serverEndpoint=\"/api/csrf-token\">\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n    });\n  });\n\n  describe('不同存储类型', () => {\n    it('应该使用自定义验证器', async () => {\n      const customValidator = jest.fn((token: string) => token.length > 0);\n\n      const TestComponent = () => {\n        const { token, validateToken } = useCSRF();\n        const [isValid, setIsValid] = React.useState<boolean | null>(null);\n\n        const handleValidate = () => {\n          setIsValid(validateToken(token || ''));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"valid\">\n              {isValid === null ? 'not-tested' : isValid ? 'valid' : 'invalid'}\n            </div>\n            <button data-testid=\"validate\" onClick={handleValidate}>\n              Validate\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider config={{ customValidator }}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const validateButton = screen.getByTestId('validate');\n      fireEvent.click(validateButton);\n\n      await waitFor(() => {\n        const valid = screen.getByTestId('valid');\n        expect(valid.textContent).toBe('valid');\n        expect(customValidator).toHaveBeenCalled();\n      });\n    });\n\n    it('应该在自定义验证器失败时拒绝token', async () => {\n      const customValidator = jest.fn((token: string) => token === 'custom-token');\n\n      const TestComponent = () => {\n        const { token, validateToken } = useCSRF();\n        const [isValid, setIsValid] = React.useState<boolean | null>(null);\n\n        const handleValidate = () => {\n          setIsValid(validateToken(token || ''));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"valid\">\n              {isValid === null ? 'not-tested' : isValid ? 'valid' : 'invalid'}\n            </div>\n            <button data-testid=\"validate\" onClick={handleValidate}>\n              Validate\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider config={{ customValidator }}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const validateButton = screen.getByTestId('validate');\n      fireEvent.click(validateButton);\n\n      await waitFor(() => {\n        const valid = screen.getByTestId('valid');\n        expect(valid.textContent).toBe('invalid');\n        expect(customValidator).toHaveBeenCalled();\n      });\n    });\n  });\n\n  describe('存储类型', () => {\n    it('应该使用session存储', async () => {\n      const TestComponent = () => {\n        const { token } = useCSRF();\n        return <div data-testid=\"token\">{token || 'loading'}</div>;\n      };\n\n      render(\n        <CSRFProvider config={{ storageType: 'session' }}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      expect(sessionStorage.getItem('csrf-token')).toBeTruthy();\n    });\n\n    it('应该使用local存储', async () => {\n      const TestComponent = () => {\n        const { token } = useCSRF();\n        return <div data-testid=\"token\">{token || 'loading'}</div>;\n      };\n\n      render(\n        <CSRFProvider config={{ storageType: 'local' }}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      expect(localStorage.getItem('csrf-token')).toBeTruthy();\n    });\n  });\n\n  describe('方法覆盖功能', () => {\n    it('应该允许覆盖的方法', () => {\n      const request = new Request(new URL('/api/endpoint', window.location.origin).toString(), {\n        method: 'GET',\n      });\n      const isValid = validateCSRFToken(request, null, {\n        headerName: 'X-CSRF-Token',\n        parameterName: 'csrf_token',\n      });\n      expect(isValid).toBe(true);\n    });\n\n    it('应该拒绝不允许覆盖的方法', () => {\n      const request = new Request(new URL('/api/endpoint', window.location.origin).toString(), {\n        method: 'POST',\n      });\n      const isValid = validateCSRFToken(request, null, {\n        headerName: 'X-CSRF-Token',\n        parameterName: 'csrf_token',\n      });\n      expect(isValid).toBe(false);\n    });\n  });\n\n  describe('更多错误场景', () => {\n    it('应该处理token不匹配', async () => {\n      const onValidationError = jest.fn();\n\n      const TestComponent = () => {\n        const { validateToken } = useCSRF();\n        const [isValid, setIsValid] = React.useState<boolean | null>(null);\n\n        const handleValidate = () => {\n          setIsValid(validateToken('different-token'));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"valid\">\n              {isValid === null ? 'not-tested' : isValid ? 'valid' : 'invalid'}\n            </div>\n            <button data-testid=\"validate\" onClick={handleValidate}>\n              Validate\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider config={{ onValidationError }}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const validateButton = screen.getByTestId('validate');\n      fireEvent.click(validateButton);\n\n      await waitFor(() => {\n        const valid = screen.getByTestId('valid');\n        expect(valid.textContent).toBe('invalid');\n        expect(onValidationError).toHaveBeenCalledWith(\n          expect.objectContaining({\n            type: 'invalid_token',\n          })\n        );\n      });\n    });\n\n    it('应该处理缺失token', async () => {\n      const onValidationError = jest.fn();\n\n      const TestComponent = () => {\n        const { validateToken } = useCSRF();\n        const [isValid, setIsValid] = React.useState<boolean | null>(null);\n\n        const handleValidate = () => {\n          setIsValid(validateToken(''));\n        };\n\n        return (\n          <div>\n            <div data-testid=\"valid\">\n              {isValid === null ? 'not-tested' : isValid ? 'valid' : 'invalid'}\n            </div>\n            <button data-testid=\"validate\" onClick={handleValidate}>\n              Validate\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider config={{ onValidationError }}>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const validateButton = screen.getByTestId('validate');\n      fireEvent.click(validateButton);\n\n      await waitFor(() => {\n        const valid = screen.getByTestId('valid');\n        expect(valid.textContent).toBe('invalid');\n        expect(onValidationError).toHaveBeenCalledWith(\n          expect.objectContaining({\n            type: 'missing_token',\n          })\n        );\n      });\n    });\n\n    it('应该在Provider外使用useCSRF时抛出错误', () => {\n      const TestComponent = () => {\n        try {\n          useCSRF();\n          return <div data-testid=\"no-error\">No error</div>;\n        } catch {\n          return <div data-testid=\"error\">Error</div>;\n        }\n      };\n\n      render(<TestComponent />);\n      expect(screen.getByTestId('error')).toBeInTheDocument();\n    });\n  });\n\n  describe('边界情况', () => {\n    it('应该处理空的请求配置', async () => {\n      const TestComponent = () => {\n        const { addToRequest } = useCSRF();\n        const [result, setResult] = React.useState<string>('');\n\n        const handleAdd = () => {\n          const request = addToRequest({} as any);\n          setResult(JSON.stringify(request));\n        };\n\n        return (\n          <div>\n            <button data-testid=\"add\" onClick={handleAdd}>\n              Add\n            </button>\n            <div data-testid=\"result\">{result}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const addButton = screen.getByTestId('add');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        const result = screen.getByTestId('result');\n        expect(result.textContent).toBeTruthy();\n      });\n    });\n\n    it('应该处理无效的URL', async () => {\n      const TestComponent = () => {\n        const { addToURL } = useCSRF();\n        const [url, setUrl] = React.useState('');\n\n        const handleAdd = () => {\n          setUrl(addToURL('/api/endpoint'));\n        };\n\n        return (\n          <div>\n            <button data-testid=\"add\" onClick={handleAdd}>\n              Add\n            </button>\n            <div data-testid=\"url\">{url}</div>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      const addButton = screen.getByTestId('add');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        const url = screen.getByTestId('url');\n        expect(url.textContent).toContain('/api/endpoint');\n        expect(url.textContent).toContain('csrf_token');\n      });\n    });\n\n    it('应该处理多个token刷新', async () => {\n      const TestComponent = () => {\n        const { token, refreshTokens } = useCSRF();\n        const [tokens, setTokens] = React.useState<string[]>([]);\n\n        const handleRefresh = () => {\n          const currentToken = token;\n          if (currentToken) {\n            setTokens((prev) => [...prev, currentToken]);\n            refreshTokens();\n          }\n        };\n\n        return (\n          <div>\n            <div data-testid=\"token\">{token || 'loading'}</div>\n            <div data-testid=\"count\">{tokens.length}</div>\n            <button data-testid=\"refresh\" onClick={handleRefresh}>\n              Refresh\n            </button>\n          </div>\n        );\n      };\n\n      render(\n        <CSRFProvider>\n          <TestComponent />\n        </CSRFProvider>\n      );\n\n      await waitFor(() => {\n        const token = screen.getByTestId('token');\n        expect(token.textContent).not.toBe('loading');\n      });\n\n      const refreshButton = screen.getByTestId('refresh');\n      fireEvent.click(refreshButton);\n      fireEvent.click(refreshButton);\n      fireEvent.click(refreshButton);\n\n      await waitFor(() => {\n        const count = screen.getByTestId('count');\n        expect(parseInt(count.textContent || '0')).toBeGreaterThanOrEqual(2);\n      });\n    });\n  });\n});\n"],"version":3}