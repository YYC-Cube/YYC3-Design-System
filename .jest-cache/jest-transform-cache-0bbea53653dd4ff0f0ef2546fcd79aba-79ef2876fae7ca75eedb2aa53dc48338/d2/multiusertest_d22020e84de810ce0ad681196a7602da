74cf11e70ceaaf343cf733c6f5e2ae5b
"use strict";
/**
 * @file 多用户协作测试
 * @description 测试多用户协作功能
 * @module __tests__/collaboration/multi-user.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-19
 */
describe('Multi-User Collaboration Module', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('用户会话管理', () => {
        it('应该创建用户会话', () => {
            const userSession = {
                userId: 'user1',
                userName: 'User 1',
                sessionId: 'session-123',
                joinedAt: Date.now(),
            };
            expect(userSession.userId).toBe('user1');
            expect(userSession.userName).toBe('User 1');
            expect(userSession.sessionId).toBe('session-123');
            expect(userSession.joinedAt).toBeDefined();
        });
        it('应该跟踪活跃会话', () => {
            const activeSessions = [
                { userId: 'user1', lastActivity: Date.now() },
                { userId: 'user2', lastActivity: Date.now() },
                { userId: 'user3', lastActivity: Date.now() },
            ];
            expect(activeSessions.length).toBe(3);
            activeSessions.forEach((session) => {
                expect(session.userId).toBeDefined();
                expect(session.lastActivity).toBeDefined();
            });
        });
        it('应该处理会话超时', () => {
            const session = {
                userId: 'user1',
                lastActivity: Date.now() - 1800000,
                timeout: 900000,
            };
            const isExpired = Date.now() - session.lastActivity > session.timeout;
            expect(isExpired).toBe(true);
        });
    });
    describe('并发编辑', () => {
        it('应该支持多用户同时编辑', () => {
            const editors = [
                { userId: 'user1', documentId: 'doc1', cursor: { line: 1, column: 10 } },
                { userId: 'user2', documentId: 'doc1', cursor: { line: 5, column: 20 } },
                { userId: 'user3', documentId: 'doc1', cursor: { line: 10, column: 5 } },
            ];
            expect(editors.length).toBe(3);
            editors.forEach((editor) => {
                expect(editor.documentId).toBe('doc1');
                expect(editor.cursor).toBeDefined();
            });
        });
        it('应该跟踪用户光标位置', () => {
            const cursor = {
                userId: 'user1',
                position: { line: 10, column: 15 },
                selection: { start: { line: 10, column: 15 }, end: { line: 10, column: 20 } },
            };
            expect(cursor.userId).toBe('user1');
            expect(cursor.position.line).toBe(10);
            expect(cursor.position.column).toBe(15);
            expect(cursor.selection.start).toBeDefined();
            expect(cursor.selection.end).toBeDefined();
        });
        it('应该处理编辑冲突', () => {
            const edits = [
                { userId: 'user1', operation: 'insert', position: 10, content: 'test' },
                { userId: 'user2', operation: 'insert', position: 10, content: 'other' },
            ];
            const hasConflict = edits.length > 1 && edits[0].position === edits[1].position;
            expect(hasConflict).toBe(true);
        });
    });
    describe('实时协作', () => {
        it('应该广播用户操作', () => {
            const operations = [
                { type: 'insert', userId: 'user1', data: 'abc' },
                { type: 'delete', userId: 'user2', data: 'def' },
                { type: 'replace', userId: 'user3', data: 'ghi' },
            ];
            operations.forEach((op) => {
                expect(op.type).toBeDefined();
                expect(op.userId).toBeDefined();
                expect(op.data).toBeDefined();
            });
        });
        it('应该维护操作历史', () => {
            const operationHistory = [
                { id: 1, operation: 'insert', timestamp: Date.now() },
                { id: 2, operation: 'delete', timestamp: Date.now() },
                { id: 3, operation: 'replace', timestamp: Date.now() },
            ];
            expect(operationHistory.length).toBe(3);
            operationHistory.forEach((op) => {
                expect(op.id).toBeDefined();
                expect(op.operation).toBeDefined();
                expect(op.timestamp).toBeDefined();
            });
        });
        it('应该支持操作撤销', () => {
            const undoStack = [
                { operation: 'insert', content: 'abc', position: 0 },
                { operation: 'delete', content: 'def', position: 3 },
            ];
            const lastOperation = undoStack.pop();
            expect(lastOperation).toBeDefined();
            expect(lastOperation?.operation).toBe('delete');
        });
        it('应该支持操作重做', () => {
            const redoStack = [
                { operation: 'insert', content: 'abc', position: 0 },
                { operation: 'delete', content: 'def', position: 3 },
            ];
            const nextOperation = redoStack.pop();
            expect(nextOperation).toBeDefined();
            expect(nextOperation?.operation).toBe('delete');
        });
    });
    describe('权限管理', () => {
        it('应该支持只读权限', () => {
            const permission = {
                userId: 'user1',
                documentId: 'doc1',
                level: 'read',
                canEdit: false,
                canDelete: false,
            };
            expect(permission.level).toBe('read');
            expect(permission.canEdit).toBe(false);
            expect(permission.canDelete).toBe(false);
        });
        it('应该支持编辑权限', () => {
            const permission = {
                userId: 'user2',
                documentId: 'doc1',
                level: 'write',
                canEdit: true,
                canDelete: false,
            };
            expect(permission.level).toBe('write');
            expect(permission.canEdit).toBe(true);
            expect(permission.canDelete).toBe(false);
        });
        it('应该支持管理权限', () => {
            const permission = {
                userId: 'user3',
                documentId: 'doc1',
                level: 'admin',
                canEdit: true,
                canDelete: true,
            };
            expect(permission.level).toBe('admin');
            expect(permission.canEdit).toBe(true);
            expect(permission.canDelete).toBe(true);
        });
    });
    describe('文档状态', () => {
        it('应该跟踪文档状态', () => {
            const documentStates = [
                { documentId: 'doc1', status: 'draft', lastModified: Date.now() },
                { documentId: 'doc2', status: 'published', lastModified: Date.now() },
                { documentId: 'doc3', status: 'archived', lastModified: Date.now() },
            ];
            documentStates.forEach((state) => {
                expect(state.documentId).toBeDefined();
                expect(state.status).toBeDefined();
                expect(state.lastModified).toBeDefined();
            });
        });
        it('应该处理状态转换', () => {
            const transitions = [
                { from: 'draft', to: 'published', allowed: true },
                { from: 'published', to: 'archived', allowed: true },
                { from: 'draft', to: 'archived', allowed: true },
            ];
            transitions.forEach((transition) => {
                expect(transition.from).toBeDefined();
                expect(transition.to).toBeDefined();
                expect(transition.allowed).toBeDefined();
            });
        });
    });
    describe('协作通知', () => {
        it('应该通知用户加入', () => {
            const notification = {
                type: 'user_joined',
                userId: 'user1',
                userName: 'User 1',
                timestamp: Date.now(),
            };
            expect(notification.type).toBe('user_joined');
            expect(notification.userId).toBe('user1');
            expect(notification.userName).toBe('User 1');
        });
        it('应该通知用户离开', () => {
            const notification = {
                type: 'user_left',
                userId: 'user2',
                userName: 'User 2',
                timestamp: Date.now(),
            };
            expect(notification.type).toBe('user_left');
            expect(notification.userId).toBe('user2');
        });
        it('应该通知文档更新', () => {
            const notification = {
                type: 'document_updated',
                documentId: 'doc1',
                userId: 'user1',
                changes: ['content', 'metadata'],
            };
            expect(notification.type).toBe('document_updated');
            expect(notification.documentId).toBe('doc1');
            expect(notification.changes).toBeDefined();
        });
    });
    describe('冲突解决', () => {
        it('应该提供冲突解决选项', () => {
            const conflictResolution = {
                options: ['accept_mine', 'accept_theirs', 'merge', 'manual'],
                autoResolve: false,
                notifyUsers: true,
            };
            expect(conflictResolution.options).toContain('accept_mine');
            expect(conflictResolution.options).toContain('accept_theirs');
            expect(conflictResolution.options).toContain('merge');
            expect(conflictResolution.options).toContain('manual');
        });
        it('应该支持自动合并', () => {
            const autoMerge = {
                strategy: 'last-write-wins',
                algorithm: 'diff3',
                confidence: 0.8,
            };
            expect(autoMerge.strategy).toBe('last-write-wins');
            expect(autoMerge.algorithm).toBe('diff3');
            expect(autoMerge.confidence).toBe(0.8);
        });
        it('应该记录冲突历史', () => {
            const conflictHistory = [
                {
                    id: 1,
                    timestamp: Date.now(),
                    users: ['user1', 'user2'],
                    resolution: 'merge',
                },
                {
                    id: 2,
                    timestamp: Date.now(),
                    users: ['user2', 'user3'],
                    resolution: 'accept_mine',
                },
            ];
            conflictHistory.forEach((conflict) => {
                expect(conflict.id).toBeDefined();
                expect(conflict.timestamp).toBeDefined();
                expect(conflict.users).toBeDefined();
                expect(conflict.resolution).toBeDefined();
            });
        });
    });
    describe('性能优化', () => {
        it('应该批量处理操作', () => {
            const operations = Array.from({ length: 100 }, (_, i) => ({
                type: 'insert',
                userId: `user${i % 3}`,
                data: `data${i}`,
            }));
            const batchSize = 10;
            const batches = [];
            for (let i = 0; i < operations.length; i += batchSize) {
                batches.push(operations.slice(i, i + batchSize));
            }
            expect(batches.length).toBe(10);
            expect(batches[0].length).toBe(10);
        });
        it('应该压缩操作数据', () => {
            const operations = [
                { type: 'insert', data: 'abc' },
                { type: 'delete', data: 'def' },
            ];
            const compressed = JSON.stringify(operations);
            expect(compressed).toBeDefined();
            expect(compressed.length).toBeLessThan(1000);
        });
        it('应该节流高频操作', () => {
            const throttledOperations = [];
            let lastProcessTime = 0;
            const throttleInterval = 100;
            const processOperation = (operation) => {
                const now = Date.now();
                if (now - lastProcessTime >= throttleInterval) {
                    throttledOperations.push(operation);
                    lastProcessTime = now;
                }
            };
            for (let i = 0; i < 10; i++) {
                processOperation({ type: 'test', data: i });
            }
            expect(throttledOperations.length).toBeGreaterThan(0);
            expect(throttledOperations.length).toBeLessThanOrEqual(10);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbGxhYm9yYXRpb24vX190ZXN0c19fL211bHRpLXVzZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRztBQUVILFFBQVEsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7SUFDL0MsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtRQUN0QixFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLFdBQVcsR0FBRztnQkFDbEIsTUFBTSxFQUFFLE9BQU87Z0JBQ2YsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLFNBQVMsRUFBRSxhQUFhO2dCQUN4QixRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUNyQixDQUFDO1lBRUYsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sY0FBYyxHQUFHO2dCQUNyQixFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDN0MsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUU7Z0JBQzdDLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFO2FBQzlDLENBQUM7WUFFRixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ2pDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ3JDLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sT0FBTyxHQUFHO2dCQUNkLE1BQU0sRUFBRSxPQUFPO2dCQUNmLFlBQVksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsT0FBTztnQkFDbEMsT0FBTyxFQUFFLE1BQU07YUFDaEIsQ0FBQztZQUVGLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxPQUFPLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUM7WUFDdEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7UUFDcEIsRUFBRSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7WUFDckIsTUFBTSxPQUFPLEdBQUc7Z0JBQ2QsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUU7Z0JBQ3hFLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFO2dCQUN4RSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTthQUN6RSxDQUFDO1lBRUYsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO2dCQUN6QixNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN0QyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7WUFDcEIsTUFBTSxNQUFNLEdBQUc7Z0JBQ2IsTUFBTSxFQUFFLE9BQU87Z0JBQ2YsUUFBUSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFO2dCQUNsQyxTQUFTLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRTthQUM5RSxDQUFDO1lBRUYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUM3QyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sS0FBSyxHQUFHO2dCQUNaLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRTtnQkFDdkUsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFO2FBQ3pFLENBQUM7WUFFRixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7WUFDaEYsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7UUFDcEIsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7Z0JBQ2hELEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7Z0JBQ2hELEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7YUFDbEQsQ0FBQztZQUVGLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRTtnQkFDeEIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDOUIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDaEMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNoQyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxnQkFBZ0IsR0FBRztnQkFDdkIsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDckQsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDckQsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTthQUN2RCxDQUFDO1lBRUYsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRTtnQkFDOUIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDNUIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbkMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNyQyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxTQUFTLEdBQUc7Z0JBQ2hCLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUU7Z0JBQ3BELEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUU7YUFDckQsQ0FBQztZQUVGLE1BQU0sYUFBYSxHQUFHLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN0QyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDcEMsTUFBTSxDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLFNBQVMsR0FBRztnQkFDaEIsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRTtnQkFDcEQsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRTthQUNyRCxDQUFDO1lBRUYsTUFBTSxhQUFhLEdBQUcsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3RDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNwQyxNQUFNLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7UUFDcEIsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLE1BQU0sRUFBRSxPQUFPO2dCQUNmLFVBQVUsRUFBRSxNQUFNO2dCQUNsQixLQUFLLEVBQUUsTUFBTTtnQkFDYixPQUFPLEVBQUUsS0FBSztnQkFDZCxTQUFTLEVBQUUsS0FBSzthQUNqQixDQUFDO1lBRUYsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLFVBQVUsR0FBRztnQkFDakIsTUFBTSxFQUFFLE9BQU87Z0JBQ2YsVUFBVSxFQUFFLE1BQU07Z0JBQ2xCLEtBQUssRUFBRSxPQUFPO2dCQUNkLE9BQU8sRUFBRSxJQUFJO2dCQUNiLFNBQVMsRUFBRSxLQUFLO2FBQ2pCLENBQUM7WUFFRixNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sVUFBVSxHQUFHO2dCQUNqQixNQUFNLEVBQUUsT0FBTztnQkFDZixVQUFVLEVBQUUsTUFBTTtnQkFDbEIsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsT0FBTyxFQUFFLElBQUk7Z0JBQ2IsU0FBUyxFQUFFLElBQUk7YUFDaEIsQ0FBQztZQUVGLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQixFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLGNBQWMsR0FBRztnQkFDckIsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDakUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDckUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTthQUNyRSxDQUFDO1lBRUYsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUMvQixNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUN2QyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUNuQyxNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLFdBQVcsR0FBRztnQkFDbEIsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtnQkFDakQsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtnQkFDcEQsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTthQUNqRCxDQUFDO1lBRUYsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFO2dCQUNqQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUNwQyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1FBQ3BCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sWUFBWSxHQUFHO2dCQUNuQixJQUFJLEVBQUUsYUFBYTtnQkFDbkIsTUFBTSxFQUFFLE9BQU87Z0JBQ2YsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMvQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sWUFBWSxHQUFHO2dCQUNuQixJQUFJLEVBQUUsV0FBVztnQkFDakIsTUFBTSxFQUFFLE9BQU87Z0JBQ2YsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sWUFBWSxHQUFHO2dCQUNuQixJQUFJLEVBQUUsa0JBQWtCO2dCQUN4QixVQUFVLEVBQUUsTUFBTTtnQkFDbEIsTUFBTSxFQUFFLE9BQU87Z0JBQ2YsT0FBTyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQVUsQ0FBQzthQUNqQyxDQUFDO1lBRUYsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQixFQUFFLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtZQUNwQixNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixPQUFPLEVBQUUsQ0FBQyxhQUFhLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUM7Z0JBQzVELFdBQVcsRUFBRSxLQUFLO2dCQUNsQixXQUFXLEVBQUUsSUFBSTthQUNsQixDQUFDO1lBRUYsTUFBTSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM1RCxNQUFNLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzlELE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sU0FBUyxHQUFHO2dCQUNoQixRQUFRLEVBQUUsaUJBQWlCO2dCQUMzQixTQUFTLEVBQUUsT0FBTztnQkFDbEIsVUFBVSxFQUFFLEdBQUc7YUFDaEIsQ0FBQztZQUVGLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLGVBQWUsR0FBRztnQkFDdEI7b0JBQ0UsRUFBRSxFQUFFLENBQUM7b0JBQ0wsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7b0JBQ3JCLEtBQUssRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7b0JBQ3pCLFVBQVUsRUFBRSxPQUFPO2lCQUNwQjtnQkFDRDtvQkFDRSxFQUFFLEVBQUUsQ0FBQztvQkFDTCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtvQkFDckIsS0FBSyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztvQkFDekIsVUFBVSxFQUFFLGFBQWE7aUJBQzFCO2FBQ0YsQ0FBQztZQUVGLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtnQkFDbkMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDekMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUM1QyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQixFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDeEQsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDdEIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFO2FBQ2pCLENBQUMsQ0FBQyxDQUFDO1lBRUosTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBQ3JCLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQztZQUVuQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksU0FBUyxFQUFFLENBQUM7Z0JBQ3RELE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDbkQsQ0FBQztZQUVELE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFO2dCQUMvQixFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTthQUNoQyxDQUFDO1lBRUYsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDakMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztZQUMvQixJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUM7WUFDeEIsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLENBQUM7WUFFN0IsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLFNBQWtCLEVBQUUsRUFBRTtnQkFDOUMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUN2QixJQUFJLEdBQUcsR0FBRyxlQUFlLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztvQkFDOUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUNwQyxlQUFlLEdBQUcsR0FBRyxDQUFDO2dCQUN4QixDQUFDO1lBQ0gsQ0FBQyxDQUFDO1lBRUYsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM1QixnQkFBZ0IsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDOUMsQ0FBQztZQUVELE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMveWFueXUvRG93bmxvYWRzL3l5YzMtRGVzaWduLVN5c3RlbS9zcmMvY29sbGFib3JhdGlvbi9fX3Rlc3RzX18vbXVsdGktdXNlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUg5aSa55So5oi35Y2P5L2c5rWL6K+VXG4gKiBAZGVzY3JpcHRpb24g5rWL6K+V5aSa55So5oi35Y2P5L2c5Yqf6IO9XG4gKiBAbW9kdWxlIF9fdGVzdHNfXy9jb2xsYWJvcmF0aW9uL211bHRpLXVzZXIudGVzdFxuICogQGF1dGhvciBZWUPCs1xuICogQHZlcnNpb24gMS4wLjBcbiAqIEBjcmVhdGVkIDIwMjYtMDItMTlcbiAqL1xuXG5kZXNjcmliZSgnTXVsdGktVXNlciBDb2xsYWJvcmF0aW9uIE1vZHVsZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+eUqOaIt+S8muivneeuoeeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5Yib5bu655So5oi35Lya6K+dJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlclNlc3Npb24gPSB7XG4gICAgICAgIHVzZXJJZDogJ3VzZXIxJyxcbiAgICAgICAgdXNlck5hbWU6ICdVc2VyIDEnLFxuICAgICAgICBzZXNzaW9uSWQ6ICdzZXNzaW9uLTEyMycsXG4gICAgICAgIGpvaW5lZEF0OiBEYXRlLm5vdygpLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHVzZXJTZXNzaW9uLnVzZXJJZCkudG9CZSgndXNlcjEnKTtcbiAgICAgIGV4cGVjdCh1c2VyU2Vzc2lvbi51c2VyTmFtZSkudG9CZSgnVXNlciAxJyk7XG4gICAgICBleHBlY3QodXNlclNlc3Npb24uc2Vzc2lvbklkKS50b0JlKCdzZXNzaW9uLTEyMycpO1xuICAgICAgZXhwZWN0KHVzZXJTZXNzaW9uLmpvaW5lZEF0KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpei3n+i4qua0u+i3g+S8muivnScsICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVNlc3Npb25zID0gW1xuICAgICAgICB7IHVzZXJJZDogJ3VzZXIxJywgbGFzdEFjdGl2aXR5OiBEYXRlLm5vdygpIH0sXG4gICAgICAgIHsgdXNlcklkOiAndXNlcjInLCBsYXN0QWN0aXZpdHk6IERhdGUubm93KCkgfSxcbiAgICAgICAgeyB1c2VySWQ6ICd1c2VyMycsIGxhc3RBY3Rpdml0eTogRGF0ZS5ub3coKSB9LFxuICAgICAgXTtcblxuICAgICAgZXhwZWN0KGFjdGl2ZVNlc3Npb25zLmxlbmd0aCkudG9CZSgzKTtcbiAgICAgIGFjdGl2ZVNlc3Npb25zLmZvckVhY2goKHNlc3Npb24pID0+IHtcbiAgICAgICAgZXhwZWN0KHNlc3Npb24udXNlcklkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3Qoc2Vzc2lvbi5sYXN0QWN0aXZpdHkpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbkvJror53otoXml7YnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXNzaW9uID0ge1xuICAgICAgICB1c2VySWQ6ICd1c2VyMScsXG4gICAgICAgIGxhc3RBY3Rpdml0eTogRGF0ZS5ub3coKSAtIDE4MDAwMDAsXG4gICAgICAgIHRpbWVvdXQ6IDkwMDAwMCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGlzRXhwaXJlZCA9IERhdGUubm93KCkgLSBzZXNzaW9uLmxhc3RBY3Rpdml0eSA+IHNlc3Npb24udGltZW91dDtcbiAgICAgIGV4cGVjdChpc0V4cGlyZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflubblj5HnvJbovpEnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaUr+aMgeWkmueUqOaIt+WQjOaXtue8lui+kScsICgpID0+IHtcbiAgICAgIGNvbnN0IGVkaXRvcnMgPSBbXG4gICAgICAgIHsgdXNlcklkOiAndXNlcjEnLCBkb2N1bWVudElkOiAnZG9jMScsIGN1cnNvcjogeyBsaW5lOiAxLCBjb2x1bW46IDEwIH0gfSxcbiAgICAgICAgeyB1c2VySWQ6ICd1c2VyMicsIGRvY3VtZW50SWQ6ICdkb2MxJywgY3Vyc29yOiB7IGxpbmU6IDUsIGNvbHVtbjogMjAgfSB9LFxuICAgICAgICB7IHVzZXJJZDogJ3VzZXIzJywgZG9jdW1lbnRJZDogJ2RvYzEnLCBjdXJzb3I6IHsgbGluZTogMTAsIGNvbHVtbjogNSB9IH0sXG4gICAgICBdO1xuXG4gICAgICBleHBlY3QoZWRpdG9ycy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBlZGl0b3JzLmZvckVhY2goKGVkaXRvcikgPT4ge1xuICAgICAgICBleHBlY3QoZWRpdG9yLmRvY3VtZW50SWQpLnRvQmUoJ2RvYzEnKTtcbiAgICAgICAgZXhwZWN0KGVkaXRvci5jdXJzb3IpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xot5/ouKrnlKjmiLflhYnmoIfkvY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJzb3IgPSB7XG4gICAgICAgIHVzZXJJZDogJ3VzZXIxJyxcbiAgICAgICAgcG9zaXRpb246IHsgbGluZTogMTAsIGNvbHVtbjogMTUgfSxcbiAgICAgICAgc2VsZWN0aW9uOiB7IHN0YXJ0OiB7IGxpbmU6IDEwLCBjb2x1bW46IDE1IH0sIGVuZDogeyBsaW5lOiAxMCwgY29sdW1uOiAyMCB9IH0sXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoY3Vyc29yLnVzZXJJZCkudG9CZSgndXNlcjEnKTtcbiAgICAgIGV4cGVjdChjdXJzb3IucG9zaXRpb24ubGluZSkudG9CZSgxMCk7XG4gICAgICBleHBlY3QoY3Vyc29yLnBvc2l0aW9uLmNvbHVtbikudG9CZSgxNSk7XG4gICAgICBleHBlY3QoY3Vyc29yLnNlbGVjdGlvbi5zdGFydCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjdXJzb3Iuc2VsZWN0aW9uLmVuZCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbnvJbovpHlhrLnqoEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlZGl0cyA9IFtcbiAgICAgICAgeyB1c2VySWQ6ICd1c2VyMScsIG9wZXJhdGlvbjogJ2luc2VydCcsIHBvc2l0aW9uOiAxMCwgY29udGVudDogJ3Rlc3QnIH0sXG4gICAgICAgIHsgdXNlcklkOiAndXNlcjInLCBvcGVyYXRpb246ICdpbnNlcnQnLCBwb3NpdGlvbjogMTAsIGNvbnRlbnQ6ICdvdGhlcicgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGhhc0NvbmZsaWN0ID0gZWRpdHMubGVuZ3RoID4gMSAmJiBlZGl0c1swXS5wb3NpdGlvbiA9PT0gZWRpdHNbMV0ucG9zaXRpb247XG4gICAgICBleHBlY3QoaGFzQ29uZmxpY3QpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflrp7ml7bljY/kvZwnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeW5v+aSreeUqOaIt+aTjeS9nCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBbXG4gICAgICAgIHsgdHlwZTogJ2luc2VydCcsIHVzZXJJZDogJ3VzZXIxJywgZGF0YTogJ2FiYycgfSxcbiAgICAgICAgeyB0eXBlOiAnZGVsZXRlJywgdXNlcklkOiAndXNlcjInLCBkYXRhOiAnZGVmJyB9LFxuICAgICAgICB7IHR5cGU6ICdyZXBsYWNlJywgdXNlcklkOiAndXNlcjMnLCBkYXRhOiAnZ2hpJyB9LFxuICAgICAgXTtcblxuICAgICAgb3BlcmF0aW9ucy5mb3JFYWNoKChvcCkgPT4ge1xuICAgICAgICBleHBlY3Qob3AudHlwZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KG9wLnVzZXJJZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KG9wLmRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xnu7TmiqTmk43kvZzljoblj7InLCAoKSA9PiB7XG4gICAgICBjb25zdCBvcGVyYXRpb25IaXN0b3J5ID0gW1xuICAgICAgICB7IGlkOiAxLCBvcGVyYXRpb246ICdpbnNlcnQnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICAgICAgeyBpZDogMiwgb3BlcmF0aW9uOiAnZGVsZXRlJywgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIHsgaWQ6IDMsIG9wZXJhdGlvbjogJ3JlcGxhY2UnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdChvcGVyYXRpb25IaXN0b3J5Lmxlbmd0aCkudG9CZSgzKTtcbiAgICAgIG9wZXJhdGlvbkhpc3RvcnkuZm9yRWFjaCgob3ApID0+IHtcbiAgICAgICAgZXhwZWN0KG9wLmlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3Qob3Aub3BlcmF0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3Qob3AudGltZXN0YW1wKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB5pON5L2c5pKk6ZSAJywgKCkgPT4ge1xuICAgICAgY29uc3QgdW5kb1N0YWNrID0gW1xuICAgICAgICB7IG9wZXJhdGlvbjogJ2luc2VydCcsIGNvbnRlbnQ6ICdhYmMnLCBwb3NpdGlvbjogMCB9LFxuICAgICAgICB7IG9wZXJhdGlvbjogJ2RlbGV0ZScsIGNvbnRlbnQ6ICdkZWYnLCBwb3NpdGlvbjogMyB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgbGFzdE9wZXJhdGlvbiA9IHVuZG9TdGFjay5wb3AoKTtcbiAgICAgIGV4cGVjdChsYXN0T3BlcmF0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGxhc3RPcGVyYXRpb24/Lm9wZXJhdGlvbikudG9CZSgnZGVsZXRlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB5pON5L2c6YeN5YGaJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVkb1N0YWNrID0gW1xuICAgICAgICB7IG9wZXJhdGlvbjogJ2luc2VydCcsIGNvbnRlbnQ6ICdhYmMnLCBwb3NpdGlvbjogMCB9LFxuICAgICAgICB7IG9wZXJhdGlvbjogJ2RlbGV0ZScsIGNvbnRlbnQ6ICdkZWYnLCBwb3NpdGlvbjogMyB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgbmV4dE9wZXJhdGlvbiA9IHJlZG9TdGFjay5wb3AoKTtcbiAgICAgIGV4cGVjdChuZXh0T3BlcmF0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG5leHRPcGVyYXRpb24/Lm9wZXJhdGlvbikudG9CZSgnZGVsZXRlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfmnYPpmZDnrqHnkIYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaUr+aMgeWPquivu+adg+mZkCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSB7XG4gICAgICAgIHVzZXJJZDogJ3VzZXIxJyxcbiAgICAgICAgZG9jdW1lbnRJZDogJ2RvYzEnLFxuICAgICAgICBsZXZlbDogJ3JlYWQnLFxuICAgICAgICBjYW5FZGl0OiBmYWxzZSxcbiAgICAgICAgY2FuRGVsZXRlOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChwZXJtaXNzaW9uLmxldmVsKS50b0JlKCdyZWFkJyk7XG4gICAgICBleHBlY3QocGVybWlzc2lvbi5jYW5FZGl0KS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChwZXJtaXNzaW9uLmNhbkRlbGV0ZSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB57yW6L6R5p2D6ZmQJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGVybWlzc2lvbiA9IHtcbiAgICAgICAgdXNlcklkOiAndXNlcjInLFxuICAgICAgICBkb2N1bWVudElkOiAnZG9jMScsXG4gICAgICAgIGxldmVsOiAnd3JpdGUnLFxuICAgICAgICBjYW5FZGl0OiB0cnVlLFxuICAgICAgICBjYW5EZWxldGU6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHBlcm1pc3Npb24ubGV2ZWwpLnRvQmUoJ3dyaXRlJyk7XG4gICAgICBleHBlY3QocGVybWlzc2lvbi5jYW5FZGl0KS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHBlcm1pc3Npb24uY2FuRGVsZXRlKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmlK/mjIHnrqHnkIbmnYPpmZAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwZXJtaXNzaW9uID0ge1xuICAgICAgICB1c2VySWQ6ICd1c2VyMycsXG4gICAgICAgIGRvY3VtZW50SWQ6ICdkb2MxJyxcbiAgICAgICAgbGV2ZWw6ICdhZG1pbicsXG4gICAgICAgIGNhbkVkaXQ6IHRydWUsXG4gICAgICAgIGNhbkRlbGV0ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChwZXJtaXNzaW9uLmxldmVsKS50b0JlKCdhZG1pbicpO1xuICAgICAgZXhwZWN0KHBlcm1pc3Npb24uY2FuRWRpdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChwZXJtaXNzaW9uLmNhbkRlbGV0ZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+aWh+aho+eKtuaAgScsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6Lef6Liq5paH5qGj54q25oCBJywgKCkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnRTdGF0ZXMgPSBbXG4gICAgICAgIHsgZG9jdW1lbnRJZDogJ2RvYzEnLCBzdGF0dXM6ICdkcmFmdCcsIGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKSB9LFxuICAgICAgICB7IGRvY3VtZW50SWQ6ICdkb2MyJywgc3RhdHVzOiAncHVibGlzaGVkJywgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIHsgZG9jdW1lbnRJZDogJ2RvYzMnLCBzdGF0dXM6ICdhcmNoaXZlZCcsIGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKSB9LFxuICAgICAgXTtcblxuICAgICAgZG9jdW1lbnRTdGF0ZXMuZm9yRWFjaCgoc3RhdGUpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0YXRlLmRvY3VtZW50SWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChzdGF0ZS5zdGF0dXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChzdGF0ZS5sYXN0TW9kaWZpZWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbnirbmgIHovazmjaInLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2l0aW9ucyA9IFtcbiAgICAgICAgeyBmcm9tOiAnZHJhZnQnLCB0bzogJ3B1Ymxpc2hlZCcsIGFsbG93ZWQ6IHRydWUgfSxcbiAgICAgICAgeyBmcm9tOiAncHVibGlzaGVkJywgdG86ICdhcmNoaXZlZCcsIGFsbG93ZWQ6IHRydWUgfSxcbiAgICAgICAgeyBmcm9tOiAnZHJhZnQnLCB0bzogJ2FyY2hpdmVkJywgYWxsb3dlZDogdHJ1ZSB9LFxuICAgICAgXTtcblxuICAgICAgdHJhbnNpdGlvbnMuZm9yRWFjaCgodHJhbnNpdGlvbikgPT4ge1xuICAgICAgICBleHBlY3QodHJhbnNpdGlvbi5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QodHJhbnNpdGlvbi50bykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHRyYW5zaXRpb24uYWxsb3dlZCkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5Y2P5L2c6YCa55+lJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XpgJrnn6XnlKjmiLfliqDlhaUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBub3RpZmljYXRpb24gPSB7XG4gICAgICAgIHR5cGU6ICd1c2VyX2pvaW5lZCcsXG4gICAgICAgIHVzZXJJZDogJ3VzZXIxJyxcbiAgICAgICAgdXNlck5hbWU6ICdVc2VyIDEnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qobm90aWZpY2F0aW9uLnR5cGUpLnRvQmUoJ3VzZXJfam9pbmVkJyk7XG4gICAgICBleHBlY3Qobm90aWZpY2F0aW9uLnVzZXJJZCkudG9CZSgndXNlcjEnKTtcbiAgICAgIGV4cGVjdChub3RpZmljYXRpb24udXNlck5hbWUpLnRvQmUoJ1VzZXIgMScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpemAmuefpeeUqOaIt+emu+W8gCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHtcbiAgICAgICAgdHlwZTogJ3VzZXJfbGVmdCcsXG4gICAgICAgIHVzZXJJZDogJ3VzZXIyJyxcbiAgICAgICAgdXNlck5hbWU6ICdVc2VyIDInLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qobm90aWZpY2F0aW9uLnR5cGUpLnRvQmUoJ3VzZXJfbGVmdCcpO1xuICAgICAgZXhwZWN0KG5vdGlmaWNhdGlvbi51c2VySWQpLnRvQmUoJ3VzZXIyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6YCa55+l5paH5qGj5pu05pawJywgKCkgPT4ge1xuICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0ge1xuICAgICAgICB0eXBlOiAnZG9jdW1lbnRfdXBkYXRlZCcsXG4gICAgICAgIGRvY3VtZW50SWQ6ICdkb2MxJyxcbiAgICAgICAgdXNlcklkOiAndXNlcjEnLFxuICAgICAgICBjaGFuZ2VzOiBbJ2NvbnRlbnQnLCAnbWV0YWRhdGEnXSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChub3RpZmljYXRpb24udHlwZSkudG9CZSgnZG9jdW1lbnRfdXBkYXRlZCcpO1xuICAgICAgZXhwZWN0KG5vdGlmaWNhdGlvbi5kb2N1bWVudElkKS50b0JlKCdkb2MxJyk7XG4gICAgICBleHBlY3Qobm90aWZpY2F0aW9uLmNoYW5nZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflhrLnqoHop6PlhrMnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaPkOS+m+WGsueqgeino+WGs+mAiemhuScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZsaWN0UmVzb2x1dGlvbiA9IHtcbiAgICAgICAgb3B0aW9uczogWydhY2NlcHRfbWluZScsICdhY2NlcHRfdGhlaXJzJywgJ21lcmdlJywgJ21hbnVhbCddLFxuICAgICAgICBhdXRvUmVzb2x2ZTogZmFsc2UsXG4gICAgICAgIG5vdGlmeVVzZXJzOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGNvbmZsaWN0UmVzb2x1dGlvbi5vcHRpb25zKS50b0NvbnRhaW4oJ2FjY2VwdF9taW5lJyk7XG4gICAgICBleHBlY3QoY29uZmxpY3RSZXNvbHV0aW9uLm9wdGlvbnMpLnRvQ29udGFpbignYWNjZXB0X3RoZWlycycpO1xuICAgICAgZXhwZWN0KGNvbmZsaWN0UmVzb2x1dGlvbi5vcHRpb25zKS50b0NvbnRhaW4oJ21lcmdlJyk7XG4gICAgICBleHBlY3QoY29uZmxpY3RSZXNvbHV0aW9uLm9wdGlvbnMpLnRvQ29udGFpbignbWFudWFsJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB6Ieq5Yqo5ZCI5bm2JywgKCkgPT4ge1xuICAgICAgY29uc3QgYXV0b01lcmdlID0ge1xuICAgICAgICBzdHJhdGVneTogJ2xhc3Qtd3JpdGUtd2lucycsXG4gICAgICAgIGFsZ29yaXRobTogJ2RpZmYzJyxcbiAgICAgICAgY29uZmlkZW5jZTogMC44LFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGF1dG9NZXJnZS5zdHJhdGVneSkudG9CZSgnbGFzdC13cml0ZS13aW5zJyk7XG4gICAgICBleHBlY3QoYXV0b01lcmdlLmFsZ29yaXRobSkudG9CZSgnZGlmZjMnKTtcbiAgICAgIGV4cGVjdChhdXRvTWVyZ2UuY29uZmlkZW5jZSkudG9CZSgwLjgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeiusOW9leWGsueqgeWOhuWPsicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZsaWN0SGlzdG9yeSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB1c2VyczogWyd1c2VyMScsICd1c2VyMiddLFxuICAgICAgICAgIHJlc29sdXRpb246ICdtZXJnZScsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogMixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgdXNlcnM6IFsndXNlcjInLCAndXNlcjMnXSxcbiAgICAgICAgICByZXNvbHV0aW9uOiAnYWNjZXB0X21pbmUnLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uZmxpY3RIaXN0b3J5LmZvckVhY2goKGNvbmZsaWN0KSA9PiB7XG4gICAgICAgIGV4cGVjdChjb25mbGljdC5pZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNvbmZsaWN0LnRpbWVzdGFtcCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNvbmZsaWN0LnVzZXJzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoY29uZmxpY3QucmVzb2x1dGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5oCn6IO95LyY5YyWJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xmibnph4/lpITnkIbmk43kvZwnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sIChfLCBpKSA9PiAoe1xuICAgICAgICB0eXBlOiAnaW5zZXJ0JyxcbiAgICAgICAgdXNlcklkOiBgdXNlciR7aSAlIDN9YCxcbiAgICAgICAgZGF0YTogYGRhdGEke2l9YCxcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgICBjb25zdCBiYXRjaGVzID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3BlcmF0aW9ucy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgIGJhdGNoZXMucHVzaChvcGVyYXRpb25zLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpKTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGJhdGNoZXMubGVuZ3RoKS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChiYXRjaGVzWzBdLmxlbmd0aCkudG9CZSgxMCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Y6L57yp5pON5L2c5pWw5o2uJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IFtcbiAgICAgICAgeyB0eXBlOiAnaW5zZXJ0JywgZGF0YTogJ2FiYycgfSxcbiAgICAgICAgeyB0eXBlOiAnZGVsZXRlJywgZGF0YTogJ2RlZicgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGNvbXByZXNzZWQgPSBKU09OLnN0cmluZ2lmeShvcGVyYXRpb25zKTtcbiAgICAgIGV4cGVjdChjb21wcmVzc2VkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbXByZXNzZWQubGVuZ3RoKS50b0JlTGVzc1RoYW4oMTAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6IqC5rWB6auY6aKR5pON5L2cJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGhyb3R0bGVkT3BlcmF0aW9ucyA9IFtdO1xuICAgICAgbGV0IGxhc3RQcm9jZXNzVGltZSA9IDA7XG4gICAgICBjb25zdCB0aHJvdHRsZUludGVydmFsID0gMTAwO1xuXG4gICAgICBjb25zdCBwcm9jZXNzT3BlcmF0aW9uID0gKG9wZXJhdGlvbjogdW5rbm93bikgPT4ge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAobm93IC0gbGFzdFByb2Nlc3NUaW1lID49IHRocm90dGxlSW50ZXJ2YWwpIHtcbiAgICAgICAgICB0aHJvdHRsZWRPcGVyYXRpb25zLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgICAgICBsYXN0UHJvY2Vzc1RpbWUgPSBub3c7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBwcm9jZXNzT3BlcmF0aW9uKHsgdHlwZTogJ3Rlc3QnLCBkYXRhOiBpIH0pO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QodGhyb3R0bGVkT3BlcmF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdCh0aHJvdHRsZWRPcGVyYXRpb25zLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=