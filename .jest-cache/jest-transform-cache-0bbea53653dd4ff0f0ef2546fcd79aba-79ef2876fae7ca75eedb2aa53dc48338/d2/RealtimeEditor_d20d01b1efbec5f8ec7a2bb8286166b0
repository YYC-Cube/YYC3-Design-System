886bd3d12ea1c1a1d194e331ebcd5df2
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RealtimeEditor = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * @file 实时编辑器组件
 * @description 提供用户界面来实时编辑设计令牌
 * @component RealtimeEditor
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-18
 */
const react_1 = require("react");
const Card_1 = require("./Card");
const Button_1 = require("./Button");
const Input_1 = require("./Input");
const Badge_1 = require("./Badge");
const useTheme_1 = require("../theme/useTheme");
const realtime_editor_1 = require("../editor/realtime-editor");
const RealtimeEditor = ({ initialTokens = {}, onSave, userId, className = '', }) => {
    const { tokens: themeTokens } = (0, useTheme_1.useTheme)();
    const [editor] = (0, react_1.useState)(() => (0, realtime_editor_1.createRealtimeEditor)(initialTokens, userId));
    const [state, setState] = (0, react_1.useState)(editor.getState());
    const [selectedCategory, setSelectedCategory] = (0, react_1.useState)('all');
    const [searchQuery, setSearchQuery] = (0, react_1.useState)('');
    const [editingToken, setEditingToken] = (0, react_1.useState)(null);
    const [editingValue, setEditingValue] = (0, react_1.useState)('');
    const [newTokenName, setNewTokenName] = (0, react_1.useState)('');
    const [newTokenValue, setNewTokenValue] = (0, react_1.useState)('');
    (0, react_1.useEffect)(() => {
        const unsubscribe = editor.subscribe(setState);
        return unsubscribe;
    }, [editor]);
    const handleUpdateToken = (0, react_1.useCallback)((tokenName, value) => {
        const validation = editor.validateToken(tokenName);
        const valueValidation = editor.validateValue(value);
        if (!validation.valid) {
            alert(validation.error);
            return;
        }
        if (!valueValidation.valid) {
            alert(valueValidation.error);
            return;
        }
        editor.updateToken(tokenName, value);
    }, [editor]);
    const handleDeleteToken = (0, react_1.useCallback)((tokenName) => {
        if (confirm(`确定要删除令牌 ${tokenName} 吗？`)) {
            editor.deleteToken(tokenName);
        }
    }, [editor]);
    const handleAddToken = (0, react_1.useCallback)(() => {
        const validation = editor.validateToken(newTokenName);
        const valueValidation = editor.validateValue(newTokenValue);
        if (!validation.valid) {
            alert(validation.error);
            return;
        }
        if (!valueValidation.valid) {
            alert(valueValidation.error);
            return;
        }
        editor.addToken(newTokenName, newTokenValue);
        setNewTokenName('');
        setNewTokenValue('');
    }, [editor, newTokenName, newTokenValue]);
    const handleUndo = (0, react_1.useCallback)(() => {
        editor.undo();
    }, [editor]);
    const handleSave = (0, react_1.useCallback)(() => {
        editor.save();
        if (onSave) {
            onSave(editor.getTokens());
        }
    }, [editor, onSave]);
    const handleDiscard = (0, react_1.useCallback)(() => {
        if (confirm('确定要放弃所有更改吗？')) {
            editor.discardChanges();
        }
    }, [editor]);
    const categories = ['all', 'color', 'spacing', 'font', 'animation', 'transition'];
    const filterTokens = () => {
        let filtered = Object.entries(state.tokens);
        if (selectedCategory !== 'all') {
            filtered = filtered.filter(([name]) => name.includes(selectedCategory));
        }
        if (searchQuery) {
            const query = searchQuery.toLowerCase();
            filtered = filtered.filter(([name]) => name.toLowerCase().includes(query));
        }
        return filtered;
    };
    const filteredTokens = filterTokens();
    return ((0, jsx_runtime_1.jsxs)(Card_1.Card, { className: className, children: [(0, jsx_runtime_1.jsx)(Card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)(Card_1.CardTitle, { children: "\u5B9E\u65F6\u7F16\u8F91\u5668" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [state.isDirty && ((0, jsx_runtime_1.jsx)(Badge_1.Badge, { style: { background: '#f59e0b', color: '#ffffff' }, children: "\u672A\u4FDD\u5B58" })), state.lastSaved && ((0, jsx_runtime_1.jsxs)(Badge_1.Badge, { variant: "outline", style: { borderColor: themeTokens['color.border'] }, children: ["\u5DF2\u4FDD\u5B58 ", new Date(state.lastSaved).toLocaleTimeString()] }))] })] }) }), (0, jsx_runtime_1.jsxs)(Card_1.CardContent, { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)(Button_1.Button, { onClick: handleUndo, disabled: !editor.canUndo(), children: "\u64A4\u9500" }), (0, jsx_runtime_1.jsx)(Button_1.Button, { onClick: handleSave, disabled: !state.isDirty, children: "\u4FDD\u5B58" }), (0, jsx_runtime_1.jsx)(Button_1.Button, { variant: "outline", onClick: handleDiscard, disabled: !state.isDirty, children: "\u653E\u5F03\u66F4\u6539" })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium mb-2", style: { color: themeTokens['color.foreground'] }, children: "\u641C\u7D22" }), (0, jsx_runtime_1.jsx)(Input_1.Input, { type: "text", value: searchQuery, onChange: setSearchQuery, placeholder: "\u641C\u7D22\u4EE4\u724C..." })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium mb-2", style: { color: themeTokens['color.foreground'] }, children: "\u7C7B\u522B" }), (0, jsx_runtime_1.jsx)("div", { className: "flex flex-wrap gap-2", children: categories.map((category) => ((0, jsx_runtime_1.jsx)(Badge_1.Badge, { variant: selectedCategory === category ? 'default' : 'outline', style: {
                                        cursor: 'pointer',
                                        background: selectedCategory === category
                                            ? themeTokens['color.primary']
                                            : 'transparent',
                                        color: selectedCategory === category
                                            ? '#ffffff'
                                            : themeTokens['color.foreground'],
                                        borderColor: themeTokens['color.primary'],
                                    }, onClick: () => setSelectedCategory(category), children: category === 'all' ? '全部' : category }, category))) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium mb-2", style: { color: themeTokens['color.foreground'] }, children: "\u6DFB\u52A0\u65B0\u4EE4\u724C" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)(Input_1.Input, { type: "text", value: newTokenName, onChange: setNewTokenName, placeholder: "\u4EE4\u724C\u540D\u79F0 (\u5982: color.primary)", className: "flex-1" }), (0, jsx_runtime_1.jsx)(Input_1.Input, { type: "text", value: newTokenValue, onChange: setNewTokenValue, placeholder: "\u4EE4\u724C\u503C (\u5982: #d45a5f)", className: "flex-1" }), (0, jsx_runtime_1.jsx)(Button_1.Button, { onClick: handleAddToken, disabled: !newTokenName || !newTokenValue, children: "\u6DFB\u52A0" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)("h3", { className: "text-sm font-medium", style: { color: themeTokens['color.foreground'] }, children: ["\u4EE4\u724C (", filteredTokens.length, ")"] }), (0, jsx_runtime_1.jsx)("div", { className: "space-y-2", children: filteredTokens.map(([name, value]) => ((0, jsx_runtime_1.jsxs)("div", { className: "p-4 rounded-lg", style: {
                                        background: themeTokens['color.card'],
                                        border: `1px solid ${themeTokens['color.border']}`,
                                    }, children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-sm font-medium", style: { color: themeTokens['color.foreground'] }, children: name }), name.includes('color') &&
                                                            typeof value === 'string' &&
                                                            value.startsWith('#') && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 mt-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-4 h-4 rounded", style: { background: value } }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs", style: { color: themeTokens['color.muted-foreground'] }, children: value })] }))] }), (0, jsx_runtime_1.jsx)(Button_1.Button, { variant: "outline", size: "sm", onClick: () => handleDeleteToken(name), children: "\u5220\u9664" })] }), editingToken === name ? ((0, jsx_runtime_1.jsx)("div", { className: "flex gap-2", children: (0, jsx_runtime_1.jsx)(Input_1.Input, { type: "text", value: editingValue, onChange: setEditingValue, onBlur: () => {
                                                    handleUpdateToken(name, editingValue);
                                                    setEditingToken(null);
                                                }, onKeyDown: (e) => {
                                                    if (e.key === 'Enter') {
                                                        handleUpdateToken(name, editingValue);
                                                        setEditingToken(null);
                                                    }
                                                    else if (e.key === 'Escape') {
                                                        setEditingToken(null);
                                                    }
                                                }, autoFocus: true, className: "flex-1" }) })) : ((0, jsx_runtime_1.jsx)("div", { className: "p-2 rounded cursor-pointer", style: {
                                                background: themeTokens['color.background'],
                                                color: themeTokens['color.foreground'],
                                            }, onClick: () => setEditingToken(name), children: String(value) }))] }, name))) })] }), state.changes.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("h3", { className: "text-sm font-medium mb-2", style: { color: themeTokens['color.foreground'] }, children: ["\u66F4\u6539\u5386\u53F2 (", state.changes.length, ")"] }), (0, jsx_runtime_1.jsx)("div", { className: "space-y-2 max-h-60 overflow-y-auto", children: state.changes
                                    .slice()
                                    .reverse()
                                    .map((change, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "p-3 rounded", style: {
                                        background: themeTokens['color.card'],
                                        border: `1px solid ${themeTokens['color.border']}`,
                                    }, children: [(0, jsx_runtime_1.jsx)("div", { className: "text-sm font-medium", style: { color: themeTokens['color.foreground'] }, children: change.tokenName }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 mt-1", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-xs", style: { color: themeTokens['color.muted-foreground'] }, children: change.oldValue !== undefined ? String(change.oldValue) : '(空)' }), (0, jsx_runtime_1.jsx)("span", { style: { color: themeTokens['color.foreground'] }, children: "\u2192" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs", style: { color: themeTokens['color.muted-foreground'] }, children: change.newValue !== undefined ? String(change.newValue) : '(删除)' })] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs mt-1", style: { color: themeTokens['color.muted-foreground'] }, children: new Date(change.timestamp).toLocaleString() })] }, index))) })] }))] })] }));
};
exports.RealtimeEditor = RealtimeEditor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvUmVhbHRpbWVFZGl0b3IudHN4IiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7OztHQU9HO0FBRUgsaUNBQWdFO0FBQ2hFLGlDQUFrRTtBQUNsRSxxQ0FBa0M7QUFDbEMsbUNBQWdDO0FBQ2hDLG1DQUFnQztBQUNoQyxnREFBNkM7QUFDN0MsK0RBQThFO0FBVXZFLE1BQU0sY0FBYyxHQUFrQyxDQUFDLEVBQzVELGFBQWEsR0FBRyxFQUFFLEVBQ2xCLE1BQU0sRUFDTixNQUFNLEVBQ04sU0FBUyxHQUFHLEVBQUUsR0FDZixFQUFFLEVBQUU7SUFDSCxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxHQUFHLElBQUEsbUJBQVEsR0FBRSxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsR0FBRyxFQUFFLENBQUMsSUFBQSxzQ0FBb0IsRUFBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUM3RSxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBYyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUNuRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVMsS0FBSyxDQUFDLENBQUM7SUFDeEUsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkQsTUFBTSxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWdCLElBQUksQ0FBQyxDQUFDO0lBQ3RFLE1BQU0sQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLEdB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RSxLQUFLLEVBQUUsV0FBVyxDQUFDLHdCQUF3QixDQUFXLEVBQUUsWUFFaEUsTUFBTSxDQUFDLFFBQVEsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FDM0QsRUFDUCxpQ0FBTSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDLGtCQUFrQixDQUFXLEVBQUUsdUJBQVUsRUFDM0UsaUNBQ0UsU0FBUyxFQUFDLFNBQVMsRUFDbkIsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBVyxFQUFFLFlBRWhFLE1BQU0sQ0FBQyxRQUFRLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQzVELElBQ0gsRUFDTixnQ0FDRSxTQUFTLEVBQUMsY0FBYyxFQUN4QixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDLHdCQUF3QixDQUFXLEVBQUUsWUFFaEUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxHQUN4QyxLQWpDRCxLQUFLLENBa0NOLENBQ1AsQ0FBQyxHQUNBLElBQ0YsQ0FDUCxJQUNXLElBQ1QsQ0FDUixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBL1ZXLFFBQUEsY0FBYyxrQkErVnpCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9jb21wb25lbnRzL1JlYWx0aW1lRWRpdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIOWunuaXtue8lui+keWZqOe7hOS7tlxuICogQGRlc2NyaXB0aW9uIOaPkOS+m+eUqOaIt+eVjOmdouadpeWunuaXtue8lui+keiuvuiuoeS7pOeJjFxuICogQGNvbXBvbmVudCBSZWFsdGltZUVkaXRvclxuICogQGF1dGhvciBZWUPCs1xuICogQHZlcnNpb24gMS4wLjBcbiAqIEBjcmVhdGVkIDIwMjYtMDItMThcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnLi9DYXJkJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4vQnV0dG9uJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gJy4vQmFkZ2UnO1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICcuLi90aGVtZS91c2VUaGVtZSc7XG5pbXBvcnQgeyBjcmVhdGVSZWFsdGltZUVkaXRvciwgRWRpdG9yU3RhdGUgfSBmcm9tICcuLi9lZGl0b3IvcmVhbHRpbWUtZWRpdG9yJztcbmltcG9ydCB7IERlc2lnblRva2VucyB9IGZyb20gJy4uLy4uL3R5cGVzL3Rva2Vucyc7XG5cbmludGVyZmFjZSBSZWFsdGltZUVkaXRvclByb3BzIHtcbiAgaW5pdGlhbFRva2Vucz86IERlc2lnblRva2VucztcbiAgb25TYXZlPzogKHRva2VuczogRGVzaWduVG9rZW5zKSA9PiB2b2lkO1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IFJlYWx0aW1lRWRpdG9yOiBSZWFjdC5GQzxSZWFsdGltZUVkaXRvclByb3BzPiA9ICh7XG4gIGluaXRpYWxUb2tlbnMgPSB7fSxcbiAgb25TYXZlLFxuICB1c2VySWQsXG4gIGNsYXNzTmFtZSA9ICcnLFxufSkgPT4ge1xuICBjb25zdCB7IHRva2VuczogdGhlbWVUb2tlbnMgfSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IFtlZGl0b3JdID0gdXNlU3RhdGUoKCkgPT4gY3JlYXRlUmVhbHRpbWVFZGl0b3IoaW5pdGlhbFRva2VucywgdXNlcklkKSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8RWRpdG9yU3RhdGU+KGVkaXRvci5nZXRTdGF0ZSgpKTtcbiAgY29uc3QgW3NlbGVjdGVkQ2F0ZWdvcnksIHNldFNlbGVjdGVkQ2F0ZWdvcnldID0gdXNlU3RhdGU8c3RyaW5nPignYWxsJyk7XG4gIGNvbnN0IFtzZWFyY2hRdWVyeSwgc2V0U2VhcmNoUXVlcnldID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZWRpdGluZ1Rva2VuLCBzZXRFZGl0aW5nVG9rZW5dID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtlZGl0aW5nVmFsdWUsIHNldEVkaXRpbmdWYWx1ZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtuZXdUb2tlbk5hbWUsIHNldE5ld1Rva2VuTmFtZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtuZXdUb2tlblZhbHVlLCBzZXROZXdUb2tlblZhbHVlXSA9IHVzZVN0YXRlKCcnKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gZWRpdG9yLnN1YnNjcmliZShzZXRTdGF0ZSk7XG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9LCBbZWRpdG9yXSk7XG5cbiAgY29uc3QgaGFuZGxlVXBkYXRlVG9rZW4gPSB1c2VDYWxsYmFjayhcbiAgICAodG9rZW5OYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBlZGl0b3IudmFsaWRhdGVUb2tlbih0b2tlbk5hbWUpO1xuICAgICAgY29uc3QgdmFsdWVWYWxpZGF0aW9uID0gZWRpdG9yLnZhbGlkYXRlVmFsdWUodmFsdWUpO1xuXG4gICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgYWxlcnQodmFsaWRhdGlvbi5lcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF2YWx1ZVZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgYWxlcnQodmFsdWVWYWxpZGF0aW9uLmVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBlZGl0b3IudXBkYXRlVG9rZW4odG9rZW5OYW1lLCB2YWx1ZSk7XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZURlbGV0ZVRva2VuID0gdXNlQ2FsbGJhY2soXG4gICAgKHRva2VuTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk5Luk54mMICR7dG9rZW5OYW1lfSDlkJfvvJ9gKSkge1xuICAgICAgICBlZGl0b3IuZGVsZXRlVG9rZW4odG9rZW5OYW1lKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlQWRkVG9rZW4gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IGVkaXRvci52YWxpZGF0ZVRva2VuKG5ld1Rva2VuTmFtZSk7XG4gICAgY29uc3QgdmFsdWVWYWxpZGF0aW9uID0gZWRpdG9yLnZhbGlkYXRlVmFsdWUobmV3VG9rZW5WYWx1ZSk7XG5cbiAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgIGFsZXJ0KHZhbGlkYXRpb24uZXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdmFsdWVWYWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICBhbGVydCh2YWx1ZVZhbGlkYXRpb24uZXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVkaXRvci5hZGRUb2tlbihuZXdUb2tlbk5hbWUsIG5ld1Rva2VuVmFsdWUpO1xuICAgIHNldE5ld1Rva2VuTmFtZSgnJyk7XG4gICAgc2V0TmV3VG9rZW5WYWx1ZSgnJyk7XG4gIH0sIFtlZGl0b3IsIG5ld1Rva2VuTmFtZSwgbmV3VG9rZW5WYWx1ZV0pO1xuXG4gIGNvbnN0IGhhbmRsZVVuZG8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZWRpdG9yLnVuZG8oKTtcbiAgfSwgW2VkaXRvcl0pO1xuXG4gIGNvbnN0IGhhbmRsZVNhdmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZWRpdG9yLnNhdmUoKTtcbiAgICBpZiAob25TYXZlKSB7XG4gICAgICBvblNhdmUoZWRpdG9yLmdldFRva2VucygpKTtcbiAgICB9XG4gIH0sIFtlZGl0b3IsIG9uU2F2ZV0pO1xuXG4gIGNvbnN0IGhhbmRsZURpc2NhcmQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGNvbmZpcm0oJ+ehruWumuimgeaUvuW8g+aJgOacieabtOaUueWQl++8nycpKSB7XG4gICAgICBlZGl0b3IuZGlzY2FyZENoYW5nZXMoKTtcbiAgICB9XG4gIH0sIFtlZGl0b3JdKTtcblxuICBjb25zdCBjYXRlZ29yaWVzID0gWydhbGwnLCAnY29sb3InLCAnc3BhY2luZycsICdmb250JywgJ2FuaW1hdGlvbicsICd0cmFuc2l0aW9uJ107XG5cbiAgY29uc3QgZmlsdGVyVG9rZW5zID0gKCkgPT4ge1xuICAgIGxldCBmaWx0ZXJlZCA9IE9iamVjdC5lbnRyaWVzKHN0YXRlLnRva2Vucyk7XG5cbiAgICBpZiAoc2VsZWN0ZWRDYXRlZ29yeSAhPT0gJ2FsbCcpIHtcbiAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQuZmlsdGVyKChbbmFtZV0pID0+IG5hbWUuaW5jbHVkZXMoc2VsZWN0ZWRDYXRlZ29yeSkpO1xuICAgIH1cblxuICAgIGlmIChzZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSBzZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIoKFtuYW1lXSkgPT4gbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcmVkO1xuICB9O1xuXG4gIGNvbnN0IGZpbHRlcmVkVG9rZW5zID0gZmlsdGVyVG9rZW5zKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2FyZCBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICA8Q2FyZFRpdGxlPuWunuaXtue8lui+keWZqDwvQ2FyZFRpdGxlPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAge3N0YXRlLmlzRGlydHkgJiYgKFxuICAgICAgICAgICAgICA8QmFkZ2Ugc3R5bGU9e3sgYmFja2dyb3VuZDogJyNmNTllMGInLCBjb2xvcjogJyNmZmZmZmYnIH19PuacquS/neWtmDwvQmFkZ2U+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3N0YXRlLmxhc3RTYXZlZCAmJiAoXG4gICAgICAgICAgICAgIDxCYWRnZVxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBib3JkZXJDb2xvcjogdGhlbWVUb2tlbnNbJ2NvbG9yLmJvcmRlciddIGFzIHN0cmluZyB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAg5bey5L+d5a2YIHtuZXcgRGF0ZShzdGF0ZS5sYXN0U2F2ZWQpLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlVW5kb30gZGlzYWJsZWQ9eyFlZGl0b3IuY2FuVW5kbygpfT5cbiAgICAgICAgICAgIOaSpOmUgFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlU2F2ZX0gZGlzYWJsZWQ9eyFzdGF0ZS5pc0RpcnR5fT5cbiAgICAgICAgICAgIOS/neWtmFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBvbkNsaWNrPXtoYW5kbGVEaXNjYXJkfSBkaXNhYmxlZD17IXN0YXRlLmlzRGlydHl9PlxuICAgICAgICAgICAg5pS+5byD5pu05pS5XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTJcIlxuICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IHRoZW1lVG9rZW5zWydjb2xvci5mb3JlZ3JvdW5kJ10gYXMgc3RyaW5nIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAg5pCc57SiXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hRdWVyeX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtzZXRTZWFyY2hRdWVyeX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi5pCc57Si5Luk54mMLi4uXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSBtYi0yXCJcbiAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiB0aGVtZVRva2Vuc1snY29sb3IuZm9yZWdyb3VuZCddIGFzIHN0cmluZyB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIOexu+WIq1xuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICAgICAge2NhdGVnb3JpZXMubWFwKChjYXRlZ29yeSkgPT4gKFxuICAgICAgICAgICAgICA8QmFkZ2VcbiAgICAgICAgICAgICAgICBrZXk9e2NhdGVnb3J5fVxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3NlbGVjdGVkQ2F0ZWdvcnkgPT09IGNhdGVnb3J5ID8gJ2RlZmF1bHQnIDogJ291dGxpbmUnfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPT09IGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgICAgICAgPyAodGhlbWVUb2tlbnNbJ2NvbG9yLnByaW1hcnknXSBhcyBzdHJpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICAgY29sb3I6XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPT09IGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgICAgICAgPyAnI2ZmZmZmZidcbiAgICAgICAgICAgICAgICAgICAgICA6ICh0aGVtZVRva2Vuc1snY29sb3IuZm9yZWdyb3VuZCddIGFzIHN0cmluZyksXG4gICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogdGhlbWVUb2tlbnNbJ2NvbG9yLnByaW1hcnknXSBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZENhdGVnb3J5KGNhdGVnb3J5KX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtjYXRlZ29yeSA9PT0gJ2FsbCcgPyAn5YWo6YOoJyA6IGNhdGVnb3J5fVxuICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTJcIlxuICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IHRoZW1lVG9rZW5zWydjb2xvci5mb3JlZ3JvdW5kJ10gYXMgc3RyaW5nIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAg5re75Yqg5paw5Luk54mMXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtuZXdUb2tlbk5hbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtzZXROZXdUb2tlbk5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi5Luk54mM5ZCN56ewICjlpoI6IGNvbG9yLnByaW1hcnkpXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICB2YWx1ZT17bmV3VG9rZW5WYWx1ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3NldE5ld1Rva2VuVmFsdWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi5Luk54mM5YC8ICjlpoI6ICNkNDVhNWYpXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUFkZFRva2VufSBkaXNhYmxlZD17IW5ld1Rva2VuTmFtZSB8fCAhbmV3VG9rZW5WYWx1ZX0+XG4gICAgICAgICAgICAgIOa3u+WKoFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgPGgzXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiB0aGVtZVRva2Vuc1snY29sb3IuZm9yZWdyb3VuZCddIGFzIHN0cmluZyB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIOS7pOeJjCAoe2ZpbHRlcmVkVG9rZW5zLmxlbmd0aH0pXG4gICAgICAgICAgPC9oMz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAge2ZpbHRlcmVkVG9rZW5zLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtuYW1lfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtNCByb3VuZGVkLWxnXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdGhlbWVUb2tlbnNbJ2NvbG9yLmNhcmQnXSBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZVRva2Vuc1snY29sb3IuYm9yZGVyJ10gYXMgc3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogdGhlbWVUb2tlbnNbJ2NvbG9yLmZvcmVncm91bmQnXSBhcyBzdHJpbmcgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtuYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge25hbWUuaW5jbHVkZXMoJ2NvbG9yJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUuc3RhcnRzV2l0aCgnIycpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZFwiIHN0eWxlPXt7IGJhY2tncm91bmQ6IHZhbHVlIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IHRoZW1lVG9rZW5zWydjb2xvci5tdXRlZC1mb3JlZ3JvdW5kJ10gYXMgc3RyaW5nIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBzaXplPVwic21cIiBvbkNsaWNrPXsoKSA9PiBoYW5kbGVEZWxldGVUb2tlbihuYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIOWIoOmZpFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge2VkaXRpbmdUb2tlbiA9PT0gbmFtZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2VkaXRpbmdWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17c2V0RWRpdGluZ1ZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQmx1cj17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVXBkYXRlVG9rZW4obmFtZSwgZWRpdGluZ1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVkaXRpbmdUb2tlbihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVVcGRhdGVUb2tlbihuYW1lLCBlZGl0aW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFZGl0aW5nVG9rZW4obnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFZGl0aW5nVG9rZW4obnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTFcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHJvdW5kZWQgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRoZW1lVG9rZW5zWydjb2xvci5iYWNrZ3JvdW5kJ10gYXMgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGVtZVRva2Vuc1snY29sb3IuZm9yZWdyb3VuZCddIGFzIHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RWRpdGluZ1Rva2VuKG5hbWUpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7U3RyaW5nKHZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtzdGF0ZS5jaGFuZ2VzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDNcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0yXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IHRoZW1lVG9rZW5zWydjb2xvci5mb3JlZ3JvdW5kJ10gYXMgc3RyaW5nIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIOabtOaUueWOhuWPsiAoe3N0YXRlLmNoYW5nZXMubGVuZ3RofSlcbiAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiBtYXgtaC02MCBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgICAge3N0YXRlLmNoYW5nZXNcbiAgICAgICAgICAgICAgICAuc2xpY2UoKVxuICAgICAgICAgICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgICAgICAgICAubWFwKChjaGFuZ2UsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMyByb3VuZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0aGVtZVRva2Vuc1snY29sb3IuY2FyZCddIGFzIHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZVRva2Vuc1snY29sb3IuYm9yZGVyJ10gYXMgc3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogdGhlbWVUb2tlbnNbJ2NvbG9yLmZvcmVncm91bmQnXSBhcyBzdHJpbmcgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtjaGFuZ2UudG9rZW5OYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IHRoZW1lVG9rZW5zWydjb2xvci5tdXRlZC1mb3JlZ3JvdW5kJ10gYXMgc3RyaW5nIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2NoYW5nZS5vbGRWYWx1ZSAhPT0gdW5kZWZpbmVkID8gU3RyaW5nKGNoYW5nZS5vbGRWYWx1ZSkgOiAnKOepuiknfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBjb2xvcjogdGhlbWVUb2tlbnNbJ2NvbG9yLmZvcmVncm91bmQnXSBhcyBzdHJpbmcgfX0+4oaSPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiB0aGVtZVRva2Vuc1snY29sb3IubXV0ZWQtZm9yZWdyb3VuZCddIGFzIHN0cmluZyB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjaGFuZ2UubmV3VmFsdWUgIT09IHVuZGVmaW5lZCA/IFN0cmluZyhjaGFuZ2UubmV3VmFsdWUpIDogJyjliKDpmaQpJ31cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyBtdC0xXCJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogdGhlbWVUb2tlbnNbJ2NvbG9yLm11dGVkLWZvcmVncm91bmQnXSBhcyBzdHJpbmcgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtuZXcgRGF0ZShjaGFuZ2UudGltZXN0YW1wKS50b0xvY2FsZVN0cmluZygpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L0NhcmRDb250ZW50PlxuICAgIDwvQ2FyZD5cbiAgKTtcbn07XG4iXSwidmVyc2lvbiI6M30=