{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/collaboration/__tests__/multi-user.test.ts","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/collaboration/__tests__/multi-user.test.ts"],"sourcesContent":["/**\n * @file 多用户协作测试\n * @description 测试多用户协作功能\n * @module __tests__/collaboration/multi-user.test\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-19\n */\n\ndescribe('Multi-User Collaboration Module', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('用户会话管理', () => {\n    it('应该创建用户会话', () => {\n      const userSession = {\n        userId: 'user1',\n        userName: 'User 1',\n        sessionId: 'session-123',\n        joinedAt: Date.now(),\n      };\n\n      expect(userSession.userId).toBe('user1');\n      expect(userSession.userName).toBe('User 1');\n      expect(userSession.sessionId).toBe('session-123');\n      expect(userSession.joinedAt).toBeDefined();\n    });\n\n    it('应该跟踪活跃会话', () => {\n      const activeSessions = [\n        { userId: 'user1', lastActivity: Date.now() },\n        { userId: 'user2', lastActivity: Date.now() },\n        { userId: 'user3', lastActivity: Date.now() },\n      ];\n\n      expect(activeSessions.length).toBe(3);\n      activeSessions.forEach((session) => {\n        expect(session.userId).toBeDefined();\n        expect(session.lastActivity).toBeDefined();\n      });\n    });\n\n    it('应该处理会话超时', () => {\n      const session = {\n        userId: 'user1',\n        lastActivity: Date.now() - 1800000,\n        timeout: 900000,\n      };\n\n      const isExpired = Date.now() - session.lastActivity > session.timeout;\n      expect(isExpired).toBe(true);\n    });\n  });\n\n  describe('并发编辑', () => {\n    it('应该支持多用户同时编辑', () => {\n      const editors = [\n        { userId: 'user1', documentId: 'doc1', cursor: { line: 1, column: 10 } },\n        { userId: 'user2', documentId: 'doc1', cursor: { line: 5, column: 20 } },\n        { userId: 'user3', documentId: 'doc1', cursor: { line: 10, column: 5 } },\n      ];\n\n      expect(editors.length).toBe(3);\n      editors.forEach((editor) => {\n        expect(editor.documentId).toBe('doc1');\n        expect(editor.cursor).toBeDefined();\n      });\n    });\n\n    it('应该跟踪用户光标位置', () => {\n      const cursor = {\n        userId: 'user1',\n        position: { line: 10, column: 15 },\n        selection: { start: { line: 10, column: 15 }, end: { line: 10, column: 20 } },\n      };\n\n      expect(cursor.userId).toBe('user1');\n      expect(cursor.position.line).toBe(10);\n      expect(cursor.position.column).toBe(15);\n      expect(cursor.selection.start).toBeDefined();\n      expect(cursor.selection.end).toBeDefined();\n    });\n\n    it('应该处理编辑冲突', () => {\n      const edits = [\n        { userId: 'user1', operation: 'insert', position: 10, content: 'test' },\n        { userId: 'user2', operation: 'insert', position: 10, content: 'other' },\n      ];\n\n      const hasConflict = edits.length > 1 && edits[0].position === edits[1].position;\n      expect(hasConflict).toBe(true);\n    });\n  });\n\n  describe('实时协作', () => {\n    it('应该广播用户操作', () => {\n      const operations = [\n        { type: 'insert', userId: 'user1', data: 'abc' },\n        { type: 'delete', userId: 'user2', data: 'def' },\n        { type: 'replace', userId: 'user3', data: 'ghi' },\n      ];\n\n      operations.forEach((op) => {\n        expect(op.type).toBeDefined();\n        expect(op.userId).toBeDefined();\n        expect(op.data).toBeDefined();\n      });\n    });\n\n    it('应该维护操作历史', () => {\n      const operationHistory = [\n        { id: 1, operation: 'insert', timestamp: Date.now() },\n        { id: 2, operation: 'delete', timestamp: Date.now() },\n        { id: 3, operation: 'replace', timestamp: Date.now() },\n      ];\n\n      expect(operationHistory.length).toBe(3);\n      operationHistory.forEach((op) => {\n        expect(op.id).toBeDefined();\n        expect(op.operation).toBeDefined();\n        expect(op.timestamp).toBeDefined();\n      });\n    });\n\n    it('应该支持操作撤销', () => {\n      const undoStack = [\n        { operation: 'insert', content: 'abc', position: 0 },\n        { operation: 'delete', content: 'def', position: 3 },\n      ];\n\n      const lastOperation = undoStack.pop();\n      expect(lastOperation).toBeDefined();\n      expect(lastOperation?.operation).toBe('delete');\n    });\n\n    it('应该支持操作重做', () => {\n      const redoStack = [\n        { operation: 'insert', content: 'abc', position: 0 },\n        { operation: 'delete', content: 'def', position: 3 },\n      ];\n\n      const nextOperation = redoStack.pop();\n      expect(nextOperation).toBeDefined();\n      expect(nextOperation?.operation).toBe('delete');\n    });\n  });\n\n  describe('权限管理', () => {\n    it('应该支持只读权限', () => {\n      const permission = {\n        userId: 'user1',\n        documentId: 'doc1',\n        level: 'read',\n        canEdit: false,\n        canDelete: false,\n      };\n\n      expect(permission.level).toBe('read');\n      expect(permission.canEdit).toBe(false);\n      expect(permission.canDelete).toBe(false);\n    });\n\n    it('应该支持编辑权限', () => {\n      const permission = {\n        userId: 'user2',\n        documentId: 'doc1',\n        level: 'write',\n        canEdit: true,\n        canDelete: false,\n      };\n\n      expect(permission.level).toBe('write');\n      expect(permission.canEdit).toBe(true);\n      expect(permission.canDelete).toBe(false);\n    });\n\n    it('应该支持管理权限', () => {\n      const permission = {\n        userId: 'user3',\n        documentId: 'doc1',\n        level: 'admin',\n        canEdit: true,\n        canDelete: true,\n      };\n\n      expect(permission.level).toBe('admin');\n      expect(permission.canEdit).toBe(true);\n      expect(permission.canDelete).toBe(true);\n    });\n  });\n\n  describe('文档状态', () => {\n    it('应该跟踪文档状态', () => {\n      const documentStates = [\n        { documentId: 'doc1', status: 'draft', lastModified: Date.now() },\n        { documentId: 'doc2', status: 'published', lastModified: Date.now() },\n        { documentId: 'doc3', status: 'archived', lastModified: Date.now() },\n      ];\n\n      documentStates.forEach((state) => {\n        expect(state.documentId).toBeDefined();\n        expect(state.status).toBeDefined();\n        expect(state.lastModified).toBeDefined();\n      });\n    });\n\n    it('应该处理状态转换', () => {\n      const transitions = [\n        { from: 'draft', to: 'published', allowed: true },\n        { from: 'published', to: 'archived', allowed: true },\n        { from: 'draft', to: 'archived', allowed: true },\n      ];\n\n      transitions.forEach((transition) => {\n        expect(transition.from).toBeDefined();\n        expect(transition.to).toBeDefined();\n        expect(transition.allowed).toBeDefined();\n      });\n    });\n  });\n\n  describe('协作通知', () => {\n    it('应该通知用户加入', () => {\n      const notification = {\n        type: 'user_joined',\n        userId: 'user1',\n        userName: 'User 1',\n        timestamp: Date.now(),\n      };\n\n      expect(notification.type).toBe('user_joined');\n      expect(notification.userId).toBe('user1');\n      expect(notification.userName).toBe('User 1');\n    });\n\n    it('应该通知用户离开', () => {\n      const notification = {\n        type: 'user_left',\n        userId: 'user2',\n        userName: 'User 2',\n        timestamp: Date.now(),\n      };\n\n      expect(notification.type).toBe('user_left');\n      expect(notification.userId).toBe('user2');\n    });\n\n    it('应该通知文档更新', () => {\n      const notification = {\n        type: 'document_updated',\n        documentId: 'doc1',\n        userId: 'user1',\n        changes: ['content', 'metadata'],\n      };\n\n      expect(notification.type).toBe('document_updated');\n      expect(notification.documentId).toBe('doc1');\n      expect(notification.changes).toBeDefined();\n    });\n  });\n\n  describe('冲突解决', () => {\n    it('应该提供冲突解决选项', () => {\n      const conflictResolution = {\n        options: ['accept_mine', 'accept_theirs', 'merge', 'manual'],\n        autoResolve: false,\n        notifyUsers: true,\n      };\n\n      expect(conflictResolution.options).toContain('accept_mine');\n      expect(conflictResolution.options).toContain('accept_theirs');\n      expect(conflictResolution.options).toContain('merge');\n      expect(conflictResolution.options).toContain('manual');\n    });\n\n    it('应该支持自动合并', () => {\n      const autoMerge = {\n        strategy: 'last-write-wins',\n        algorithm: 'diff3',\n        confidence: 0.8,\n      };\n\n      expect(autoMerge.strategy).toBe('last-write-wins');\n      expect(autoMerge.algorithm).toBe('diff3');\n      expect(autoMerge.confidence).toBe(0.8);\n    });\n\n    it('应该记录冲突历史', () => {\n      const conflictHistory = [\n        {\n          id: 1,\n          timestamp: Date.now(),\n          users: ['user1', 'user2'],\n          resolution: 'merge',\n        },\n        {\n          id: 2,\n          timestamp: Date.now(),\n          users: ['user2', 'user3'],\n          resolution: 'accept_mine',\n        },\n      ];\n\n      conflictHistory.forEach((conflict) => {\n        expect(conflict.id).toBeDefined();\n        expect(conflict.timestamp).toBeDefined();\n        expect(conflict.users).toBeDefined();\n        expect(conflict.resolution).toBeDefined();\n      });\n    });\n  });\n\n  describe('性能优化', () => {\n    it('应该批量处理操作', () => {\n      const operations = Array.from({ length: 100 }, (_, i) => ({\n        type: 'insert',\n        userId: `user${i % 3}`,\n        data: `data${i}`,\n      }));\n\n      const batchSize = 10;\n      const batches = [];\n\n      for (let i = 0; i < operations.length; i += batchSize) {\n        batches.push(operations.slice(i, i + batchSize));\n      }\n\n      expect(batches.length).toBe(10);\n      expect(batches[0].length).toBe(10);\n    });\n\n    it('应该压缩操作数据', () => {\n      const operations = [\n        { type: 'insert', data: 'abc' },\n        { type: 'delete', data: 'def' },\n      ];\n\n      const compressed = JSON.stringify(operations);\n      expect(compressed).toBeDefined();\n      expect(compressed.length).toBeLessThan(1000);\n    });\n\n    it('应该节流高频操作', () => {\n      const throttledOperations = [];\n      let lastProcessTime = 0;\n      const throttleInterval = 100;\n\n      const processOperation = (operation: unknown) => {\n        const now = Date.now();\n        if (now - lastProcessTime >= throttleInterval) {\n          throttledOperations.push(operation);\n          lastProcessTime = now;\n        }\n      };\n\n      for (let i = 0; i < 10; i++) {\n        processOperation({ type: 'test', data: i });\n      }\n\n      expect(throttledOperations.length).toBeGreaterThan(0);\n      expect(throttledOperations.length).toBeLessThanOrEqual(10);\n    });\n  });\n});\n"],"version":3}