{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/components/RealtimeEditor.tsx","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/components/RealtimeEditor.tsx"],"sourcesContent":["/**\n * @file 实时编辑器组件\n * @description 提供用户界面来实时编辑设计令牌\n * @component RealtimeEditor\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-18\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from './Card';\nimport { Button } from './Button';\nimport { Input } from './Input';\nimport { Badge } from './Badge';\nimport { useTheme } from '../theme/useTheme';\nimport { createRealtimeEditor, EditorState } from '../editor/realtime-editor';\nimport { DesignTokens } from '../../types/tokens';\n\ninterface RealtimeEditorProps {\n  initialTokens?: DesignTokens;\n  onSave?: (tokens: DesignTokens) => void;\n  userId?: string;\n  className?: string;\n}\n\nexport const RealtimeEditor: React.FC<RealtimeEditorProps> = ({\n  initialTokens = {},\n  onSave,\n  userId,\n  className = '',\n}) => {\n  const { tokens: themeTokens } = useTheme();\n  const [editor] = useState(() => createRealtimeEditor(initialTokens, userId));\n  const [state, setState] = useState<EditorState>(editor.getState());\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [editingToken, setEditingToken] = useState<string | null>(null);\n  const [editingValue, setEditingValue] = useState('');\n  const [newTokenName, setNewTokenName] = useState('');\n  const [newTokenValue, setNewTokenValue] = useState('');\n\n  useEffect(() => {\n    const unsubscribe = editor.subscribe(setState);\n    return unsubscribe;\n  }, [editor]);\n\n  const handleUpdateToken = useCallback(\n    (tokenName: string, value: string | number) => {\n      const validation = editor.validateToken(tokenName);\n      const valueValidation = editor.validateValue(value);\n\n      if (!validation.valid) {\n        alert(validation.error);\n        return;\n      }\n\n      if (!valueValidation.valid) {\n        alert(valueValidation.error);\n        return;\n      }\n\n      editor.updateToken(tokenName, value);\n    },\n    [editor]\n  );\n\n  const handleDeleteToken = useCallback(\n    (tokenName: string) => {\n      if (confirm(`确定要删除令牌 ${tokenName} 吗？`)) {\n        editor.deleteToken(tokenName);\n      }\n    },\n    [editor]\n  );\n\n  const handleAddToken = useCallback(() => {\n    const validation = editor.validateToken(newTokenName);\n    const valueValidation = editor.validateValue(newTokenValue);\n\n    if (!validation.valid) {\n      alert(validation.error);\n      return;\n    }\n\n    if (!valueValidation.valid) {\n      alert(valueValidation.error);\n      return;\n    }\n\n    editor.addToken(newTokenName, newTokenValue);\n    setNewTokenName('');\n    setNewTokenValue('');\n  }, [editor, newTokenName, newTokenValue]);\n\n  const handleUndo = useCallback(() => {\n    editor.undo();\n  }, [editor]);\n\n  const handleSave = useCallback(() => {\n    editor.save();\n    if (onSave) {\n      onSave(editor.getTokens());\n    }\n  }, [editor, onSave]);\n\n  const handleDiscard = useCallback(() => {\n    if (confirm('确定要放弃所有更改吗？')) {\n      editor.discardChanges();\n    }\n  }, [editor]);\n\n  const categories = ['all', 'color', 'spacing', 'font', 'animation', 'transition'];\n\n  const filterTokens = () => {\n    let filtered = Object.entries(state.tokens);\n\n    if (selectedCategory !== 'all') {\n      filtered = filtered.filter(([name]) => name.includes(selectedCategory));\n    }\n\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(([name]) => name.toLowerCase().includes(query));\n    }\n\n    return filtered;\n  };\n\n  const filteredTokens = filterTokens();\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle>实时编辑器</CardTitle>\n          <div className=\"flex gap-2\">\n            {state.isDirty && (\n              <Badge style={{ background: '#f59e0b', color: '#ffffff' }}>未保存</Badge>\n            )}\n            {state.lastSaved && (\n              <Badge\n                variant=\"outline\"\n                style={{ borderColor: themeTokens['color.border'] as string }}\n              >\n                已保存 {new Date(state.lastSaved).toLocaleTimeString()}\n              </Badge>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        <div className=\"flex gap-2\">\n          <Button onClick={handleUndo} disabled={!editor.canUndo()}>\n            撤销\n          </Button>\n          <Button onClick={handleSave} disabled={!state.isDirty}>\n            保存\n          </Button>\n          <Button variant=\"outline\" onClick={handleDiscard} disabled={!state.isDirty}>\n            放弃更改\n          </Button>\n        </div>\n\n        <div>\n          <label\n            className=\"block text-sm font-medium mb-2\"\n            style={{ color: themeTokens['color.foreground'] as string }}\n          >\n            搜索\n          </label>\n          <Input\n            type=\"text\"\n            value={searchQuery}\n            onChange={setSearchQuery}\n            placeholder=\"搜索令牌...\"\n          />\n        </div>\n\n        <div>\n          <label\n            className=\"block text-sm font-medium mb-2\"\n            style={{ color: themeTokens['color.foreground'] as string }}\n          >\n            类别\n          </label>\n          <div className=\"flex flex-wrap gap-2\">\n            {categories.map((category) => (\n              <Badge\n                key={category}\n                variant={selectedCategory === category ? 'default' : 'outline'}\n                style={{\n                  cursor: 'pointer',\n                  background:\n                    selectedCategory === category\n                      ? (themeTokens['color.primary'] as string)\n                      : 'transparent',\n                  color:\n                    selectedCategory === category\n                      ? '#ffffff'\n                      : (themeTokens['color.foreground'] as string),\n                  borderColor: themeTokens['color.primary'] as string,\n                }}\n                onClick={() => setSelectedCategory(category)}\n              >\n                {category === 'all' ? '全部' : category}\n              </Badge>\n            ))}\n          </div>\n        </div>\n\n        <div>\n          <label\n            className=\"block text-sm font-medium mb-2\"\n            style={{ color: themeTokens['color.foreground'] as string }}\n          >\n            添加新令牌\n          </label>\n          <div className=\"flex gap-2\">\n            <Input\n              type=\"text\"\n              value={newTokenName}\n              onChange={setNewTokenName}\n              placeholder=\"令牌名称 (如: color.primary)\"\n              className=\"flex-1\"\n            />\n            <Input\n              type=\"text\"\n              value={newTokenValue}\n              onChange={setNewTokenValue}\n              placeholder=\"令牌值 (如: #d45a5f)\"\n              className=\"flex-1\"\n            />\n            <Button onClick={handleAddToken} disabled={!newTokenName || !newTokenValue}>\n              添加\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <h3\n            className=\"text-sm font-medium\"\n            style={{ color: themeTokens['color.foreground'] as string }}\n          >\n            令牌 ({filteredTokens.length})\n          </h3>\n          <div className=\"space-y-2\">\n            {filteredTokens.map(([name, value]) => (\n              <div\n                key={name}\n                className=\"p-4 rounded-lg\"\n                style={{\n                  background: themeTokens['color.card'] as string,\n                  border: `1px solid ${themeTokens['color.border'] as string}`,\n                }}\n              >\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex-1\">\n                    <div\n                      className=\"text-sm font-medium\"\n                      style={{ color: themeTokens['color.foreground'] as string }}\n                    >\n                      {name}\n                    </div>\n                    {name.includes('color') &&\n                      typeof value === 'string' &&\n                      value.startsWith('#') && (\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <div className=\"w-4 h-4 rounded\" style={{ background: value }} />\n                          <span\n                            className=\"text-xs\"\n                            style={{ color: themeTokens['color.muted-foreground'] as string }}\n                          >\n                            {value}\n                          </span>\n                        </div>\n                      )}\n                  </div>\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => handleDeleteToken(name)}>\n                    删除\n                  </Button>\n                </div>\n                {editingToken === name ? (\n                  <div className=\"flex gap-2\">\n                    <Input\n                      type=\"text\"\n                      value={editingValue}\n                      onChange={setEditingValue}\n                      onBlur={() => {\n                        handleUpdateToken(name, editingValue);\n                        setEditingToken(null);\n                      }}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                          handleUpdateToken(name, editingValue);\n                          setEditingToken(null);\n                        } else if (e.key === 'Escape') {\n                          setEditingToken(null);\n                        }\n                      }}\n                      autoFocus\n                      className=\"flex-1\"\n                    />\n                  </div>\n                ) : (\n                  <div\n                    className=\"p-2 rounded cursor-pointer\"\n                    style={{\n                      background: themeTokens['color.background'] as string,\n                      color: themeTokens['color.foreground'] as string,\n                    }}\n                    onClick={() => setEditingToken(name)}\n                  >\n                    {String(value)}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {state.changes.length > 0 && (\n          <div>\n            <h3\n              className=\"text-sm font-medium mb-2\"\n              style={{ color: themeTokens['color.foreground'] as string }}\n            >\n              更改历史 ({state.changes.length})\n            </h3>\n            <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n              {state.changes\n                .slice()\n                .reverse()\n                .map((change, index) => (\n                  <div\n                    key={index}\n                    className=\"p-3 rounded\"\n                    style={{\n                      background: themeTokens['color.card'] as string,\n                      border: `1px solid ${themeTokens['color.border'] as string}`,\n                    }}\n                  >\n                    <div\n                      className=\"text-sm font-medium\"\n                      style={{ color: themeTokens['color.foreground'] as string }}\n                    >\n                      {change.tokenName}\n                    </div>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <span\n                        className=\"text-xs\"\n                        style={{ color: themeTokens['color.muted-foreground'] as string }}\n                      >\n                        {change.oldValue !== undefined ? String(change.oldValue) : '(空)'}\n                      </span>\n                      <span style={{ color: themeTokens['color.foreground'] as string }}>→</span>\n                      <span\n                        className=\"text-xs\"\n                        style={{ color: themeTokens['color.muted-foreground'] as string }}\n                      >\n                        {change.newValue !== undefined ? String(change.newValue) : '(删除)'}\n                      </span>\n                    </div>\n                    <div\n                      className=\"text-xs mt-1\"\n                      style={{ color: themeTokens['color.muted-foreground'] as string }}\n                    >\n                      {new Date(change.timestamp).toLocaleString()}\n                    </div>\n                  </div>\n                ))}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n"],"version":3}