{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/components/Avatar.tsx","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/components/Avatar.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { AvatarProps } from '../../types/tokens';\nimport { useTheme } from '../theme/useTheme';\nimport { observeLazyImage } from '../utils/image-lazy-loader';\n\nexport const Avatar: React.FC<AvatarProps> = ({\n  src,\n  alt = 'Avatar',\n  size = 'md',\n  fallback,\n  className = '',\n  'data-testid': dataTestId,\n}) => {\n  const { tokens } = useTheme();\n  const [imageError, setImageError] = useState(false);\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  const getSizeStyle = (): React.CSSProperties => {\n    switch (size) {\n      case 'sm':\n        return { width: '2rem', height: '2rem', fontSize: '0.75rem' };\n      case 'md':\n        return { width: '2.5rem', height: '2.5rem', fontSize: '1rem' };\n      case 'lg':\n        return { width: '3rem', height: '3rem', fontSize: '1.25rem' };\n      case 'xl':\n        return { width: '4rem', height: '4rem', fontSize: '1.5rem' };\n      default:\n        return { width: '2.5rem', height: '2.5rem', fontSize: '1rem' };\n    }\n  };\n\n  const sizeStyle = getSizeStyle();\n  const radius = (tokens['radius.lg'] as string) || '0.5rem';\n\n  const avatarStyle: React.CSSProperties = {\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: radius,\n    backgroundColor: (tokens['color.primary'] as string) || '#d45a5f',\n    color: (tokens['color.primary-foreground'] as string) || '#fff',\n    overflow: 'hidden',\n    ...sizeStyle,\n    transition: 'all 0.2s ease',\n  };\n\n  const imageStyle: React.CSSProperties = {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover',\n    display: imageLoaded ? 'block' : 'none',\n  };\n\n  const fallbackStyle: React.CSSProperties = {\n    fontSize: sizeStyle.fontSize,\n    fontWeight: '600',\n    userSelect: 'none',\n  };\n\n  const getFallbackText = (): string => {\n    if (fallback) return fallback;\n    if (alt) {\n      const words = alt.split(' ');\n      if (words.length >= 2) {\n        return (words[0][0] + words[1][0]).toUpperCase();\n      }\n      return alt.slice(0, 2).toUpperCase();\n    }\n    return '??';\n  };\n\n  const handleImageError = () => {\n    setImageError(true);\n    setImageLoaded(false);\n  };\n\n  const handleImageLoad = () => {\n    setImageLoaded(true);\n  };\n\n  useEffect(() => {\n    if (imgRef.current && src && !imageError) {\n      const unobserve = observeLazyImage(imgRef.current, {\n        placeholder:\n          'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PC9zdmc+',\n        errorPlaceholder:\n          'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZjZGNkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5OTk5OTkiIGZvbnQtc2l6ZT0iMTQiPuaXoDwvdGV4dD48L3N2Zz4=',\n        onLoad: handleImageLoad,\n        onError: handleImageError,\n      });\n      return unobserve;\n    }\n  }, [src, imageError]);\n\n  return (\n    <div\n      style={avatarStyle}\n      className={className}\n      role=\"img\"\n      aria-label={alt}\n      data-testid={dataTestId}\n    >\n      {src && !imageError && (\n        <img ref={imgRef} data-src={src} alt={alt} style={imageStyle} loading=\"lazy\" />\n      )}\n      {(!src || imageError || !imageLoaded) && (\n        <span style={fallbackStyle}>{getFallbackText()}</span>\n      )}\n    </div>\n  );\n};\n\nexport default Avatar;\n"],"version":3}