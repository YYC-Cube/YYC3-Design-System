b7f7f1a27ed7591db2a5ebe1d1a997f5
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Avatar = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const useTheme_1 = require("../theme/useTheme");
const image_lazy_loader_1 = require("../utils/image-lazy-loader");
const Avatar = ({ src, alt = 'Avatar', size = 'md', fallback, className = '', 'data-testid': dataTestId, }) => {
    const { tokens } = (0, useTheme_1.useTheme)();
    const [imageError, setImageError] = (0, react_1.useState)(false);
    const [imageLoaded, setImageLoaded] = (0, react_1.useState)(false);
    const imgRef = (0, react_1.useRef)(null);
    const getSizeStyle = () => {
        switch (size) {
            case 'sm':
                return { width: '2rem', height: '2rem', fontSize: '0.75rem' };
            case 'md':
                return { width: '2.5rem', height: '2.5rem', fontSize: '1rem' };
            case 'lg':
                return { width: '3rem', height: '3rem', fontSize: '1.25rem' };
            case 'xl':
                return { width: '4rem', height: '4rem', fontSize: '1.5rem' };
            default:
                return { width: '2.5rem', height: '2.5rem', fontSize: '1rem' };
        }
    };
    const sizeStyle = getSizeStyle();
    const radius = tokens['radius.lg'] || '0.5rem';
    const avatarStyle = {
        display: 'inline-flex',
        alignItems: 'center',
        justifyContent: 'center',
        borderRadius: radius,
        backgroundColor: tokens['color.primary'] || '#d45a5f',
        color: tokens['color.primary-foreground'] || '#fff',
        overflow: 'hidden',
        ...sizeStyle,
        transition: 'all 0.2s ease',
    };
    const imageStyle = {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        display: imageLoaded ? 'block' : 'none',
    };
    const fallbackStyle = {
        fontSize: sizeStyle.fontSize,
        fontWeight: '600',
        userSelect: 'none',
    };
    const getFallbackText = () => {
        if (fallback)
            return fallback;
        if (alt) {
            const words = alt.split(' ');
            if (words.length >= 2) {
                return (words[0][0] + words[1][0]).toUpperCase();
            }
            return alt.slice(0, 2).toUpperCase();
        }
        return '??';
    };
    const handleImageError = () => {
        setImageError(true);
        setImageLoaded(false);
    };
    const handleImageLoad = () => {
        setImageLoaded(true);
    };
    (0, react_1.useEffect)(() => {
        if (imgRef.current && src && !imageError) {
            const unobserve = (0, image_lazy_loader_1.observeLazyImage)(imgRef.current, {
                placeholder: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PC9zdmc+',
                errorPlaceholder: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZjZGNkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5OTk5OTkiIGZvbnQtc2l6ZT0iMTQiPuaXoDwvdGV4dD48L3N2Zz4=',
                onLoad: handleImageLoad,
                onError: handleImageError,
            });
            return unobserve;
        }
    }, [src, imageError]);
    return ((0, jsx_runtime_1.jsxs)("div", { style: avatarStyle, className: className, role: "img", "aria-label": alt, "data-testid": dataTestId, children: [src && !imageError && ((0, jsx_runtime_1.jsx)("img", { ref: imgRef, "data-src": src, alt: alt, style: imageStyle, loading: "lazy" })), (!src || imageError || !imageLoaded) && ((0, jsx_runtime_1.jsx)("span", { style: fallbackStyle, children: getFallbackText() }))] }));
};
exports.Avatar = Avatar;
exports.default = exports.Avatar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvQXZhdGFyLnRzeCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUNBQTJEO0FBRTNELGdEQUE2QztBQUM3QyxrRUFBOEQ7QUFFdkQsTUFBTSxNQUFNLEdBQTBCLENBQUMsRUFDNUMsR0FBRyxFQUNILEdBQUcsR0FBRyxRQUFRLEVBQ2QsSUFBSSxHQUFHLElBQUksRUFDWCxRQUFRLEVBQ1IsU0FBUyxHQUFHLEVBQUUsRUFDZCxhQUFhLEVBQUUsVUFBVSxHQUMxQixFQUFFLEVBQUU7SUFDSCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBQSxtQkFBUSxHQUFFLENBQUM7SUFDOUIsTUFBTSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEQsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEQsTUFBTSxNQUFNLEdBQUcsSUFBQSxjQUFNLEVBQW1CLElBQUksQ0FBQyxDQUFDO0lBRTlDLE1BQU0sWUFBWSxHQUFHLEdBQXdCLEVBQUU7UUFDN0MsUUFBUSxJQUFJLEVBQUUsQ0FBQztZQUNiLEtBQUssSUFBSTtnQkFDUCxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsQ0FBQztZQUNoRSxLQUFLLElBQUk7Z0JBQ1AsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQUM7WUFDakUsS0FBSyxJQUFJO2dCQUNQLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxDQUFDO1lBQ2hFLEtBQUssSUFBSTtnQkFDUCxPQUFPLEVB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VyxFQUNsQixTQUFTLEVBQUUsU0FBUyxFQUNwQixJQUFJLEVBQUMsS0FBSyxnQkFDRSxHQUFHLGlCQUNGLFVBQVUsYUFFdEIsR0FBRyxJQUFJLENBQUMsVUFBVSxJQUFJLENBQ3JCLGdDQUFLLEdBQUcsRUFBRSxNQUFNLGNBQVksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUMsTUFBTSxHQUFHLENBQ2hGLEVBQ0EsQ0FBQyxDQUFDLEdBQUcsSUFBSSxVQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUN2QyxpQ0FBTSxLQUFLLEVBQUUsYUFBYSxZQUFHLGVBQWUsRUFBRSxHQUFRLENBQ3ZELElBQ0csQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBM0dXLFFBQUEsTUFBTSxVQTJHakI7QUFFRixrQkFBZSxjQUFNLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvQXZhdGFyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQXZhdGFyUHJvcHMgfSBmcm9tICcuLi8uLi90eXBlcy90b2tlbnMnO1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICcuLi90aGVtZS91c2VUaGVtZSc7XG5pbXBvcnQgeyBvYnNlcnZlTGF6eUltYWdlIH0gZnJvbSAnLi4vdXRpbHMvaW1hZ2UtbGF6eS1sb2FkZXInO1xuXG5leHBvcnQgY29uc3QgQXZhdGFyOiBSZWFjdC5GQzxBdmF0YXJQcm9wcz4gPSAoe1xuICBzcmMsXG4gIGFsdCA9ICdBdmF0YXInLFxuICBzaXplID0gJ21kJyxcbiAgZmFsbGJhY2ssXG4gIGNsYXNzTmFtZSA9ICcnLFxuICAnZGF0YS10ZXN0aWQnOiBkYXRhVGVzdElkLFxufSkgPT4ge1xuICBjb25zdCB7IHRva2VucyB9ID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgW2ltYWdlRXJyb3IsIHNldEltYWdlRXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaW1hZ2VMb2FkZWQsIHNldEltYWdlTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaW1nUmVmID0gdXNlUmVmPEhUTUxJbWFnZUVsZW1lbnQ+KG51bGwpO1xuXG4gIGNvbnN0IGdldFNpemVTdHlsZSA9ICgpOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0+IHtcbiAgICBzd2l0Y2ggKHNpemUpIHtcbiAgICAgIGNhc2UgJ3NtJzpcbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6ICcycmVtJywgaGVpZ2h0OiAnMnJlbScsIGZvbnRTaXplOiAnMC43NXJlbScgfTtcbiAgICAgIGNhc2UgJ21kJzpcbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6ICcyLjVyZW0nLCBoZWlnaHQ6ICcyLjVyZW0nLCBmb250U2l6ZTogJzFyZW0nIH07XG4gICAgICBjYXNlICdsZyc6XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiAnM3JlbScsIGhlaWdodDogJzNyZW0nLCBmb250U2l6ZTogJzEuMjVyZW0nIH07XG4gICAgICBjYXNlICd4bCc6XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiAnNHJlbScsIGhlaWdodDogJzRyZW0nLCBmb250U2l6ZTogJzEuNXJlbScgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiAnMi41cmVtJywgaGVpZ2h0OiAnMi41cmVtJywgZm9udFNpemU6ICcxcmVtJyB9O1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaXplU3R5bGUgPSBnZXRTaXplU3R5bGUoKTtcbiAgY29uc3QgcmFkaXVzID0gKHRva2Vuc1sncmFkaXVzLmxnJ10gYXMgc3RyaW5nKSB8fCAnMC41cmVtJztcblxuICBjb25zdCBhdmF0YXJTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHtcbiAgICBkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBib3JkZXJSYWRpdXM6IHJhZGl1cyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICh0b2tlbnNbJ2NvbG9yLnByaW1hcnknXSBhcyBzdHJpbmcpIHx8ICcjZDQ1YTVmJyxcbiAgICBjb2xvcjogKHRva2Vuc1snY29sb3IucHJpbWFyeS1mb3JlZ3JvdW5kJ10gYXMgc3RyaW5nKSB8fCAnI2ZmZicsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIC4uLnNpemVTdHlsZSxcbiAgICB0cmFuc2l0aW9uOiAnYWxsIDAuMnMgZWFzZScsXG4gIH07XG5cbiAgY29uc3QgaW1hZ2VTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHtcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzEwMCUnLFxuICAgIG9iamVjdEZpdDogJ2NvdmVyJyxcbiAgICBkaXNwbGF5OiBpbWFnZUxvYWRlZCA/ICdibG9jaycgOiAnbm9uZScsXG4gIH07XG5cbiAgY29uc3QgZmFsbGJhY2tTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHtcbiAgICBmb250U2l6ZTogc2l6ZVN0eWxlLmZvbnRTaXplLFxuICAgIGZvbnRXZWlnaHQ6ICc2MDAnLFxuICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgfTtcblxuICBjb25zdCBnZXRGYWxsYmFja1RleHQgPSAoKTogc3RyaW5nID0+IHtcbiAgICBpZiAoZmFsbGJhY2spIHJldHVybiBmYWxsYmFjaztcbiAgICBpZiAoYWx0KSB7XG4gICAgICBjb25zdCB3b3JkcyA9IGFsdC5zcGxpdCgnICcpO1xuICAgICAgaWYgKHdvcmRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHJldHVybiAod29yZHNbMF1bMF0gKyB3b3Jkc1sxXVswXSkudG9VcHBlckNhc2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbHQuc2xpY2UoMCwgMikudG9VcHBlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuICc/Pyc7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VFcnJvciA9ICgpID0+IHtcbiAgICBzZXRJbWFnZUVycm9yKHRydWUpO1xuICAgIHNldEltYWdlTG9hZGVkKGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVJbWFnZUxvYWQgPSAoKSA9PiB7XG4gICAgc2V0SW1hZ2VMb2FkZWQodHJ1ZSk7XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaW1nUmVmLmN1cnJlbnQgJiYgc3JjICYmICFpbWFnZUVycm9yKSB7XG4gICAgICBjb25zdCB1bm9ic2VydmUgPSBvYnNlcnZlTGF6eUltYWdlKGltZ1JlZi5jdXJyZW50LCB7XG4gICAgICAgIHBsYWNlaG9sZGVyOlxuICAgICAgICAgICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVEF3SWlCb1pXbG5hSFE5SWpFd01DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNDhjbVZqZENCM2FXUjBhRDBpTVRBd0pTSWdhR1ZwWjJoMFBTSXhNREFsSWlCbWFXeHNQU0lqWmpCbU1HWXdJaTgrUEM5emRtYysnLFxuICAgICAgICBlcnJvclBsYWNlaG9sZGVyOlxuICAgICAgICAgICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVEF3SWlCb1pXbG5hSFE5SWpFd01DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNDhjbVZqZENCM2FXUjBhRDBpTVRBd0pTSWdhR1ZwWjJoMFBTSXhNREFsSWlCbWFXeHNQU0lqWm1aalpHTmtJaTgrUEhSbGVIUWdlRDBpTlRBbElpQjVQU0kxTUNVaUlHUnZiV2x1WVc1MExXSmhjMlZzYVc1bFBTSnRhV1JrYkdVaUlIUmxlSFF0WVc1amFHOXlQU0p0YVdSa2JHVWlJR1pwYkd3OUlpTTVPVGs1T1RraUlHWnZiblF0YzJsNlpUMGlNVFFpUHVhWG9Ed3ZkR1Y0ZEQ0OEwzTjJaejQ9JyxcbiAgICAgICAgb25Mb2FkOiBoYW5kbGVJbWFnZUxvYWQsXG4gICAgICAgIG9uRXJyb3I6IGhhbmRsZUltYWdlRXJyb3IsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1bm9ic2VydmU7XG4gICAgfVxuICB9LCBbc3JjLCBpbWFnZUVycm9yXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBzdHlsZT17YXZhdGFyU3R5bGV9XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgIHJvbGU9XCJpbWdcIlxuICAgICAgYXJpYS1sYWJlbD17YWx0fVxuICAgICAgZGF0YS10ZXN0aWQ9e2RhdGFUZXN0SWR9XG4gICAgPlxuICAgICAge3NyYyAmJiAhaW1hZ2VFcnJvciAmJiAoXG4gICAgICAgIDxpbWcgcmVmPXtpbWdSZWZ9IGRhdGEtc3JjPXtzcmN9IGFsdD17YWx0fSBzdHlsZT17aW1hZ2VTdHlsZX0gbG9hZGluZz1cImxhenlcIiAvPlxuICAgICAgKX1cbiAgICAgIHsoIXNyYyB8fCBpbWFnZUVycm9yIHx8ICFpbWFnZUxvYWRlZCkgJiYgKFxuICAgICAgICA8c3BhbiBzdHlsZT17ZmFsbGJhY2tTdHlsZX0+e2dldEZhbGxiYWNrVGV4dCgpfTwvc3Bhbj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBdmF0YXI7XG4iXSwidmVyc2lvbiI6M30=