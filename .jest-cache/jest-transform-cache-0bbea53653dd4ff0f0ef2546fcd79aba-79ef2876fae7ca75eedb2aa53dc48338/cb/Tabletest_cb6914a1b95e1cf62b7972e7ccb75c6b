6704f12efd57cd2f331cd0c82829fe9e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * @file 表格组件测试
 * @description 测试Table组件的各项功能
 * @module __tests__/components/Table.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-23
 */
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
require("@testing-library/jest-dom");
const Table_1 = require("../Table");
const ThemeProvider_1 = require("../../theme/ThemeProvider");
describe('Table', () => {
    const mockData = [
        { id: 1, name: 'John Doe', age: 30, email: 'john@example.com' },
        { id: 2, name: 'Jane Smith', age: 25, email: 'jane@example.com' },
        { id: 3, name: 'Bob Johnson', age: 35, email: 'bob@example.com' },
    ];
    const mockColumns = [
        { key: 'name', title: 'Name', dataIndex: 'name' },
        { key: 'age', title: 'Age', dataIndex: 'age' },
        { key: 'email', title: 'Email', dataIndex: 'email' },
    ];
    it('应该渲染表格', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: mockData }) }));
        expect(dom_1.screen.getByText('Name')).toBeInTheDocument();
        expect(dom_1.screen.getByText('Age')).toBeInTheDocument();
        expect(dom_1.screen.getByText('Email')).toBeInTheDocument();
    });
    it('应该渲染数据行', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: mockData }) }));
        expect(dom_1.screen.getByText('John Doe')).toBeInTheDocument();
        expect(dom_1.screen.getByText('Jane Smith')).toBeInTheDocument();
        expect(dom_1.screen.getByText('Bob Johnson')).toBeInTheDocument();
    });
    it('应该支持排序', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns.map((col) => ({ ...col, sortable: true })), dataSource: mockData }) }));
        const nameHeader = dom_1.screen.getByText('Name');
        react_1.fireEvent.click(nameHeader);
        expect(dom_1.screen.getByText('↑')).toBeInTheDocument();
    });
    it('应该支持行选择', () => {
        const mockOnChange = jest.fn();
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: mockData, rowSelection: {
                    onChange: mockOnChange,
                    type: 'checkbox',
                } }) }));
        const checkboxes = dom_1.screen.getAllByRole('checkbox');
        react_1.fireEvent.click(checkboxes[1]);
        expect(mockOnChange).toHaveBeenCalled();
    });
    it('应该支持分页', () => {
        const mockOnChange = jest.fn();
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: mockData, pagination: {
                    current: 1,
                    pageSize: 10,
                    total: 100,
                    onChange: mockOnChange,
                } }) }));
        const paginationInfo = dom_1.screen.getByText(/共.*100.*条/);
        expect(paginationInfo).toBeInTheDocument();
    });
    it('应该支持行点击事件', () => {
        const mockOnRowClick = jest.fn();
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: mockData, onRow: () => ({ onClick: mockOnRowClick }) }) }));
        const firstRow = dom_1.screen.getByText('John Doe');
        react_1.fireEvent.click(firstRow);
        expect(mockOnRowClick).toHaveBeenCalled();
    });
    it('应该支持空数据', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: [] }) }));
        const emptyText = dom_1.screen.getByText(/暂无数据/);
        expect(emptyText).toBeInTheDocument();
    });
    it('应该支持自定义单元格渲染', () => {
        const customColumns = [
            {
                key: 'name',
                title: 'Name',
                dataIndex: 'name',
                render: (value) => (0, jsx_runtime_1.jsx)("strong", { children: value }),
            },
        ];
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: customColumns, dataSource: mockData }) }));
        const nameCell = dom_1.screen.getByText('John Doe');
        expect(nameCell.closest('strong')).toBeInTheDocument();
    });
    it('应该支持列宽设置', () => {
        const widthColumns = [
            { key: 'name', title: 'Name', dataIndex: 'name', width: 200 },
            { key: 'age', title: 'Age', dataIndex: 'age', width: 100 },
        ];
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: widthColumns, dataSource: mockData }) }));
        const nameHeader = dom_1.screen.getByText('Name');
        expect(nameHeader).toBeInTheDocument();
    });
    it('应该支持数据加载状态', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Table_1.Table, { columns: mockColumns, dataSource: mockData, loading: true }) }));
        const loadingIndicator = dom_1.screen.getByRole('status');
        expect(loadingIndicator).toBeInTheDocument();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL1RhYmxlLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7OztBQUFBOzs7Ozs7O0dBT0c7QUFFSCxrREFBMkQ7QUFDM0QsOENBQThDO0FBQzlDLHFDQUFtQztBQUNuQyxvQ0FBaUM7QUFDakMsNkRBQTBEO0FBRTFELFFBQVEsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO0lBQ3JCLE1BQU0sUUFBUSxHQUFHO1FBQ2YsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsa0JBQWtCLEVBQUU7UUFDL0QsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsa0JBQWtCLEVBQUU7UUFDakUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxhQUFhLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUU7S0FDbEUsQ0FBQztJQUVGLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUU7UUFDakQsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRTtRQUM5QyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFO0tBQ3JELENBQUM7SUFFRixFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtRQUNoQixJQUFBLGNBQU0sRUFDSix1QkFBQyw2QkFBYSxjQUNaLHVCQUFDLGFBQUssSUFBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxRQUFR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QUUsR0FBRyxFQUFFO1FBQ3BCLElBQUEsY0FBTSxFQUNKLHVCQUFDLDZCQUFhLGNBQ1osdUJBQUMsYUFBSyxJQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxPQUFPLFNBQUcsR0FDL0MsQ0FDakIsQ0FBQztRQUNGLE1BQU0sZ0JBQWdCLEdBQUcsWUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNwRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQy9DLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL1RhYmxlLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUg6KGo5qC857uE5Lu25rWL6K+VXG4gKiBAZGVzY3JpcHRpb24g5rWL6K+VVGFibGXnu4Tku7bnmoTlkITpobnlip/og71cbiAqIEBtb2R1bGUgX190ZXN0c19fL2NvbXBvbmVudHMvVGFibGUudGVzdFxuICogQGF1dGhvciBZWUPCs1xuICogQHZlcnNpb24gMS4wLjBcbiAqIEBjcmVhdGVkIDIwMjYtMDItMjNcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgc2NyZWVuIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9kb20nO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCB7IFRhYmxlIH0gZnJvbSAnLi4vVGFibGUnO1xuaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJy4uLy4uL3RoZW1lL1RoZW1lUHJvdmlkZXInO1xuXG5kZXNjcmliZSgnVGFibGUnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tEYXRhID0gW1xuICAgIHsgaWQ6IDEsIG5hbWU6ICdKb2huIERvZScsIGFnZTogMzAsIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScgfSxcbiAgICB7IGlkOiAyLCBuYW1lOiAnSmFuZSBTbWl0aCcsIGFnZTogMjUsIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScgfSxcbiAgICB7IGlkOiAzLCBuYW1lOiAnQm9iIEpvaG5zb24nLCBhZ2U6IDM1LCBlbWFpbDogJ2JvYkBleGFtcGxlLmNvbScgfSxcbiAgXTtcblxuICBjb25zdCBtb2NrQ29sdW1ucyA9IFtcbiAgICB7IGtleTogJ25hbWUnLCB0aXRsZTogJ05hbWUnLCBkYXRhSW5kZXg6ICduYW1lJyB9LFxuICAgIHsga2V5OiAnYWdlJywgdGl0bGU6ICdBZ2UnLCBkYXRhSW5kZXg6ICdhZ2UnIH0sXG4gICAgeyBrZXk6ICdlbWFpbCcsIHRpdGxlOiAnRW1haWwnLCBkYXRhSW5kZXg6ICdlbWFpbCcgfSxcbiAgXTtcblxuICBpdCgn5bqU6K+l5riy5p+T6KGo5qC8JywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8VGFibGUgY29sdW1ucz17bW9ja0NvbHVtbnN9IGRhdGFTb3VyY2U9e21vY2tEYXRhfSAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ05hbWUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWdlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0VtYWlsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmuLLmn5PmlbDmja7ooYwnLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxUYWJsZSBjb2x1bW5zPXttb2NrQ29sdW1uc30gZGF0YVNvdXJjZT17bW9ja0RhdGF9IC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSm9obiBEb2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSmFuZSBTbWl0aCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCb2IgSm9obnNvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB5o6S5bqPJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8VGFibGVcbiAgICAgICAgICBjb2x1bW5zPXttb2NrQ29sdW1ucy5tYXAoKGNvbCkgPT4gKHsgLi4uY29sLCBzb3J0YWJsZTogdHJ1ZSB9KSl9XG4gICAgICAgICAgZGF0YVNvdXJjZT17bW9ja0RhdGF9XG4gICAgICAgIC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBjb25zdCBuYW1lSGVhZGVyID0gc2NyZWVuLmdldEJ5VGV4dCgnTmFtZScpO1xuICAgIGZpcmVFdmVudC5jbGljayhuYW1lSGVhZGVyKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn4oaRJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmlK/mjIHooYzpgInmi6knLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja09uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8VGFibGVcbiAgICAgICAgICBjb2x1bW5zPXttb2NrQ29sdW1uc31cbiAgICAgICAgICBkYXRhU291cmNlPXttb2NrRGF0YX1cbiAgICAgICAgICByb3dTZWxlY3Rpb249e3tcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBtb2NrT25DaGFuZ2UsXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnY2hlY2tib3gnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soY2hlY2tib3hlc1sxXSk7XG4gICAgZXhwZWN0KG1vY2tPbkNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB5YiG6aG1JywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tPbkNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPFRhYmxlXG4gICAgICAgICAgY29sdW1ucz17bW9ja0NvbHVtbnN9XG4gICAgICAgICAgZGF0YVNvdXJjZT17bW9ja0RhdGF9XG4gICAgICAgICAgcGFnaW5hdGlvbj17e1xuICAgICAgICAgICAgY3VycmVudDogMSxcbiAgICAgICAgICAgIHBhZ2VTaXplOiAxMCxcbiAgICAgICAgICAgIHRvdGFsOiAxMDAsXG4gICAgICAgICAgICBvbkNoYW5nZTogbW9ja09uQ2hhbmdlLFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBjb25zdCBwYWdpbmF0aW9uSW5mbyA9IHNjcmVlbi5nZXRCeVRleHQoL+WFsS4qMTAwLirmnaEvKTtcbiAgICBleHBlY3QocGFnaW5hdGlvbkluZm8pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmlK/mjIHooYzngrnlh7vkuovku7YnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja09uUm93Q2xpY2sgPSBqZXN0LmZuKCk7XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxUYWJsZVxuICAgICAgICAgIGNvbHVtbnM9e21vY2tDb2x1bW5zfVxuICAgICAgICAgIGRhdGFTb3VyY2U9e21vY2tEYXRhfVxuICAgICAgICAgIG9uUm93PXsoKSA9PiAoeyBvbkNsaWNrOiBtb2NrT25Sb3dDbGljayB9KX1cbiAgICAgICAgLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICAgIGNvbnN0IGZpcnN0Um93ID0gc2NyZWVuLmdldEJ5VGV4dCgnSm9obiBEb2UnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soZmlyc3RSb3cpO1xuICAgIGV4cGVjdChtb2NrT25Sb3dDbGljaykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB56m65pWw5o2uJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8VGFibGUgY29sdW1ucz17bW9ja0NvbHVtbnN9IGRhdGFTb3VyY2U9e1tdfSAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG4gICAgY29uc3QgZW1wdHlUZXh0ID0gc2NyZWVuLmdldEJ5VGV4dCgv5pqC5peg5pWw5o2uLyk7XG4gICAgZXhwZWN0KGVtcHR5VGV4dCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeiHquWumuS5ieWNleWFg+agvOa4suafkycsICgpID0+IHtcbiAgICBjb25zdCBjdXN0b21Db2x1bW5zID0gW1xuICAgICAge1xuICAgICAgICBrZXk6ICduYW1lJyxcbiAgICAgICAgdGl0bGU6ICdOYW1lJyxcbiAgICAgICAgZGF0YUluZGV4OiAnbmFtZScsXG4gICAgICAgIHJlbmRlcjogKHZhbHVlOiB1bmtub3duKSA9PiA8c3Ryb25nPnt2YWx1ZSBhcyBzdHJpbmd9PC9zdHJvbmc+LFxuICAgICAgfSxcbiAgICBdO1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8VGFibGUgY29sdW1ucz17Y3VzdG9tQ29sdW1uc30gZGF0YVNvdXJjZT17bW9ja0RhdGF9IC8+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcbiAgICBjb25zdCBuYW1lQ2VsbCA9IHNjcmVlbi5nZXRCeVRleHQoJ0pvaG4gRG9lJyk7XG4gICAgZXhwZWN0KG5hbWVDZWxsLmNsb3Nlc3QoJ3N0cm9uZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB5YiX5a696K6+572uJywgKCkgPT4ge1xuICAgIGNvbnN0IHdpZHRoQ29sdW1ucyA9IFtcbiAgICAgIHsga2V5OiAnbmFtZScsIHRpdGxlOiAnTmFtZScsIGRhdGFJbmRleDogJ25hbWUnLCB3aWR0aDogMjAwIH0sXG4gICAgICB7IGtleTogJ2FnZScsIHRpdGxlOiAnQWdlJywgZGF0YUluZGV4OiAnYWdlJywgd2lkdGg6IDEwMCB9LFxuICAgIF07XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxUYWJsZSBjb2x1bW5zPXt3aWR0aENvbHVtbnN9IGRhdGFTb3VyY2U9e21vY2tEYXRhfSAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG4gICAgY29uc3QgbmFtZUhlYWRlciA9IHNjcmVlbi5nZXRCeVRleHQoJ05hbWUnKTtcbiAgICBleHBlY3QobmFtZUhlYWRlcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeaVsOaNruWKoOi9veeKtuaAgScsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPFRhYmxlIGNvbHVtbnM9e21vY2tDb2x1bW5zfSBkYXRhU291cmNlPXttb2NrRGF0YX0gbG9hZGluZyAvPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG4gICAgY29uc3QgbG9hZGluZ0luZGljYXRvciA9IHNjcmVlbi5nZXRCeVJvbGUoJ3N0YXR1cycpO1xuICAgIGV4cGVjdChsb2FkaW5nSW5kaWNhdG9yKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9