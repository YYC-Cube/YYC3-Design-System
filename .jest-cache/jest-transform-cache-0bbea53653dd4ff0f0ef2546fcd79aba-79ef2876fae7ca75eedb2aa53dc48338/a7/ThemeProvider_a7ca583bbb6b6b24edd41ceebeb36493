1def7733fba617c93209eaa427f29112
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ThemeProvider = ThemeProvider;
exports.useTheme = useTheme;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const theme_persistence_1 = require("../utils/theme-persistence");
const ThemeContext = (0, react_1.createContext)(undefined);
const defaultTokens = {
    color: {
        primary: '#2563eb',
        secondary: '#e0f2fe',
        accent: '#e0f2fe',
        destructive: '#dc2626',
        success: '#16a34a',
        warning: '#d97706',
    },
    background: '#ffffff',
    foreground: '#0f172a',
    radius: '0.5rem',
    shadow: {
        sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
        md: '0 4px 6px -1px rgba(0, 0, 0, 0.07)',
        lg: '0 10px 15px -3px rgba(0, 0, 0, 0.08)',
    },
};
function ThemeProvider({ children, initial }) {
    const [mode, setModeState] = (0, react_1.useState)(() => {
        if (initial)
            return initial;
        const stored = (0, theme_persistence_1.getStoredTheme)();
        return stored === 'dark' ? 'dark' : 'light';
    });
    const [themeTokens, setThemeTokens] = (0, react_1.useState)(defaultTokens);
    const setMode = (0, react_1.useCallback)((newMode) => {
        setModeState(newMode);
        (0, theme_persistence_1.setStoredTheme)(newMode);
        document.documentElement.classList.toggle('dark', newMode === 'dark');
    }, []);
    const setTokens = (0, react_1.useCallback)((patch) => {
        setThemeTokens((prev) => ({ ...prev, ...patch }));
    }, []);
    (0, react_1.useEffect)(() => {
        const cleanup = (0, theme_persistence_1.initThemePersistence)();
        document.documentElement.classList.toggle('dark', mode === 'dark');
        return cleanup;
    }, [mode]);
    const value = (0, react_1.useMemo)(() => ({
        tokens: themeTokens,
        setTokens,
        mode,
        setMode,
    }), [themeTokens, mode, setTokens, setMode]);
    return (0, jsx_runtime_1.jsx)(ThemeContext.Provider, { value: value, children: children });
}
function useTheme() {
    const context = (0, react_1.useContext)(ThemeContext);
    if (context === undefined) {
        throw new Error('useTheme must be used within a ThemeProvider');
    }
    return context;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3RoZW1lL1RoZW1lUHJvdmlkZXIudHN4IiwibWFwcGluZ3MiOiI7O0FBc0NBLHNDQXVDQztBQUVELDRCQU1DOztBQXJGRCxpQ0FRZTtBQUVmLGtFQUFrRztBQUVsRyxNQUFNLFlBQVksR0FBRyxJQUFBLHFCQUFhLEVBQWdDLFNBQVMsQ0FBQyxDQUFDO0FBTzdFLE1BQU0sYUFBYSxHQUFpQjtJQUNsQyxLQUFLLEVBQUU7UUFDTCxPQUFPLEVBQUUsU0FBUztRQUNsQixTQUFTLEVBQUUsU0FBUztRQUNwQixNQUFNLEVBQUUsU0FBUztRQUNqQixXQUFXLEVBQUUsU0FBUztRQUN0QixPQUFPLEVBQUUsU0FBUztRQUNsQixPQUFPLEVBQUUsU0FBUztLQUNuQjtJQUNELFVBQVUsRUFBRSxTQUFTO0lBQ3JCLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLE1BQU0sRUFBRSxRQUFRO0lBQ2hCLE1BQU0sRUFBRTtRQUNOLEVBQUUsRUFBRSxpQ0FBaUM7UUFDckMsRUFBRSxFQUFFLG9DQUFvQztRQUN4QyxFQUFFLEVBQUUsc0NBQXNDO0tBQzNDO0NBQ0YsQ0FBQztBQUVGLFNBQWdCLGFBQWEsQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQXNCO0lBQ3JFLE1BQU0sQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFtQixHQUFHLEVBQUU7UUFDM0QsSUFBSSxPQUFPO1lBQUUsT0FBTyxPQUFPLENBQUM7UUFDNUIsTUFBTSxNQUFNLEdBQUcsSUFBQSxrQ0FBYyxHQUFFLENBQUM7UUFDaEMsT0FBTyxNQUFNLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUM5QyxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFlLGFBQWEsQ0FBQyxDQUFDO0lBRTVFLE1BQU0sT0FBTyxHQUFHLElBQUEsbUJBQVcsRUFBQyxDQUFDLE9BQXlCLEVBQUUsRUFBRTtRQUN4RCxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEIsSUFBQSxrQ0FBYyxFQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXhCLFFBQVEsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxLQUFLLE1BQU0sQ0FBQyxDQUFDO0lBQ3hFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE1BQU0sU0FBUyxHQUFHLElBQUEsbUJBQVcsRUFBQyxDQUFDLEtBQTRCLEVBQUUsRUFBRTtRQUM3RCxjQUFjLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLElBQUksRUFBRSxHQUFHLEtBQUssRUFBRSxDQUFpQixDQUFDLENBQUM7SUFDcEUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRVAsSUFBQSxpQkFBUyxFQUFDLEdBQUcsRUFBRTtRQUNiLE1BQU0sT0FBTyxHQUFHLElBQUEsd0NBQW9CLEdBQUUsQ0FBQztRQUV2QyxRQUFRLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksS0FBSyxNQUFNLENBQUMsQ0FBQztRQUVuRSxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRVgsTUFBTSxLQUFLLEdBQUcsSUFBQSxlQUFPLEVBQ25CLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDTCxNQUFNLEVBQUUsV0FBVztRQUNuQixTQUFTO1FBQ1QsSUFBSTtRQUNKLE9BQU87S0FDUixDQUFDLEVBQ0YsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FDeEMsQ0FBQztJQUVGLE9BQU8sdUJBQUMsWUFBWSxDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUUsS0FBSyxZQUFHLFFBQVEsR0FBeUIsQ0FBQztBQUNqRixDQUFDO0FBRUQsU0FBZ0IsUUFBUTtJQUN0QixNQUFNLE9BQU8sR0FBRyxJQUFBLGtCQUFVLEVBQUMsWUFBWSxDQUFDLENBQUM7SUFDekMsSUFBSSxPQUFPLEtBQUssU0FBUyxFQUFFLENBQUM7UUFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFDRCxPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy90aGVtZS9UaGVtZVByb3ZpZGVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVDb250ZXh0LFxuICB1c2VDb250ZXh0LFxuICB1c2VNZW1vLFxuICB1c2VTdGF0ZSxcbiAgdXNlRWZmZWN0LFxuICBSZWFjdE5vZGUsXG4gIHVzZUNhbGxiYWNrLFxufSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUaGVtZUNvbnRleHRWYWx1ZSwgRGVzaWduVG9rZW5zIH0gZnJvbSAnLi4vLi4vdHlwZXMvdG9rZW5zJztcbmltcG9ydCB7IGdldFN0b3JlZFRoZW1lLCBzZXRTdG9yZWRUaGVtZSwgaW5pdFRoZW1lUGVyc2lzdGVuY2UgfSBmcm9tICcuLi91dGlscy90aGVtZS1wZXJzaXN0ZW5jZSc7XG5cbmNvbnN0IFRoZW1lQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8VGhlbWVDb250ZXh0VmFsdWUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbmludGVyZmFjZSBUaGVtZVByb3ZpZGVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xuICBpbml0aWFsPzogJ2xpZ2h0JyB8ICdkYXJrJztcbn1cblxuY29uc3QgZGVmYXVsdFRva2VuczogRGVzaWduVG9rZW5zID0ge1xuICBjb2xvcjoge1xuICAgIHByaW1hcnk6ICcjMjU2M2ViJyxcbiAgICBzZWNvbmRhcnk6ICcjZTBmMmZlJyxcbiAgICBhY2NlbnQ6ICcjZTBmMmZlJyxcbiAgICBkZXN0cnVjdGl2ZTogJyNkYzI2MjYnLFxuICAgIHN1Y2Nlc3M6ICcjMTZhMzRhJyxcbiAgICB3YXJuaW5nOiAnI2Q5NzcwNicsXG4gIH0sXG4gIGJhY2tncm91bmQ6ICcjZmZmZmZmJyxcbiAgZm9yZWdyb3VuZDogJyMwZjE3MmEnLFxuICByYWRpdXM6ICcwLjVyZW0nLFxuICBzaGFkb3c6IHtcbiAgICBzbTogJzAgMXB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4wNSknLFxuICAgIG1kOiAnMCA0cHggNnB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA3KScsXG4gICAgbGc6ICcwIDEwcHggMTVweCAtM3B4IHJnYmEoMCwgMCwgMCwgMC4wOCknLFxuICB9LFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIFRoZW1lUHJvdmlkZXIoeyBjaGlsZHJlbiwgaW5pdGlhbCB9OiBUaGVtZVByb3ZpZGVyUHJvcHMpIHtcbiAgY29uc3QgW21vZGUsIHNldE1vZGVTdGF0ZV0gPSB1c2VTdGF0ZTwnbGlnaHQnIHwgJ2RhcmsnPigoKSA9PiB7XG4gICAgaWYgKGluaXRpYWwpIHJldHVybiBpbml0aWFsO1xuICAgIGNvbnN0IHN0b3JlZCA9IGdldFN0b3JlZFRoZW1lKCk7XG4gICAgcmV0dXJuIHN0b3JlZCA9PT0gJ2RhcmsnID8gJ2RhcmsnIDogJ2xpZ2h0JztcbiAgfSk7XG5cbiAgY29uc3QgW3RoZW1lVG9rZW5zLCBzZXRUaGVtZVRva2Vuc10gPSB1c2VTdGF0ZTxEZXNpZ25Ub2tlbnM+KGRlZmF1bHRUb2tlbnMpO1xuXG4gIGNvbnN0IHNldE1vZGUgPSB1c2VDYWxsYmFjaygobmV3TW9kZTogJ2xpZ2h0JyB8ICdkYXJrJykgPT4ge1xuICAgIHNldE1vZGVTdGF0ZShuZXdNb2RlKTtcbiAgICBzZXRTdG9yZWRUaGVtZShuZXdNb2RlKTtcbiAgICBcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyaycsIG5ld01vZGUgPT09ICdkYXJrJyk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzZXRUb2tlbnMgPSB1c2VDYWxsYmFjaygocGF0Y2g6IFBhcnRpYWw8RGVzaWduVG9rZW5zPikgPT4ge1xuICAgIHNldFRoZW1lVG9rZW5zKChwcmV2KSA9PiAoeyAuLi5wcmV2LCAuLi5wYXRjaCB9KSBhcyBEZXNpZ25Ub2tlbnMpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjbGVhbnVwID0gaW5pdFRoZW1lUGVyc2lzdGVuY2UoKTtcbiAgICBcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyaycsIG1vZGUgPT09ICdkYXJrJyk7XG5cbiAgICByZXR1cm4gY2xlYW51cDtcbiAgfSwgW21vZGVdKTtcblxuICBjb25zdCB2YWx1ZSA9IHVzZU1lbW88VGhlbWVDb250ZXh0VmFsdWU+KFxuICAgICgpID0+ICh7XG4gICAgICB0b2tlbnM6IHRoZW1lVG9rZW5zLFxuICAgICAgc2V0VG9rZW5zLFxuICAgICAgbW9kZSxcbiAgICAgIHNldE1vZGUsXG4gICAgfSksXG4gICAgW3RoZW1lVG9rZW5zLCBtb2RlLCBzZXRUb2tlbnMsIHNldE1vZGVdXG4gICk7XG5cbiAgcmV0dXJuIDxUaGVtZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT57Y2hpbGRyZW59PC9UaGVtZUNvbnRleHQuUHJvdmlkZXI+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlVGhlbWUoKTogVGhlbWVDb250ZXh0VmFsdWUge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VUaGVtZSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgVGhlbWVQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuIl0sInZlcnNpb24iOjN9