662b78976e555b352c9b67688ebb060a
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
require("@testing-library/jest-dom");
const DatePicker_1 = require("../DatePicker");
const ThemeProvider_1 = require("../../theme/ThemeProvider");
describe('DatePicker', () => {
    let mockOnChange;
    beforeEach(() => {
        mockOnChange = jest.fn();
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    const renderDatePicker = (props = {}) => {
        return (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(DatePicker_1.DatePicker, { ...props, onChange: mockOnChange }) }));
    };
    it('应该渲染日期选择器', () => {
        renderDatePicker();
        expect(react_1.screen.getByRole('textbox')).toBeInTheDocument();
    });
    it('应该显示占位符', () => {
        renderDatePicker({ placeholder: '选择日期' });
        expect(react_1.screen.getByPlaceholderText('选择日期')).toBeInTheDocument();
    });
    it('应该在输入框点击时打开日历', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Sun')).toBeInTheDocument();
        });
    });
    it('应该在点击外部时关闭日历', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Sun')).toBeInTheDocument();
        });
        react_1.fireEvent.mouseDown(document.body);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.queryByText('Sun')).not.toBeInTheDocument();
        });
    });
    it('应该在点击日期时调用 onChange', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Sun')).toBeInTheDocument();
        });
        react_1.fireEvent.click(react_1.screen.getByText('15'));
        expect(mockOnChange).toHaveBeenCalledWith(expect.any(Date));
    });
    it('应该禁用日期选择器', () => {
        renderDatePicker({ disabled: true });
        const input = react_1.screen.getByRole('textbox');
        expect(input).toBeDisabled();
    });
    it('应该支持自定义格式', () => {
        const testDate = new Date(2026, 1, 15);
        renderDatePicker({ value: testDate, format: 'DD/MM/YYYY' });
        expect(react_1.screen.getByRole('textbox')).toHaveValue('15/02/2026');
    });
    it('应该支持最小日期限制', () => {
        const minDate = new Date(2026, 1, 10);
        renderDatePicker({ minDate });
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        react_1.fireEvent.change(input, { target: { value: '2026-01-05' } });
        expect(mockOnChange).not.toHaveBeenCalled();
    });
    it('应该支持最大日期限制', () => {
        const maxDate = new Date(2026, 0, 20, 12, 0, 0);
        renderDatePicker({ maxDate });
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        react_1.fireEvent.change(input, { target: { value: '2026-01-25' } });
        expect(mockOnChange).not.toHaveBeenCalled();
    });
    it('应该支持自定义禁用日期', async () => {
        const disabledDates = (date) => date.getDate() === 13;
        renderDatePicker({ disabledDates });
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Sun')).toBeInTheDocument();
        });
        react_1.fireEvent.change(input, { target: { value: '2026-02-13' } });
        expect(mockOnChange).not.toHaveBeenCalled();
    });
    it('应该显示当前月份', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        const today = new Date();
        const monthYear = today.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText(monthYear)).toBeInTheDocument();
        });
    });
    it('应该支持月份导航', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Sun')).toBeInTheDocument();
        });
        dom_1.screen.getByText(/February 2026/);
        const prevButton = react_1.screen.getByLabelText('Previous month');
        const nextButton = react_1.screen.getByLabelText('Next month');
        react_1.fireEvent.click(prevButton);
        expect(react_1.screen.getByText(/January 2026/)).toBeInTheDocument();
        react_1.fireEvent.click(nextButton);
        expect(react_1.screen.getByText(/February 2026/)).toBeInTheDocument();
    });
    it('应该显示今天按钮', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Today')).toBeInTheDocument();
        });
    });
    it('应该在点击今天按钮时选择今天', async () => {
        renderDatePicker();
        const input = react_1.screen.getByRole('textbox');
        react_1.fireEvent.click(input);
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Today')).toBeInTheDocument();
        });
        const todayButton = react_1.screen.getByText('Today');
        react_1.fireEvent.click(todayButton);
        expect(mockOnChange).toHaveBeenCalledWith(expect.any(Date));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL0RhdGVQaWNrZXIudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7O0FBQ0Esa0RBQTRFO0FBQzVFLDhDQUEyRDtBQUMzRCxxQ0FBbUM7QUFDbkMsOENBQTJDO0FBQzNDLDZEQUEwRDtBQUUxRCxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtJQUMxQixJQUFJLFlBQXVCLENBQUM7SUFFNUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFlBQVksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFLEVBQUUsRUFBRTtRQUN0QyxPQUFPLElBQUEsY0FBTSxFQUNYLHVCQUFDLDZCQUFhLGNBQ1osdUJBQUMsdUJBQVUsT0FBSyxLQUFLLEVBQUUsUUFBUSxFQUFFLFlBQVksR0FBSSxHQUNuQyxDQUNqQixDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUYsRUFBRSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7UUFDbkIsZ0JBQWdCLEVBQUUsQ0FBQztRQUNuQixNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUNqQixnQkFBZ0IsQ0FBQyxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxjQUFNLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQ2xFLENBQUMsQ0FB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Q0FBQyxLQUFLLENBQUMsQ0FBQztRQUV2QixNQUFNLElBQUEsZUFBTyxFQUFDLEdBQUcsRUFBRTtZQUNqQixNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLElBQUksRUFBRTtRQUM5QixnQkFBZ0IsRUFBRSxDQUFDO1FBQ25CLE1BQU0sS0FBSyxHQUFHLGNBQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDMUMsaUJBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdkIsTUFBTSxJQUFBLGVBQU8sRUFBQyxHQUFHLEVBQUU7WUFDakIsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3hELENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxXQUFXLEdBQUcsY0FBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxpQkFBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUU3QixNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL0RhdGVQaWNrZXIudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgc2NyZWVuIGFzIHNjcmVlbkRvbSB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvZG9tJztcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XG5pbXBvcnQgeyBEYXRlUGlja2VyIH0gZnJvbSAnLi4vRGF0ZVBpY2tlcic7XG5pbXBvcnQgeyBUaGVtZVByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vdGhlbWUvVGhlbWVQcm92aWRlcic7XG5cbmRlc2NyaWJlKCdEYXRlUGlja2VyJywgKCkgPT4ge1xuICBsZXQgbW9ja09uQ2hhbmdlOiBqZXN0Lk1vY2s7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja09uQ2hhbmdlID0gamVzdC5mbigpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBjb25zdCByZW5kZXJEYXRlUGlja2VyID0gKHByb3BzID0ge30pID0+IHtcbiAgICByZXR1cm4gcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxEYXRlUGlja2VyIHsuLi5wcm9wc30gb25DaGFuZ2U9e21vY2tPbkNoYW5nZX0gLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuICB9O1xuXG4gIGl0KCflupTor6XmuLLmn5Pml6XmnJ/pgInmi6nlmagnLCAoKSA9PiB7XG4gICAgcmVuZGVyRGF0ZVBpY2tlcigpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCd0ZXh0Ym94JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmmL7npLrljaDkvY3nrKYnLCAoKSA9PiB7XG4gICAgcmVuZGVyRGF0ZVBpY2tlcih7IHBsYWNlaG9sZGVyOiAn6YCJ5oup5pel5pyfJyB9KTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KCfpgInmi6nml6XmnJ8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOi+k+WFpeahhueCueWHu+aXtuaJk+W8gOaXpeWOhicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXJEYXRlUGlja2VyKCk7XG4gICAgY29uc3QgaW5wdXQgPSBzY3JlZW4uZ2V0QnlSb2xlKCd0ZXh0Ym94Jyk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGlucHV0KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1N1bicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5Zyo54K55Ye75aSW6YOo5pe25YWz6Zet5pel5Y6GJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckRhdGVQaWNrZXIoKTtcbiAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKTtcblxuICAgIGZpcmVFdmVudC5jbGljayhpbnB1dCk7XG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3VuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBmaXJlRXZlbnQubW91c2VEb3duKGRvY3VtZW50LmJvZHkpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdTdW4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XlnKjngrnlh7vml6XmnJ/ml7bosIPnlKggb25DaGFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyRGF0ZVBpY2tlcigpO1xuICAgIGNvbnN0IGlucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgndGV4dGJveCcpO1xuICAgIGZpcmVFdmVudC5jbGljayhpbnB1dCk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTdW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcxNScpKTtcblxuICAgIGV4cGVjdChtb2NrT25DaGFuZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5hbnkoRGF0ZSkpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l56aB55So5pel5pyf6YCJ5oup5ZmoJywgKCkgPT4ge1xuICAgIHJlbmRlckRhdGVQaWNrZXIoeyBkaXNhYmxlZDogdHJ1ZSB9KTtcbiAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKTtcbiAgICBleHBlY3QoaW5wdXQpLnRvQmVEaXNhYmxlZCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB6Ieq5a6a5LmJ5qC85byPJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUoMjAyNiwgMSwgMTUpO1xuICAgIHJlbmRlckRhdGVQaWNrZXIoeyB2YWx1ZTogdGVzdERhdGUsIGZvcm1hdDogJ0REL01NL1lZWVknIH0pO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKSkudG9IYXZlVmFsdWUoJzE1LzAyLzIwMjYnKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeacgOWwj+aXpeacn+mZkOWIticsICgpID0+IHtcbiAgICBjb25zdCBtaW5EYXRlID0gbmV3IERhdGUoMjAyNiwgMSwgMTApO1xuICAgIHJlbmRlckRhdGVQaWNrZXIoeyBtaW5EYXRlIH0pO1xuXG4gICAgY29uc3QgaW5wdXQgPSBzY3JlZW4uZ2V0QnlSb2xlKCd0ZXh0Ym94Jyk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGlucHV0KTtcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UoaW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnMjAyNi0wMS0wNScgfSB9KTtcblxuICAgIGV4cGVjdChtb2NrT25DaGFuZ2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmlK/mjIHmnIDlpKfml6XmnJ/pmZDliLYnLCAoKSA9PiB7XG4gICAgY29uc3QgbWF4RGF0ZSA9IG5ldyBEYXRlKDIwMjYsIDAsIDIwLCAxMiwgMCwgMCk7XG4gICAgcmVuZGVyRGF0ZVBpY2tlcih7IG1heERhdGUgfSk7XG5cbiAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soaW5wdXQpO1xuXG4gICAgZmlyZUV2ZW50LmNoYW5nZShpbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICcyMDI2LTAxLTI1JyB9IH0pO1xuXG4gICAgZXhwZWN0KG1vY2tPbkNoYW5nZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaUr+aMgeiHquWumuS5ieemgeeUqOaXpeacnycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBkaXNhYmxlZERhdGVzID0gKGRhdGU6IERhdGUpID0+IGRhdGUuZ2V0RGF0ZSgpID09PSAxMztcbiAgICByZW5kZXJEYXRlUGlja2VyKHsgZGlzYWJsZWREYXRlcyB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgndGV4dGJveCcpO1xuICAgIGZpcmVFdmVudC5jbGljayhpbnB1dCk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTdW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UoaW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnMjAyNi0wMi0xMycgfSB9KTtcblxuICAgIGV4cGVjdChtb2NrT25DaGFuZ2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmmL7npLrlvZPliY3mnIjku70nLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyRGF0ZVBpY2tlcigpO1xuICAgIGNvbnN0IGlucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgndGV4dGJveCcpO1xuICAgIGZpcmVFdmVudC5jbGljayhpbnB1dCk7XG5cbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgbW9udGhZZWFyID0gdG9kYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgbW9udGg6ICdsb25nJywgeWVhcjogJ251bWVyaWMnIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChtb250aFllYXIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB5pyI5Lu95a+86IiqJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckRhdGVQaWNrZXIoKTtcbiAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soaW5wdXQpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3VuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBzY3JlZW5Eb20uZ2V0QnlUZXh0KC9GZWJydWFyeSAyMDI2Lyk7XG4gICAgY29uc3QgcHJldkJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUHJldmlvdXMgbW9udGgnKTtcbiAgICBjb25zdCBuZXh0QnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdOZXh0IG1vbnRoJyk7XG5cbiAgICBmaXJlRXZlbnQuY2xpY2socHJldkJ1dHRvbik7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0phbnVhcnkgMjAyNi8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgZmlyZUV2ZW50LmNsaWNrKG5leHRCdXR0b24pO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9GZWJydWFyeSAyMDI2LykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCflupTor6XmmL7npLrku4rlpKnmjInpkq4nLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyRGF0ZVBpY2tlcigpO1xuICAgIGNvbnN0IGlucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgndGV4dGJveCcpO1xuICAgIGZpcmVFdmVudC5jbGljayhpbnB1dCk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUb2RheScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5Zyo54K55Ye75LuK5aSp5oyJ6ZKu5pe26YCJ5oup5LuK5aSpJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckRhdGVQaWNrZXIoKTtcbiAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soaW5wdXQpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVG9kYXknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRvZGF5QnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnVG9kYXknKTtcbiAgICBmaXJlRXZlbnQuY2xpY2sodG9kYXlCdXR0b24pO1xuXG4gICAgZXhwZWN0KG1vY2tPbkNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShEYXRlKSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=