{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/theme/ThemeProvider.tsx","mappings":";;AAsCA,sCAuCC;AAED,4BAMC;;AArFD,iCAQe;AAEf,kEAAkG;AAElG,MAAM,YAAY,GAAG,IAAA,qBAAa,EAAgC,SAAS,CAAC,CAAC;AAO7E,MAAM,aAAa,GAAiB;IAClC,KAAK,EAAE;QACL,OAAO,EAAE,SAAS;QAClB,SAAS,EAAE,SAAS;QACpB,MAAM,EAAE,SAAS;QACjB,WAAW,EAAE,SAAS;QACtB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;KACnB;IACD,UAAU,EAAE,SAAS;IACrB,UAAU,EAAE,SAAS;IACrB,MAAM,EAAE,QAAQ;IAChB,MAAM,EAAE;QACN,EAAE,EAAE,iCAAiC;QACrC,EAAE,EAAE,oCAAoC;QACxC,EAAE,EAAE,sCAAsC;KAC3C;CACF,CAAC;AAEF,SAAgB,aAAa,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAsB;IACrE,MAAM,CAAC,IAAI,EAAE,YAAY,CAAC,GAAG,IAAA,gBAAQ,EAAmB,GAAG,EAAE;QAC3D,IAAI,OAAO;YAAE,OAAO,OAAO,CAAC;QAC5B,MAAM,MAAM,GAAG,IAAA,kCAAc,GAAE,CAAC;QAChC,OAAO,MAAM,KAAK,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,IAAA,gBAAQ,EAAe,aAAa,CAAC,CAAC;IAE5E,MAAM,OAAO,GAAG,IAAA,mBAAW,EAAC,CAAC,OAAyB,EAAE,EAAE;QACxD,YAAY,CAAC,OAAO,CAAC,CAAC;QACtB,IAAA,kCAAc,EAAC,OAAO,CAAC,CAAC;QAExB,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,KAAK,MAAM,CAAC,CAAC;IACxE,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,SAAS,GAAG,IAAA,mBAAW,EAAC,CAAC,KAA4B,EAAE,EAAE;QAC7D,cAAc,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,GAAG,IAAI,EAAE,GAAG,KAAK,EAAE,CAAiB,CAAC,CAAC;IACpE,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,MAAM,OAAO,GAAG,IAAA,wCAAoB,GAAE,CAAC;QAEvC,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,KAAK,MAAM,CAAC,CAAC;QAEnE,OAAO,OAAO,CAAC;IACjB,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;IAEX,MAAM,KAAK,GAAG,IAAA,eAAO,EACnB,GAAG,EAAE,CAAC,CAAC;QACL,MAAM,EAAE,WAAW;QACnB,SAAS;QACT,IAAI;QACJ,OAAO;KACR,CAAC,EACF,CAAC,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,CAAC,CACxC,CAAC;IAEF,OAAO,uBAAC,YAAY,CAAC,QAAQ,IAAC,KAAK,EAAE,KAAK,YAAG,QAAQ,GAAyB,CAAC;AACjF,CAAC;AAED,SAAgB,QAAQ;IACtB,MAAM,OAAO,GAAG,IAAA,kBAAU,EAAC,YAAY,CAAC,CAAC;IACzC,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAC;IAClE,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/theme/ThemeProvider.tsx"],"sourcesContent":["import {\n  createContext,\n  useContext,\n  useMemo,\n  useState,\n  useEffect,\n  ReactNode,\n  useCallback,\n} from 'react';\nimport { ThemeContextValue, DesignTokens } from '../../types/tokens';\nimport { getStoredTheme, setStoredTheme, initThemePersistence } from '../utils/theme-persistence';\n\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: ReactNode;\n  initial?: 'light' | 'dark';\n}\n\nconst defaultTokens: DesignTokens = {\n  color: {\n    primary: '#2563eb',\n    secondary: '#e0f2fe',\n    accent: '#e0f2fe',\n    destructive: '#dc2626',\n    success: '#16a34a',\n    warning: '#d97706',\n  },\n  background: '#ffffff',\n  foreground: '#0f172a',\n  radius: '0.5rem',\n  shadow: {\n    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\n    md: '0 4px 6px -1px rgba(0, 0, 0, 0.07)',\n    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.08)',\n  },\n};\n\nexport function ThemeProvider({ children, initial }: ThemeProviderProps) {\n  const [mode, setModeState] = useState<'light' | 'dark'>(() => {\n    if (initial) return initial;\n    const stored = getStoredTheme();\n    return stored === 'dark' ? 'dark' : 'light';\n  });\n\n  const [themeTokens, setThemeTokens] = useState<DesignTokens>(defaultTokens);\n\n  const setMode = useCallback((newMode: 'light' | 'dark') => {\n    setModeState(newMode);\n    setStoredTheme(newMode);\n    \n    document.documentElement.classList.toggle('dark', newMode === 'dark');\n  }, []);\n\n  const setTokens = useCallback((patch: Partial<DesignTokens>) => {\n    setThemeTokens((prev) => ({ ...prev, ...patch }) as DesignTokens);\n  }, []);\n\n  useEffect(() => {\n    const cleanup = initThemePersistence();\n    \n    document.documentElement.classList.toggle('dark', mode === 'dark');\n\n    return cleanup;\n  }, [mode]);\n\n  const value = useMemo<ThemeContextValue>(\n    () => ({\n      tokens: themeTokens,\n      setTokens,\n      mode,\n      setMode,\n    }),\n    [themeTokens, mode, setTokens, setMode]\n  );\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n}\n\nexport function useTheme(): ThemeContextValue {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n"],"version":3}