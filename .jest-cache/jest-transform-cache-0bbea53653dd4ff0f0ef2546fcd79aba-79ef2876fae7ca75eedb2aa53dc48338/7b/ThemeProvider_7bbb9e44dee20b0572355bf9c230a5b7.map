{"version":3,"names":["cov_2kqxclzu8q","actualCoverage","s","exports","ThemeProvider","useTheme","react_1","require","theme_persistence_1","ThemeContext","createContext","undefined","defaultTokens","color","primary","secondary","accent","destructive","success","warning","background","foreground","radius","shadow","sm","md","lg","children","initial","f","mode","setModeState","useState","b","stored","getStoredTheme","themeTokens","setThemeTokens","setMode","useCallback","newMode","setStoredTheme","document","documentElement","classList","toggle","setTokens","patch","prev","useEffect","cleanup","initThemePersistence","value","useMemo","tokens","jsx_runtime_1","jsx","Provider","context","useContext","Error"],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/theme/ThemeProvider.tsx"],"sourcesContent":["import {\n  createContext,\n  useContext,\n  useMemo,\n  useState,\n  useEffect,\n  ReactNode,\n  useCallback,\n} from 'react';\nimport { ThemeContextValue, DesignTokens } from '../../types/tokens';\nimport { getStoredTheme, setStoredTheme, initThemePersistence } from '../utils/theme-persistence';\n\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: ReactNode;\n  initial?: 'light' | 'dark';\n}\n\nconst defaultTokens: DesignTokens = {\n  color: {\n    primary: '#2563eb',\n    secondary: '#e0f2fe',\n    accent: '#e0f2fe',\n    destructive: '#dc2626',\n    success: '#16a34a',\n    warning: '#d97706',\n  },\n  background: '#ffffff',\n  foreground: '#0f172a',\n  radius: '0.5rem',\n  shadow: {\n    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\n    md: '0 4px 6px -1px rgba(0, 0, 0, 0.07)',\n    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.08)',\n  },\n};\n\nexport function ThemeProvider({ children, initial }: ThemeProviderProps) {\n  const [mode, setModeState] = useState<'light' | 'dark'>(() => {\n    if (initial) return initial;\n    const stored = getStoredTheme();\n    return stored === 'dark' ? 'dark' : 'light';\n  });\n\n  const [themeTokens, setThemeTokens] = useState<DesignTokens>(defaultTokens);\n\n  const setMode = useCallback((newMode: 'light' | 'dark') => {\n    setModeState(newMode);\n    setStoredTheme(newMode);\n    \n    document.documentElement.classList.toggle('dark', newMode === 'dark');\n  }, []);\n\n  const setTokens = useCallback((patch: Partial<DesignTokens>) => {\n    setThemeTokens((prev) => ({ ...prev, ...patch }) as DesignTokens);\n  }, []);\n\n  useEffect(() => {\n    const cleanup = initThemePersistence();\n    \n    document.documentElement.classList.toggle('dark', mode === 'dark');\n\n    return cleanup;\n  }, [mode]);\n\n  const value = useMemo<ThemeContextValue>(\n    () => ({\n      tokens: themeTokens,\n      setTokens,\n      mode,\n      setMode,\n    }),\n    [themeTokens, mode, setTokens, setMode]\n  );\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n}\n\nexport function useTheme(): ThemeContextValue {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n"],"mappings":"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","ignoreList":[]}