92912bd1de24eb5475c81d2e8fff6243
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * @file CSP Provider测试
 * @description 测试CSP Provider功能
 * @module __tests__/security/CSPProvider.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-19
 */
const React = __importStar(require("react"));
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
const CSPProvider_1 = require("../CSPProvider");
describe('CSP Provider Module', () => {
    beforeEach(() => {
        (0, react_1.cleanup)();
    });
    describe('CSPProvider', () => {
        it('应该提供默认CSP配置', () => {
            const TestComponent = () => {
                const { config } = (0, CSPProvider_1.useCSP)();
                return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "config", children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "default-src", children: config['default-src'] }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "enabled", children: config.enabled ? 'enabled' : 'disabled' })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
        });
        it('应该支持自定义配置', () => {
            const customConfig = {
                'script-src': "'self'",
                'style-src': "'self' 'unsafe-inline'",
            };
            const TestComponent = () => {
                const { config } = (0, CSPProvider_1.useCSP)();
                return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "config", children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "script-src", children: config['script-src'] }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "style-src", children: config['style-src'] })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: customConfig, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('script-src')).toBeInTheDocument();
            expect(dom_1.screen.getByTestId('style-src')).toBeInTheDocument();
        });
        it('应该支持自定义nonce', () => {
            const customNonce = 'custom-nonce-123';
            const TestComponent = () => {
                const { nonce } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "nonce", children: nonce });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { nonce: customNonce, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const nonceDiv = dom_1.screen.getByTestId('nonce');
            expect(nonceDiv.textContent).toBe(customNonce);
        });
        it('应该处理没有nonce的情况', () => {
            const TestComponent = () => {
                const { nonce } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "nonce", children: nonce || 'no nonce' });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const nonceDiv = dom_1.screen.getByTestId('nonce');
            expect(nonceDiv.textContent).toBe('no nonce');
        });
        it('应该支持禁用CSP', () => {
            const TestComponent = () => {
                const { enabled } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "enabled", children: enabled ? 'enabled' : 'disabled' });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { enabled: false, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const enabledDiv = dom_1.screen.getByTestId('enabled');
            expect(enabledDiv.textContent).toBe('disabled');
        });
        it('应该支持report-only模式', async () => {
            const onViolation = jest.fn();
            const TestComponent = () => {
                const { config } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "config", children: config.reportOnly ? 'report-only' : 'enforce' });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { reportOnly: true, onViolation: onViolation, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
            });
        });
        it('应该合并默认配置和自定义配置', () => {
            const customConfig = {
                'script-src': "'self'",
            };
            const TestComponent = () => {
                const { config } = (0, CSPProvider_1.useCSP)();
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "default-src", children: config['default-src'] }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "script-src", children: config['script-src'] })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: customConfig, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('default-src')).toHaveTextContent("'self'");
            expect(dom_1.screen.getByTestId('script-src')).toHaveTextContent("'self'");
        });
        it('应该更新配置', async () => {
            const TestComponent = () => {
                const { updateConfig, config } = (0, CSPProvider_1.useCSP)();
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "script-src", children: config['script-src'] }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "update", onClick: () => updateConfig({ 'script-src': "'self'" }), children: "Update" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const updateButton = dom_1.screen.getByTestId('update');
            await (0, react_1.act)(async () => {
                updateButton.click();
            });
            await (0, react_1.waitFor)(() => {
                expect(dom_1.screen.getByTestId('script-src')).toHaveTextContent("'self'");
            });
        });
        it('应该在禁用时不添加meta标签', () => {
            const metaTagExists = () => {
                return document.querySelector('meta[http-equiv="Content-Security-Policy"]') !== null;
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { enabled: false, children: (0, jsx_runtime_1.jsx)("div", { children: "Test" }) }));
            expect(metaTagExists()).toBe(false);
        });
        it('应该在启用时添加meta标签', () => {
            const metaTagExists = () => {
                return document.querySelector('meta[http-equiv="Content-Security-Policy"]') !== null;
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { enabled: true, children: (0, jsx_runtime_1.jsx)("div", { children: "Test" }) }));
            expect(metaTagExists()).toBe(true);
        });
        it('应该在report-only模式下使用正确的meta标签', () => {
            const metaTagExists = () => {
                return (document.querySelector('meta[http-equiv="Content-Security-Policy-Report-Only"]') !== null);
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { reportOnly: true, children: (0, jsx_runtime_1.jsx)("div", { children: "Test" }) }));
            expect(metaTagExists()).toBe(true);
        });
        it('应该清理meta标签在卸载时', () => {
            const { unmount } = (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)("div", { children: "Test" }) }));
            const metaTagExists = () => {
                return document.querySelector('meta[http-equiv="Content-Security-Policy"]') !== null;
            };
            expect(metaTagExists()).toBe(true);
            unmount();
            expect(metaTagExists()).toBe(false);
        });
        it('应该处理多个CSPProvider实例', () => {
            const TestComponent = () => {
                const { nonce } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "nonce", children: nonce || 'no-nonce' });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { nonce: "first", children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { nonce: "second", children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }) }));
            expect(dom_1.screen.getByTestId('nonce')).toHaveTextContent('second');
        });
    });
    describe('useCSP Hook', () => {
        it('应该返回CSP相关的状态和方法', () => {
            const TestComponent = () => {
                const csp = (0, CSPProvider_1.useCSP)();
                expect(csp.config).toBeDefined();
                expect(csp.enabled).toBeDefined();
                expect(csp.updateConfig).toBeDefined();
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)("div", { "data-testid": "has-update", children: typeof csp.updateConfig === 'function' ? 'has-update' : 'no-update' }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('has-update')).toBeInTheDocument();
        });
        it('应该支持更新配置', async () => {
            const TestComponent = () => {
                const { updateConfig } = (0, CSPProvider_1.useCSP)();
                const [updated, setUpdated] = React.useState(false);
                const handleUpdate = async () => {
                    await updateConfig({ 'script-src': "'self'" });
                    setUpdated(true);
                };
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "updated", children: updated ? 'updated' : 'not-updated' }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "update", onClick: handleUpdate, children: "Update" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const updateButton = dom_1.screen.getByTestId('update');
            await (0, react_1.act)(async () => {
                updateButton.click();
            });
            await (0, react_1.waitFor)(() => {
                const updatedDiv = dom_1.screen.getByTestId('updated');
                expect(updatedDiv.textContent).toBe('updated');
            });
        });
    });
    describe('CSPScript', () => {
        it('应该在有nonce时添加nonce属性', () => {
            const customNonce = 'test-nonce-123';
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPScript, { nonce: customNonce, children: "console.log(\"test\");" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const scriptElement = document.querySelector('script[nonce]');
            expect(scriptElement).toBeTruthy();
        });
        it('应该在禁用时正常渲染', () => {
            const TestComponent = () => {
                return (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPScript, { children: "console.log(\"test\");" });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { enabled: false, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const scriptElement = document.querySelector('script');
            expect(scriptElement).toBeTruthy();
        });
    });
    describe('CSPStyle', () => {
        it('应该在有nonce时添加nonce属性', () => {
            const customNonce = 'test-nonce-456';
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPStyle, { nonce: customNonce, children: `body { color: red; }` }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const styleElement = document.querySelector('style[nonce]');
            expect(styleElement).toBeTruthy();
        });
        it('应该在禁用时正常渲染', () => {
            const TestComponent = () => {
                return (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPStyle, { children: `body { color: red; }` });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { enabled: false, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const styleElement = document.querySelector('style');
            expect(styleElement).toBeTruthy();
        });
    });
    describe('CSP违规处理', () => {
        it('应该处理CSP违规报告', () => {
            const onViolation = jest.fn();
            const TestComponent = () => {
                const { config } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "config", children: config.onViolation ? 'has-handler' : 'no-handler' });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { onViolation: onViolation, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
        });
    });
    describe('createStrictCSPConfig', () => {
        it('应该创建严格的CSP配置', () => {
            const config = (0, CSPProvider_1.createStrictCSPConfig)();
            expect(config['default-src']).toBe("'self'");
            expect(config['script-src']).toBe("'self' 'nonce-{nonce}'");
            expect(config['style-src']).toBe("'self' 'nonce-{nonce}'");
            expect(config['upgrade-insecure-requests']).toBe(true);
            expect(config['block-all-mixed-content']).toBe(true);
        });
    });
    describe('createModerateCSPConfig', () => {
        it('应该创建适度的CSP配置', () => {
            const config = (0, CSPProvider_1.createModerateCSPConfig)();
            expect(config['default-src']).toBe("'self'");
            expect(config['script-src']).toBe("'self' 'unsafe-inline' 'unsafe-eval' https:");
            expect(config['style-src']).toBe("'self' 'unsafe-inline' https:");
            expect(config['frame-ancestors']).toBe("'self'");
        });
    });
    describe('createPermissiveCSPConfig', () => {
        it('应该创建宽松的CSP配置', () => {
            const config = (0, CSPProvider_1.createPermissiveCSPConfig)();
            expect(config['default-src']).toBe("'self'");
            expect(config['script-src']).toBe("'self' 'unsafe-inline' 'unsafe-eval' https: http:");
            expect(config['style-src']).toBe("'self' 'unsafe-inline' https: http:");
            expect(config['img-src']).toBe("'self' data: https: http: blob:");
        });
    });
    describe('generateNonce', () => {
        it('应该生成随机的nonce', () => {
            const nonce1 = (0, CSPProvider_1.generateNonce)();
            const nonce2 = (0, CSPProvider_1.generateNonce)();
            expect(nonce1).toBeDefined();
            expect(nonce2).toBeDefined();
            expect(nonce1).not.toBe(nonce2);
        });
        it('应该生成字符串类型的nonce', () => {
            const nonce = (0, CSPProvider_1.generateNonce)();
            expect(typeof nonce).toBe('string');
        });
    });
    describe('withCSP', () => {
        it('应该包装组件并添加CSP', () => {
            const TestComponent = () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "test", children: "Test" });
            const WrappedComponent = (0, CSPProvider_1.withCSP)(TestComponent);
            (0, react_1.render)((0, jsx_runtime_1.jsx)(WrappedComponent, {}));
            expect(dom_1.screen.getByTestId('test')).toBeInTheDocument();
        });
        it('应该支持自定义配置', () => {
            const TestComponent = () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "test", children: "Test" });
            const customConfig = { 'script-src': "'self'" };
            const WrappedComponent = (0, CSPProvider_1.withCSP)(TestComponent, customConfig);
            (0, react_1.render)((0, jsx_runtime_1.jsx)(WrappedComponent, {}));
            expect(dom_1.screen.getByTestId('test')).toBeInTheDocument();
        });
        it('应该保留组件的displayName', () => {
            const TestComponent = () => (0, jsx_runtime_1.jsx)("div", { children: "Test" });
            TestComponent.displayName = 'TestComponent';
            const WrappedComponent = (0, CSPProvider_1.withCSP)(TestComponent);
            expect(WrappedComponent.displayName).toBe('withCSP(TestComponent)');
        });
    });
    describe('generateCSPMetaTag', () => {
        it('应该生成基本的CSP标签', () => {
            const config = {
                'default-src': "'self'",
                'script-src': "'self'",
            };
            const TestComponent = () => {
                const { config: cspConfig } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "config", children: JSON.stringify(cspConfig) });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
        });
        it('应该处理布尔值指令', () => {
            const config = {
                'default-src': "'self'",
                'upgrade-insecure-requests': true,
                'block-all-mixed-content': true,
            };
            const TestComponent = () => {
                const { config: cspConfig } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "config", children: JSON.stringify(cspConfig) });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
        });
        it('应该处理undefined值', () => {
            const config = {
                'default-src': "'self'",
                'script-src': undefined,
            };
            const TestComponent = () => {
                const { config: cspConfig } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "config", children: JSON.stringify(cspConfig) });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
        });
    });
    describe('isURLAllowed', () => {
        it('应该允许self URL', () => {
            const config = {
                'img-src': "'self'",
            };
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "/image.jpg", "data-testid": "img" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const imgElement = document.querySelector('img');
            expect(imgElement).toBeTruthy();
        });
        it('应该允许data URL', () => {
            const config = {
                'img-src': "'self' data:",
            };
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "data:image/png;base64,abc123", "data-testid": "img" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const imgElement = document.querySelector('img');
            expect(imgElement).toBeTruthy();
        });
        it('应该允许https URL', () => {
            const config = {
                'img-src': "'self' https:",
            };
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "https://example.com/image.jpg", "data-testid": "img" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const imgElement = document.querySelector('img');
            expect(imgElement).toBeTruthy();
        });
        it('应该允许http URL', () => {
            const config = {
                'img-src': "'self' http:",
            };
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "http://example.com/image.jpg", "data-testid": "img" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: config, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const imgElement = document.querySelector('img');
            expect(imgElement).toBeTruthy();
        });
    });
    describe('边界情况', () => {
        it('应该处理空配置', () => {
            const TestComponent = () => {
                const { config } = (0, CSPProvider_1.useCSP)();
                return (0, jsx_runtime_1.jsx)("div", { "data-testid": "config", children: JSON.stringify(config) });
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: {}, children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('config')).toBeInTheDocument();
        });
        it('应该处理多次更新配置', async () => {
            const TestComponent = () => {
                const { updateConfig, config } = (0, CSPProvider_1.useCSP)();
                const [updateCount, setUpdateCount] = React.useState(0);
                const handleUpdate = async () => {
                    await updateConfig({ 'script-src': "'self'" });
                    setUpdateCount((prev) => prev + 1);
                    await updateConfig({ 'style-src': "'self'" });
                    setUpdateCount((prev) => prev + 1);
                };
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "update-count", children: updateCount }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "script-src", children: config['script-src'] }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "update", onClick: handleUpdate, children: "Update" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const updateButton = dom_1.screen.getByTestId('update');
            await (0, react_1.act)(async () => {
                updateButton.click();
            });
            await (0, react_1.waitFor)(() => {
                const updateCountDiv = dom_1.screen.getByTestId('update-count');
                expect(updateCountDiv.textContent).toBe('2');
            });
        });
        it('应该处理没有提供children的情况', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)("div", { children: "Test" }) }));
        });
        it('应该处理在CSPProvider外使用useCSP', () => {
            const TestComponent = () => {
                try {
                    const csp = (0, CSPProvider_1.useCSP)();
                    return (0, jsx_runtime_1.jsx)("div", { "data-testid": "csp", children: JSON.stringify(csp) });
                }
                catch (error) {
                    return (0, jsx_runtime_1.jsx)("div", { "data-testid": "error", children: error.message });
                }
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestComponent, {}));
            expect(dom_1.screen.getByTestId('error')).toBeInTheDocument();
        });
    });
    describe('CSPScript 更多测试', () => {
        it('应该支持自定义属性', () => {
            const customNonce = 'test-nonce-789';
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPScript, { nonce: customNonce, "data-testid": "script", children: "console.log(\"test\");" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const scriptElement = document.querySelector('script');
            expect(scriptElement).toBeTruthy();
            expect(scriptElement?.getAttribute('nonce')).toBe(customNonce);
        });
        it('应该处理空children', () => {
            const customNonce = 'test-nonce-empty';
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPScript, { nonce: customNonce, "data-testid": "script" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const scriptElement = document.querySelector('script');
            expect(scriptElement).toBeTruthy();
        });
    });
    describe('CSPStyle 更多测试', () => {
        it('应该支持自定义属性', () => {
            const customNonce = 'test-nonce-style';
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPStyle, { nonce: customNonce, "data-testid": "style", children: `body { color: red; }` }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const styleElement = document.querySelector('style');
            expect(styleElement).toBeTruthy();
            expect(styleElement?.getAttribute('nonce')).toBe(customNonce);
        });
        it('应该处理空children', () => {
            const customNonce = 'test-nonce-empty-style';
            const TestComponent = () => {
                return ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPStyle, { nonce: customNonce, "data-testid": "style" }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            const styleElement = document.querySelector('style');
            expect(styleElement).toBeTruthy();
        });
    });
    describe('CSPImg', () => {
        it('应该在启用CSP时检查图片源', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "/test.jpg", alt: "Test", "data-testid": "test-img" }) }));
            expect(dom_1.screen.getByTestId('test-img')).toBeInTheDocument();
        });
        it('应该在禁用CSP时不检查图片源', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { enabled: false, children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "https://example.com/test.jpg", alt: "Test", "data-testid": "test-img" }) }));
            expect(dom_1.screen.getByTestId('test-img')).toBeInTheDocument();
        });
        it('应该警告不允许的图片源', () => {
            const consoleWarnSpy = jest.spyOn(console, 'warn').mockImplementation();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: { 'img-src': "'self'" }, children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "https://example.com/test.jpg", alt: "Test", "data-testid": "test-img" }) }));
            expect(dom_1.screen.getByTestId('test-img')).toBeInTheDocument();
            consoleWarnSpy.mockRestore();
        });
        it('应该允许self图片源', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: { 'img-src': "'self'" }, children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "/test.jpg", alt: "Test", "data-testid": "test-img" }) }));
            expect(dom_1.screen.getByTestId('test-img')).toBeInTheDocument();
        });
        it('应该允许data图片源', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { config: { 'img-src': "'self' data:" }, children: (0, jsx_runtime_1.jsx)(CSPProvider_1.CSPImg, { src: "data:image/png;base64,test", alt: "Test", "data-testid": "test-img" }) }));
            expect(dom_1.screen.getByTestId('test-img')).toBeInTheDocument();
        });
    });
    describe('useCSP', () => {
        it('应该在Provider外使用时抛出错误', () => {
            const TestComponent = () => {
                try {
                    (0, CSPProvider_1.useCSP)();
                    return (0, jsx_runtime_1.jsx)("div", { "data-testid": "no-error", children: "No error" });
                }
                catch {
                    return (0, jsx_runtime_1.jsx)("div", { "data-testid": "error", children: "Error" });
                }
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestComponent, {}));
            expect(dom_1.screen.getByTestId('error')).toBeInTheDocument();
        });
        it('应该返回正确的context值', () => {
            const TestComponent = () => {
                const csp = (0, CSPProvider_1.useCSP)();
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "enabled", children: csp.enabled ? 'enabled' : 'disabled' }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "has-config", children: csp.config ? 'has-config' : 'no-config' }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "has-update", children: typeof csp.updateConfig === 'function' ? 'has-update' : 'no-update' })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(CSPProvider_1.CSPProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
            expect(dom_1.screen.getByTestId('enabled')).toHaveTextContent('enabled');
            expect(dom_1.screen.getByTestId('has-config')).toHaveTextContent('has-config');
            expect(dom_1.screen.getByTestId('has-update')).toHaveTextContent('has-update');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3NlY3VyaXR5L19fdGVzdHNfXy9DU1BQcm92aWRlci50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7OztHQU9HO0FBRUgsNkNBQStCO0FBQy9CLGtEQUFrRjtBQUNsRiw4Q0FBOEM7QUFFOUMsZ0RBV3dCO0FBRXhCLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7SUFDbkMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUEsZUFBTyxHQUFFLENBQUM7SUFDWixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQzNCLEVBQUUsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1lBQ3JCLE1BQU0sYUFBYSxHQUFHLEdBQUcsRUFBRTtnQkFDekIsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUEsb0JBQU0sR0FBRSxDQUFDO2dCQUU1QixPQUFPLENBQ0wsZ0RBQWlCLFFBQVEsYUFDdkIsK0NBQWlCLGFBQWEsWUFBRSxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQU8sRUFDNUQsK0NBQWlCLFNBQVMsWUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBTyxJQUN0RSxDQUNQLENBQUM7WUFDSixDQUFDLENBQUM7WUFFRixJQUFBLGNBQU0sRUFDSix1QkFBQyx5QkFBVyxjQUNWLHVCQUFDLGFBQWEsS0FBRyxHQUNMLENBQ2YsQ0FBQztZQUVGLE1BQU0sQ0FBQyxZQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO1lBQ25CLE1BQU0sWUFBWSxHQUFHO2dCQUNuQixZQUFZLEVBQUUs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Q0FBQyxDQUFDO1lBRUYsSUFBQSxjQUFNLEVBQ0osdUJBQUMseUJBQVcsY0FDVix1QkFBQyxhQUFhLEtBQUcsR0FDTCxDQUNmLENBQUM7WUFFRixNQUFNLENBQUMsWUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ25FLE1BQU0sQ0FBQyxZQUFNLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDekUsTUFBTSxDQUFDLFlBQU0sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3NlY3VyaXR5L19fdGVzdHNfXy9DU1BQcm92aWRlci50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIENTUCBQcm92aWRlcua1i+ivlVxuICogQGRlc2NyaXB0aW9uIOa1i+ivlUNTUCBQcm92aWRlcuWKn+iDvVxuICogQG1vZHVsZSBfX3Rlc3RzX18vc2VjdXJpdHkvQ1NQUHJvdmlkZXIudGVzdFxuICogQGF1dGhvciBZWUPCs1xuICogQHZlcnNpb24gMS4wLjBcbiAqIEBjcmVhdGVkIDIwMjYtMDItMTlcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCwgd2FpdEZvciwgY2xlYW51cCwgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L2RvbSc7XG5cbmltcG9ydCB7XG4gIENTUFByb3ZpZGVyLFxuICB1c2VDU1AsXG4gIENTUFNjcmlwdCxcbiAgQ1NQU3R5bGUsXG4gIENTUEltZyxcbiAgY3JlYXRlU3RyaWN0Q1NQQ29uZmlnLFxuICBjcmVhdGVNb2RlcmF0ZUNTUENvbmZpZyxcbiAgY3JlYXRlUGVybWlzc2l2ZUNTUENvbmZpZyxcbiAgZ2VuZXJhdGVOb25jZSxcbiAgd2l0aENTUCxcbn0gZnJvbSAnLi4vQ1NQUHJvdmlkZXInO1xuXG5kZXNjcmliZSgnQ1NQIFByb3ZpZGVyIE1vZHVsZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xlYW51cCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ1NQUHJvdmlkZXInLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaPkOS+m+m7mOiupENTUOmFjee9ricsICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnIH0gPSB1c2VDU1AoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJjb25maWdcIj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkZWZhdWx0LXNyY1wiPntjb25maWdbJ2RlZmF1bHQtc3JjJ119PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZW5hYmxlZFwiPntjb25maWcuZW5hYmxlZCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY29uZmlnJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB6Ieq5a6a5LmJ6YWN572uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tQ29uZmlnID0ge1xuICAgICAgICAnc2NyaXB0LXNyYyc6IFwiJ3NlbGYnXCIsXG4gICAgICAgICdzdHlsZS1zcmMnOiBcIidzZWxmJyAndW5zYWZlLWlubGluZSdcIixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnIH0gPSB1c2VDU1AoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJjb25maWdcIj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzY3JpcHQtc3JjXCI+e2NvbmZpZ1snc2NyaXB0LXNyYyddfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0eWxlLXNyY1wiPntjb25maWdbJ3N0eWxlLXNyYyddfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgY29uZmlnPXtjdXN0b21Db25maWd9PlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzY3JpcHQtc3JjJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdHlsZS1zcmMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmlK/mjIHoh6rlrprkuYlub25jZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbU5vbmNlID0gJ2N1c3RvbS1ub25jZS0xMjMnO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IG5vbmNlIH0gPSB1c2VDU1AoKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cIm5vbmNlXCI+e25vbmNlfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIG5vbmNlPXtjdXN0b21Ob25jZX0+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG5vbmNlRGl2ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdub25jZScpO1xuICAgICAgZXhwZWN0KG5vbmNlRGl2LnRleHRDb250ZW50KS50b0JlKGN1c3RvbU5vbmNlKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbmsqHmnIlub25jZeeahOaDheWGtScsICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbm9uY2UgfSA9IHVzZUNTUCgpO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwibm9uY2VcIj57bm9uY2UgfHwgJ25vIG5vbmNlJ308L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgbm9uY2VEaXYgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ25vbmNlJyk7XG4gICAgICBleHBlY3Qobm9uY2VEaXYudGV4dENvbnRlbnQpLnRvQmUoJ25vIG5vbmNlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5pSv5oyB56aB55SoQ1NQJywgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBlbmFibGVkIH0gPSB1c2VDU1AoKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cImVuYWJsZWRcIj57ZW5hYmxlZCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgZW5hYmxlZD17ZmFsc2V9PlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlbmFibGVkRGl2ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdlbmFibGVkJyk7XG4gICAgICBleHBlY3QoZW5hYmxlZERpdi50ZXh0Q29udGVudCkudG9CZSgnZGlzYWJsZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmlK/mjIFyZXBvcnQtb25seeaooeW8jycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9uVmlvbGF0aW9uID0gamVzdC5mbigpO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbmZpZyB9ID0gdXNlQ1NQKCk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJjb25maWdcIj57Y29uZmlnLnJlcG9ydE9ubHkgPyAncmVwb3J0LW9ubHknIDogJ2VuZm9yY2UnfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIHJlcG9ydE9ubHk9e3RydWV9IG9uVmlvbGF0aW9uPXtvblZpb2xhdGlvbn0+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjb25maWcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWQiOW5tum7mOiupOmFjee9ruWSjOiHquWumuS5iemFjee9ricsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbUNvbmZpZyA9IHtcbiAgICAgICAgJ3NjcmlwdC1zcmMnOiBcIidzZWxmJ1wiLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBjb25maWcgfSA9IHVzZUNTUCgpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkZWZhdWx0LXNyY1wiPntjb25maWdbJ2RlZmF1bHQtc3JjJ119PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic2NyaXB0LXNyY1wiPntjb25maWdbJ3NjcmlwdC1zcmMnXX08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIGNvbmZpZz17Y3VzdG9tQ29uZmlnfT5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZGVmYXVsdC1zcmMnKSkudG9IYXZlVGV4dENvbnRlbnQoXCInc2VsZidcIik7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzY3JpcHQtc3JjJykpLnRvSGF2ZVRleHRDb250ZW50KFwiJ3NlbGYnXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeabtOaWsOmFjee9ricsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdXBkYXRlQ29uZmlnLCBjb25maWcgfSA9IHVzZUNTUCgpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzY3JpcHQtc3JjXCI+e2NvbmZpZ1snc2NyaXB0LXNyYyddfTwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cInVwZGF0ZVwiIG9uQ2xpY2s9eygpID0+IHVwZGF0ZUNvbmZpZyh7ICdzY3JpcHQtc3JjJzogXCInc2VsZidcIiB9KX0+XG4gICAgICAgICAgICAgIFVwZGF0ZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgdXBkYXRlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCd1cGRhdGUnKTtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHVwZGF0ZUJ1dHRvbi5jbGljaygpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzY3JpcHQtc3JjJykpLnRvSGF2ZVRleHRDb250ZW50KFwiJ3NlbGYnXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Zyo56aB55So5pe25LiN5re75YqgbWV0Yeagh+etvicsICgpID0+IHtcbiAgICAgIGNvbnN0IG1ldGFUYWdFeGlzdHMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW2h0dHAtZXF1aXY9XCJDb250ZW50LVNlY3VyaXR5LVBvbGljeVwiXScpICE9PSBudWxsO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgZW5hYmxlZD17ZmFsc2V9PlxuICAgICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1ldGFUYWdFeGlzdHMoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Zyo5ZCv55So5pe25re75YqgbWV0Yeagh+etvicsICgpID0+IHtcbiAgICAgIGNvbnN0IG1ldGFUYWdFeGlzdHMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW2h0dHAtZXF1aXY9XCJDb250ZW50LVNlY3VyaXR5LVBvbGljeVwiXScpICE9PSBudWxsO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgZW5hYmxlZD17dHJ1ZX0+XG4gICAgICAgICAgPGRpdj5UZXN0PC9kaXY+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobWV0YVRhZ0V4aXN0cygpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWcqHJlcG9ydC1vbmx55qih5byP5LiL5L2/55So5q2j56Gu55qEbWV0Yeagh+etvicsICgpID0+IHtcbiAgICAgIGNvbnN0IG1ldGFUYWdFeGlzdHMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtodHRwLWVxdWl2PVwiQ29udGVudC1TZWN1cml0eS1Qb2xpY3ktUmVwb3J0LU9ubHlcIl0nKSAhPT0gbnVsbFxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgcmVwb3J0T25seT17dHJ1ZX0+XG4gICAgICAgICAgPGRpdj5UZXN0PC9kaXY+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobWV0YVRhZ0V4aXN0cygpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpea4heeQhm1ldGHmoIfnrb7lnKjljbjovb3ml7YnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyPlxuICAgICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgbWV0YVRhZ0V4aXN0cyA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbaHR0cC1lcXVpdj1cIkNvbnRlbnQtU2VjdXJpdHktUG9saWN5XCJdJykgIT09IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBleHBlY3QobWV0YVRhZ0V4aXN0cygpKS50b0JlKHRydWUpO1xuXG4gICAgICB1bm1vdW50KCk7XG5cbiAgICAgIGV4cGVjdChtZXRhVGFnRXhpc3RzKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuWkmuS4qkNTUFByb3ZpZGVy5a6e5L6LJywgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBub25jZSB9ID0gdXNlQ1NQKCk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJub25jZVwiPntub25jZSB8fCAnbm8tbm9uY2UnfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIG5vbmNlPVwiZmlyc3RcIj5cbiAgICAgICAgICA8Q1NQUHJvdmlkZXIgbm9uY2U9XCJzZWNvbmRcIj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ25vbmNlJykpLnRvSGF2ZVRleHRDb250ZW50KCdzZWNvbmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3VzZUNTUCBIb29rJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xov5Tlm55DU1Dnm7jlhbPnmoTnirbmgIHlkozmlrnms5UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjc3AgPSB1c2VDU1AoKTtcblxuICAgICAgICBleHBlY3QoY3NwLmNvbmZpZykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNzcC5lbmFibGVkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoY3NwLnVwZGF0ZUNvbmZpZykudG9CZURlZmluZWQoKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaGFzLXVwZGF0ZVwiPlxuICAgICAgICAgICAgICB7dHlwZW9mIGNzcC51cGRhdGVDb25maWcgPT09ICdmdW5jdGlvbicgPyAnaGFzLXVwZGF0ZScgOiAnbm8tdXBkYXRlJ31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXI+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2hhcy11cGRhdGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmlK/mjIHmm7TmlrDphY3nva4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHVwZGF0ZUNvbmZpZyB9ID0gdXNlQ1NQKCk7XG4gICAgICAgIGNvbnN0IFt1cGRhdGVkLCBzZXRVcGRhdGVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcblxuICAgICAgICBjb25zdCBoYW5kbGVVcGRhdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdXBkYXRlQ29uZmlnKHsgJ3NjcmlwdC1zcmMnOiBcIidzZWxmJ1wiIH0pO1xuICAgICAgICAgIHNldFVwZGF0ZWQodHJ1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInVwZGF0ZWRcIj57dXBkYXRlZCA/ICd1cGRhdGVkJyA6ICdub3QtdXBkYXRlZCd9PC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwidXBkYXRlXCIgb25DbGljaz17aGFuZGxlVXBkYXRlfT5cbiAgICAgICAgICAgICAgVXBkYXRlXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB1cGRhdGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3VwZGF0ZScpO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgdXBkYXRlQnV0dG9uLmNsaWNrKCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWREaXYgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3VwZGF0ZWQnKTtcbiAgICAgICAgZXhwZWN0KHVwZGF0ZWREaXYudGV4dENvbnRlbnQpLnRvQmUoJ3VwZGF0ZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ1NQU2NyaXB0JywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlnKjmnIlub25jZeaXtua3u+WKoG5vbmNl5bGe5oCnJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tTm9uY2UgPSAndGVzdC1ub25jZS0xMjMnO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Q1NQU2NyaXB0IG5vbmNlPXtjdXN0b21Ob25jZX0+Y29uc29sZS5sb2coJnF1b3Q7dGVzdCZxdW90Oyk7PC9DU1BTY3JpcHQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFtub25jZV0nKTtcbiAgICAgIGV4cGVjdChzY3JpcHRFbGVtZW50KS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Zyo56aB55So5pe25q2j5bi45riy5p+TJywgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIDxDU1BTY3JpcHQ+Y29uc29sZS5sb2coJnF1b3Q7dGVzdCZxdW90Oyk7PC9DU1BTY3JpcHQ+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgZW5hYmxlZD17ZmFsc2V9PlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0Jyk7XG4gICAgICBleHBlY3Qoc2NyaXB0RWxlbWVudCkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ1NQU3R5bGUnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWcqOaciW5vbmNl5pe25re75Yqgbm9uY2XlsZ7mgKcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Ob25jZSA9ICd0ZXN0LW5vbmNlLTQ1Nic7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxDU1BTdHlsZSBub25jZT17Y3VzdG9tTm9uY2V9PntgYm9keSB7IGNvbG9yOiByZWQ7IH1gfTwvQ1NQU3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3R5bGVbbm9uY2VdJyk7XG4gICAgICBleHBlY3Qoc3R5bGVFbGVtZW50KS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Zyo56aB55So5pe25q2j5bi45riy5p+TJywgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIDxDU1BTdHlsZT57YGJvZHkgeyBjb2xvcjogcmVkOyB9YH08L0NTUFN0eWxlPjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIGVuYWJsZWQ9e2ZhbHNlfT5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICAgIGV4cGVjdChzdHlsZUVsZW1lbnQpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NTUOi/neinhOWkhOeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5aSE55CGQ1NQ6L+d6KeE5oql5ZGKJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25WaW9sYXRpb24gPSBqZXN0LmZuKCk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnIH0gPSB1c2VDU1AoKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cImNvbmZpZ1wiPntjb25maWcub25WaW9sYXRpb24gPyAnaGFzLWhhbmRsZXInIDogJ25vLWhhbmRsZXInfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIG9uVmlvbGF0aW9uPXtvblZpb2xhdGlvbn0+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NvbmZpZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlU3RyaWN0Q1NQQ29uZmlnJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XliJvlu7rkuKXmoLznmoRDU1DphY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSBjcmVhdGVTdHJpY3RDU1BDb25maWcoKTtcblxuICAgICAgZXhwZWN0KGNvbmZpZ1snZGVmYXVsdC1zcmMnXSkudG9CZShcIidzZWxmJ1wiKTtcbiAgICAgIGV4cGVjdChjb25maWdbJ3NjcmlwdC1zcmMnXSkudG9CZShcIidzZWxmJyAnbm9uY2Ute25vbmNlfSdcIik7XG4gICAgICBleHBlY3QoY29uZmlnWydzdHlsZS1zcmMnXSkudG9CZShcIidzZWxmJyAnbm9uY2Ute25vbmNlfSdcIik7XG4gICAgICBleHBlY3QoY29uZmlnWyd1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzJ10pLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29uZmlnWydibG9jay1hbGwtbWl4ZWQtY29udGVudCddKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlTW9kZXJhdGVDU1BDb25maWcnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWIm+W7uumAguW6pueahENTUOmFjee9ricsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGNyZWF0ZU1vZGVyYXRlQ1NQQ29uZmlnKCk7XG5cbiAgICAgIGV4cGVjdChjb25maWdbJ2RlZmF1bHQtc3JjJ10pLnRvQmUoXCInc2VsZidcIik7XG4gICAgICBleHBlY3QoY29uZmlnWydzY3JpcHQtc3JjJ10pLnRvQmUoXCInc2VsZicgJ3Vuc2FmZS1pbmxpbmUnICd1bnNhZmUtZXZhbCcgaHR0cHM6XCIpO1xuICAgICAgZXhwZWN0KGNvbmZpZ1snc3R5bGUtc3JjJ10pLnRvQmUoXCInc2VsZicgJ3Vuc2FmZS1pbmxpbmUnIGh0dHBzOlwiKTtcbiAgICAgIGV4cGVjdChjb25maWdbJ2ZyYW1lLWFuY2VzdG9ycyddKS50b0JlKFwiJ3NlbGYnXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlUGVybWlzc2l2ZUNTUENvbmZpZycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5Yib5bu65a695p2+55qEQ1NQ6YWN572uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gY3JlYXRlUGVybWlzc2l2ZUNTUENvbmZpZygpO1xuXG4gICAgICBleHBlY3QoY29uZmlnWydkZWZhdWx0LXNyYyddKS50b0JlKFwiJ3NlbGYnXCIpO1xuICAgICAgZXhwZWN0KGNvbmZpZ1snc2NyaXB0LXNyYyddKS50b0JlKFwiJ3NlbGYnICd1bnNhZmUtaW5saW5lJyAndW5zYWZlLWV2YWwnIGh0dHBzOiBodHRwOlwiKTtcbiAgICAgIGV4cGVjdChjb25maWdbJ3N0eWxlLXNyYyddKS50b0JlKFwiJ3NlbGYnICd1bnNhZmUtaW5saW5lJyBodHRwczogaHR0cDpcIik7XG4gICAgICBleHBlY3QoY29uZmlnWydpbWctc3JjJ10pLnRvQmUoXCInc2VsZicgZGF0YTogaHR0cHM6IGh0dHA6IGJsb2I6XCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVOb25jZScsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l55Sf5oiQ6ZqP5py655qEbm9uY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBub25jZTEgPSBnZW5lcmF0ZU5vbmNlKCk7XG4gICAgICBjb25zdCBub25jZTIgPSBnZW5lcmF0ZU5vbmNlKCk7XG5cbiAgICAgIGV4cGVjdChub25jZTEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qobm9uY2UyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG5vbmNlMSkubm90LnRvQmUobm9uY2UyKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XnlJ/miJDlrZfnrKbkuLLnsbvlnovnmoRub25jZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG5vbmNlID0gZ2VuZXJhdGVOb25jZSgpO1xuXG4gICAgICBleHBlY3QodHlwZW9mIG5vbmNlKS50b0JlKCdzdHJpbmcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3dpdGhDU1AnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWMheijhee7hOS7tuW5tua3u+WKoENTUCcsICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiA8ZGl2IGRhdGEtdGVzdGlkPVwidGVzdFwiPlRlc3Q8L2Rpdj47XG4gICAgICBjb25zdCBXcmFwcGVkQ29tcG9uZW50ID0gd2l0aENTUChUZXN0Q29tcG9uZW50KTtcblxuICAgICAgcmVuZGVyKDxXcmFwcGVkQ29tcG9uZW50IC8+KTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XmlK/mjIHoh6rlrprkuYnphY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cInRlc3RcIj5UZXN0PC9kaXY+O1xuICAgICAgY29uc3QgY3VzdG9tQ29uZmlnID0geyAnc2NyaXB0LXNyYyc6IFwiJ3NlbGYnXCIgfTtcbiAgICAgIGNvbnN0IFdyYXBwZWRDb21wb25lbnQgPSB3aXRoQ1NQKFRlc3RDb21wb25lbnQsIGN1c3RvbUNvbmZpZyk7XG5cbiAgICAgIHJlbmRlcig8V3JhcHBlZENvbXBvbmVudCAvPik7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5L+d55WZ57uE5Lu255qEZGlzcGxheU5hbWUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4gPGRpdj5UZXN0PC9kaXY+O1xuICAgICAgVGVzdENvbXBvbmVudC5kaXNwbGF5TmFtZSA9ICdUZXN0Q29tcG9uZW50JztcbiAgICAgIGNvbnN0IFdyYXBwZWRDb21wb25lbnQgPSB3aXRoQ1NQKFRlc3RDb21wb25lbnQpO1xuXG4gICAgICBleHBlY3QoV3JhcHBlZENvbXBvbmVudC5kaXNwbGF5TmFtZSkudG9CZSgnd2l0aENTUChUZXN0Q29tcG9uZW50KScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVDU1BNZXRhVGFnJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XnlJ/miJDln7rmnKznmoRDU1DmoIfnrb4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICdkZWZhdWx0LXNyYyc6IFwiJ3NlbGYnXCIsXG4gICAgICAgICdzY3JpcHQtc3JjJzogXCInc2VsZidcIixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnOiBjc3BDb25maWcgfSA9IHVzZUNTUCgpO1xuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cImNvbmZpZ1wiPntKU09OLnN0cmluZ2lmeShjc3BDb25maWcpfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIGNvbmZpZz17Y29uZmlnfT5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY29uZmlnJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5biD5bCU5YC85oyH5LukJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAnZGVmYXVsdC1zcmMnOiBcIidzZWxmJ1wiLFxuICAgICAgICAndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6IHRydWUsXG4gICAgICAgICdibG9jay1hbGwtbWl4ZWQtY29udGVudCc6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbmZpZzogY3NwQ29uZmlnIH0gPSB1c2VDU1AoKTtcbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJjb25maWdcIj57SlNPTi5zdHJpbmdpZnkoY3NwQ29uZmlnKX08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlciBjb25maWc9e2NvbmZpZ30+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NvbmZpZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhnVuZGVmaW5lZOWAvCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgJ2RlZmF1bHQtc3JjJzogXCInc2VsZidcIixcbiAgICAgICAgJ3NjcmlwdC1zcmMnOiB1bmRlZmluZWQsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbmZpZzogY3NwQ29uZmlnIH0gPSB1c2VDU1AoKTtcbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJjb25maWdcIj57SlNPTi5zdHJpbmdpZnkoY3NwQ29uZmlnKX08L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlciBjb25maWc9e2NvbmZpZ30+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NvbmZpZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaXNVUkxBbGxvd2VkJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlhYHorrhzZWxmIFVSTCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgJ2ltZy1zcmMnOiBcIidzZWxmJ1wiLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPENTUEltZyBzcmM9XCIvaW1hZ2UuanBnXCIgZGF0YS10ZXN0aWQ9XCJpbWdcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgY29uZmlnPXtjb25maWd9PlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBpbWdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgICBleHBlY3QoaW1nRWxlbWVudCkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWFgeiuuGRhdGEgVVJMJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAnaW1nLXNyYyc6IFwiJ3NlbGYnIGRhdGE6XCIsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Q1NQSW1nIHNyYz1cImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxhYmMxMjNcIiBkYXRhLXRlc3RpZD1cImltZ1wiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlciBjb25maWc9e2NvbmZpZ30+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGltZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcbiAgICAgIGV4cGVjdChpbWdFbGVtZW50KS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5YWB6K64aHR0cHMgVVJMJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAnaW1nLXNyYyc6IFwiJ3NlbGYnIGh0dHBzOlwiLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPENTUEltZyBzcmM9XCJodHRwczovL2V4YW1wbGUuY29tL2ltYWdlLmpwZ1wiIGRhdGEtdGVzdGlkPVwiaW1nXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIGNvbmZpZz17Y29uZmlnfT5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgICAgZXhwZWN0KGltZ0VsZW1lbnQpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlhYHorrhodHRwIFVSTCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgJ2ltZy1zcmMnOiBcIidzZWxmJyBodHRwOlwiLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPENTUEltZyBzcmM9XCJodHRwOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnXCIgZGF0YS10ZXN0aWQ9XCJpbWdcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgY29uZmlnPXtjb25maWd9PlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBpbWdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgICBleHBlY3QoaW1nRWxlbWVudCkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6L6555WM5oOF5Ya1JywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlpITnkIbnqbrphY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbmZpZyB9ID0gdXNlQ1NQKCk7XG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwiY29uZmlnXCI+e0pTT04uc3RyaW5naWZ5KGNvbmZpZyl9PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgY29uZmlnPXt7fX0+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NvbmZpZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuWkmuasoeabtOaWsOmFjee9ricsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdXBkYXRlQ29uZmlnLCBjb25maWcgfSA9IHVzZUNTUCgpO1xuICAgICAgICBjb25zdCBbdXBkYXRlQ291bnQsIHNldFVwZGF0ZUNvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVVwZGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB1cGRhdGVDb25maWcoeyAnc2NyaXB0LXNyYyc6IFwiJ3NlbGYnXCIgfSk7XG4gICAgICAgICAgc2V0VXBkYXRlQ291bnQoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgICBhd2FpdCB1cGRhdGVDb25maWcoeyAnc3R5bGUtc3JjJzogXCInc2VsZidcIiB9KTtcbiAgICAgICAgICBzZXRVcGRhdGVDb3VudCgocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJ1cGRhdGUtY291bnRcIj57dXBkYXRlQ291bnR9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic2NyaXB0LXNyY1wiPntjb25maWdbJ3NjcmlwdC1zcmMnXX08L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0aWQ9XCJ1cGRhdGVcIiBvbkNsaWNrPXtoYW5kbGVVcGRhdGV9PlxuICAgICAgICAgICAgICBVcGRhdGVcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXI+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgndXBkYXRlJyk7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICB1cGRhdGVCdXR0b24uY2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlQ291bnREaXYgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3VwZGF0ZS1jb3VudCcpO1xuICAgICAgICBleHBlY3QodXBkYXRlQ291bnREaXYudGV4dENvbnRlbnQpLnRvQmUoJzInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuayoeacieaPkOS+m2NoaWxkcmVu55qE5oOF5Ya1JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXI+XG4gICAgICAgICAgPGRpdj5UZXN0PC9kaXY+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuWcqENTUFByb3ZpZGVy5aSW5L2/55SodXNlQ1NQJywgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjc3AgPSB1c2VDU1AoKTtcbiAgICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cImNzcFwiPntKU09OLnN0cmluZ2lmeShjc3ApfTwvZGl2PjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cImVycm9yXCI+eyhlcnJvciBhcyBFcnJvcikubWVzc2FnZX08L2Rpdj47XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdlcnJvcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ1NQU2NyaXB0IOabtOWkmua1i+ivlScsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5pSv5oyB6Ieq5a6a5LmJ5bGe5oCnJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tTm9uY2UgPSAndGVzdC1ub25jZS03ODknO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Q1NQU2NyaXB0IG5vbmNlPXtjdXN0b21Ob25jZX0gZGF0YS10ZXN0aWQ9XCJzY3JpcHRcIj5cbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJnF1b3Q7dGVzdCZxdW90Oyk7XG4gICAgICAgICAgICA8L0NTUFNjcmlwdD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0Jyk7XG4gICAgICBleHBlY3Qoc2NyaXB0RWxlbWVudCkudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KHNjcmlwdEVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnbm9uY2UnKSkudG9CZShjdXN0b21Ob25jZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG56m6Y2hpbGRyZW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Ob25jZSA9ICd0ZXN0LW5vbmNlLWVtcHR5JztcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPENTUFNjcmlwdCBub25jZT17Y3VzdG9tTm9uY2V9IGRhdGEtdGVzdGlkPVwic2NyaXB0XCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0Jyk7XG4gICAgICBleHBlY3Qoc2NyaXB0RWxlbWVudCkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ1NQU3R5bGUg5pu05aSa5rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmlK/mjIHoh6rlrprkuYnlsZ7mgKcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Ob25jZSA9ICd0ZXN0LW5vbmNlLXN0eWxlJztcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPENTUFN0eWxlIG5vbmNlPXtjdXN0b21Ob25jZX0gZGF0YS10ZXN0aWQ9XCJzdHlsZVwiPlxuICAgICAgICAgICAgICB7YGJvZHkgeyBjb2xvcjogcmVkOyB9YH1cbiAgICAgICAgICAgIDwvQ1NQU3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICAgIGV4cGVjdChzdHlsZUVsZW1lbnQpLnRvQmVUcnV0aHkoKTtcbiAgICAgIGV4cGVjdChzdHlsZUVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnbm9uY2UnKSkudG9CZShjdXN0b21Ob25jZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG56m6Y2hpbGRyZW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Ob25jZSA9ICd0ZXN0LW5vbmNlLWVtcHR5LXN0eWxlJztcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPENTUFN0eWxlIG5vbmNlPXtjdXN0b21Ob25jZX0gZGF0YS10ZXN0aWQ9XCJzdHlsZVwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlcj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICAgIGV4cGVjdChzdHlsZUVsZW1lbnQpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NTUEltZycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5Zyo5ZCv55SoQ1NQ5pe25qOA5p+l5Zu+54mH5rqQJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXI+XG4gICAgICAgICAgPENTUEltZyBzcmM9XCIvdGVzdC5qcGdcIiBhbHQ9XCJUZXN0XCIgZGF0YS10ZXN0aWQ9XCJ0ZXN0LWltZ1wiIC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LWltZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWcqOemgeeUqENTUOaXtuS4jeajgOafpeWbvueJh+a6kCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyIGVuYWJsZWQ9e2ZhbHNlfT5cbiAgICAgICAgICA8Q1NQSW1nIHNyYz1cImh0dHBzOi8vZXhhbXBsZS5jb20vdGVzdC5qcGdcIiBhbHQ9XCJUZXN0XCIgZGF0YS10ZXN0aWQ9XCJ0ZXN0LWltZ1wiIC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LWltZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeitpuWRiuS4jeWFgeiuuOeahOWbvueJh+a6kCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnNvbGVXYXJuU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnd2FybicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlciBjb25maWc9e3sgJ2ltZy1zcmMnOiBcIidzZWxmJ1wiIH19PlxuICAgICAgICAgIDxDU1BJbWcgc3JjPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0LmpwZ1wiIGFsdD1cIlRlc3RcIiBkYXRhLXRlc3RpZD1cInRlc3QtaW1nXCIgLz5cbiAgICAgICAgPC9DU1BQcm92aWRlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QtaW1nJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBjb25zb2xlV2FyblNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWFgeiuuHNlbGblm77niYfmupAnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDU1BQcm92aWRlciBjb25maWc9e3sgJ2ltZy1zcmMnOiBcIidzZWxmJ1wiIH19PlxuICAgICAgICAgIDxDU1BJbWcgc3JjPVwiL3Rlc3QuanBnXCIgYWx0PVwiVGVzdFwiIGRhdGEtdGVzdGlkPVwidGVzdC1pbWdcIiAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1pbWcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlhYHorrhkYXRh5Zu+54mH5rqQJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q1NQUHJvdmlkZXIgY29uZmlnPXt7ICdpbWctc3JjJzogXCInc2VsZicgZGF0YTpcIiB9fT5cbiAgICAgICAgICA8Q1NQSW1nIHNyYz1cImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCx0ZXN0XCIgYWx0PVwiVGVzdFwiIGRhdGEtdGVzdGlkPVwidGVzdC1pbWdcIiAvPlxuICAgICAgICA8L0NTUFByb3ZpZGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1pbWcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3VzZUNTUCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5ZyoUHJvdmlkZXLlpJbkvb/nlKjml7bmipvlh7rplJnor68nLCAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVzZUNTUCgpO1xuICAgICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwibm8tZXJyb3JcIj5ObyBlcnJvcjwvZGl2PjtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJlcnJvclwiPkVycm9yPC9kaXY+O1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZXJyb3InKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xov5Tlm57mraPnoa7nmoRjb250ZXh05YC8JywgKCkgPT4ge1xuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3NwID0gdXNlQ1NQKCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImVuYWJsZWRcIj57Y3NwLmVuYWJsZWQgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhcy1jb25maWdcIj57Y3NwLmNvbmZpZyA/ICdoYXMtY29uZmlnJyA6ICduby1jb25maWcnfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhcy11cGRhdGVcIj5cbiAgICAgICAgICAgICAge3R5cGVvZiBjc3AudXBkYXRlQ29uZmlnID09PSAnZnVuY3Rpb24nID8gJ2hhcy11cGRhdGUnIDogJ25vLXVwZGF0ZSd9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENTUFByb3ZpZGVyPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQ1NQUHJvdmlkZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdlbmFibGVkJykpLnRvSGF2ZVRleHRDb250ZW50KCdlbmFibGVkJyk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdoYXMtY29uZmlnJykpLnRvSGF2ZVRleHRDb250ZW50KCdoYXMtY29uZmlnJyk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdoYXMtdXBkYXRlJykpLnRvSGF2ZVRleHRDb250ZW50KCdoYXMtdXBkYXRlJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=