70df930b87935c6af122eeb9465d4746
"use strict";
/**
 * @file 同步测试
 * @description 测试协作同步功能
 * @module __tests__/collaboration/sync.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-19
 */
describe('Collaboration Sync Module', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('同步状态管理', () => {
        it('应该支持在线状态', () => {
            const onlineStatus = true;
            expect(onlineStatus).toBe(true);
        });
        it('应该支持离线状态', () => {
            const offlineStatus = false;
            expect(offlineStatus).toBe(false);
        });
        it('应该处理状态变化', () => {
            let currentStatus = true;
            const handleStatusChange = (newStatus) => {
                currentStatus = newStatus;
            };
            handleStatusChange(false);
            expect(currentStatus).toBe(false);
            handleStatusChange(true);
            expect(currentStatus).toBe(true);
        });
    });
    describe('数据同步', () => {
        it('应该支持同步初始化', () => {
            const syncConfig = {
                endpoint: '/api/sync',
                interval: 30000,
                retryAttempts: 3,
            };
            expect(syncConfig.endpoint).toBe('/api/sync');
            expect(syncConfig.interval).toBe(30000);
            expect(syncConfig.retryAttempts).toBe(3);
        });
        it('应该处理同步成功', () => {
            const syncResult = {
                success: true,
                timestamp: Date.now(),
                changes: [
                    { id: 1, action: 'create' },
                    { id: 2, action: 'update' },
                ],
            };
            expect(syncResult.success).toBe(true);
            expect(syncResult.changes.length).toBe(2);
        });
        it('应该处理同步失败', () => {
            const syncError = {
                success: false,
                error: 'Network error',
                retryCount: 1,
            };
            expect(syncError.success).toBe(false);
            expect(syncError.error).toBe('Network error');
            expect(syncError.retryCount).toBe(1);
        });
    });
    describe('冲突检测', () => {
        it('应该检测并发修改', () => {
            const changes = [
                {
                    documentId: 'doc1',
                    userId: 'user1',
                    timestamp: Date.now() - 1000,
                    changes: { content: 'content1' },
                },
                {
                    documentId: 'doc1',
                    userId: 'user2',
                    timestamp: Date.now(),
                    changes: { content: 'content2' },
                },
            ];
            const hasConflict = changes.length > 1;
            expect(hasConflict).toBe(true);
        });
        it('应该标记冲突类型', () => {
            const conflictTypes = ['merge', 'override', 'ignore'];
            conflictTypes.forEach((type) => {
                expect(type).toBeDefined();
            });
        });
        it('应该提供冲突解决策略', () => {
            const resolution = {
                strategy: 'last-write-wins',
                autoResolve: true,
                notifyUsers: true,
            };
            expect(resolution.strategy).toBe('last-write-wins');
            expect(resolution.autoResolve).toBe(true);
            expect(resolution.notifyUsers).toBe(true);
        });
    });
    describe('同步队列', () => {
        it('应该支持操作队列', () => {
            const operationQueue = [
                { type: 'create', data: { id: 1, content: 'test' } },
                { type: 'update', data: { id: 2, content: 'updated' } },
                { type: 'delete', data: { id: 3 } },
            ];
            expect(operationQueue.length).toBe(3);
            expect(operationQueue[0].type).toBe('create');
            expect(operationQueue[1].type).toBe('update');
            expect(operationQueue[2].type).toBe('delete');
        });
        it('应该处理队列优先级', () => {
            const prioritizedQueue = [
                { type: 'delete', data: { id: 1 }, priority: 'high' },
                { type: 'update', data: { id: 2 }, priority: 'medium' },
                { type: 'create', data: { id: 3 }, priority: 'low' },
            ];
            const sortedQueue = prioritizedQueue.sort((a, b) => {
                const priorityOrder = { high: 1, medium: 2, low: 3 };
                return ((priorityOrder[a.priority] || 0) - (priorityOrder[b.priority] || 0));
            });
            expect(sortedQueue[0].priority).toBe('high');
            expect(sortedQueue[1].priority).toBe('medium');
            expect(sortedQueue[2].priority).toBe('low');
        });
        it('应该处理队列批次', () => {
            const batchSize = 10;
            const operations = Array.from({ length: 25 }, (_, i) => ({
                type: 'update',
                data: { id: i },
            }));
            const batches = [];
            for (let i = 0; i < operations.length; i += batchSize) {
                batches.push(operations.slice(i, i + batchSize));
            }
            expect(batches.length).toBe(3);
            expect(batches[0].length).toBe(10);
            expect(batches[1].length).toBe(10);
            expect(batches[2].length).toBe(5);
        });
    });
    describe('实时更新', () => {
        it('应该支持WebSocket连接', () => {
            const wsConfig = {
                url: 'ws://localhost:3000',
                reconnectInterval: 5000,
                maxReconnectAttempts: 5,
            };
            expect(wsConfig.url).toBe('ws://localhost:3000');
            expect(wsConfig.reconnectInterval).toBe(5000);
            expect(wsConfig.maxReconnectAttempts).toBe(5);
        });
        it('应该处理实时事件', () => {
            const events = [
                { type: 'document_updated', data: { id: 1 } },
                { type: 'user_joined', data: { userId: 'user1' } },
                { type: 'user_left', data: { userId: 'user2' } },
            ];
            events.forEach((event) => {
                expect(event.type).toBeDefined();
                expect(event.data).toBeDefined();
            });
        });
        it('应该处理连接状态', () => {
            const connectionStates = ['connecting', 'connected', 'disconnected', 'error'];
            connectionStates.forEach((state) => {
                expect(state).toBeDefined();
            });
        });
    });
    describe('离线支持', () => {
        it('应该缓存离线操作', () => {
            const offlineCache = {
                maxSize: 100,
                operations: [{ type: 'create', data: { id: 1 }, timestamp: Date.now() }],
            };
            expect(offlineCache.maxSize).toBe(100);
            expect(offlineCache.operations.length).toBe(1);
        });
        it('应该在重连时同步离线操作', () => {
            const syncOnReconnect = true;
            expect(syncOnReconnect).toBe(true);
        });
        it('应该处理离线冲突', () => {
            const offlineConflict = {
                localOperation: { type: 'update', data: { id: 1, content: 'local' } },
                serverData: { id: 1, content: 'server' },
                timestamp: Date.now(),
            };
            expect(offlineConflict.localOperation).toBeDefined();
            expect(offlineConflict.serverData).toBeDefined();
        });
    });
    describe('性能优化', () => {
        it('应该支持节流同步', () => {
            const throttleConfig = {
                interval: 1000,
                maxBatchSize: 50,
            };
            expect(throttleConfig.interval).toBe(1000);
            expect(throttleConfig.maxBatchSize).toBe(50);
        });
        it('应该支持压缩传输', () => {
            const compressionConfig = {
                enabled: true,
                algorithm: 'gzip',
                threshold: 1024,
            };
            expect(compressionConfig.enabled).toBe(true);
            expect(compressionConfig.algorithm).toBe('gzip');
            expect(compressionConfig.threshold).toBe(1024);
        });
        it('应该支持增量同步', () => {
            const incrementalSync = {
                enabled: true,
                lastSyncTimestamp: Date.now() - 3600000,
                syncWindow: 3600000,
            };
            expect(incrementalSync.enabled).toBe(true);
            expect(incrementalSync.lastSyncTimestamp).toBeDefined();
            expect(incrementalSync.syncWindow).toBe(3600000);
        });
    });
    describe('错误处理', () => {
        it('应该处理网络错误', () => {
            const networkError = {
                type: 'network',
                message: 'Connection failed',
                code: 'NETWORK_ERROR',
                retryable: true,
            };
            expect(networkError.type).toBe('network');
            expect(networkError.message).toBe('Connection failed');
            expect(networkError.retryable).toBe(true);
        });
        it('应该处理服务器错误', () => {
            const serverError = {
                type: 'server',
                message: 'Internal server error',
                code: 500,
                retryable: false,
            };
            expect(serverError.type).toBe('server');
            expect(serverError.code).toBe(500);
            expect(serverError.retryable).toBe(false);
        });
        it('应该处理超时错误', () => {
            const timeoutError = {
                type: 'timeout',
                message: 'Request timeout',
                code: 'TIMEOUT',
                retryable: true,
            };
            expect(timeoutError.type).toBe('timeout');
            expect(timeoutError.code).toBe('TIMEOUT');
            expect(timeoutError.retryable).toBe(true);
        });
    });
    describe('用户管理', () => {
        it('应该跟踪在线用户', () => {
            const onlineUsers = [
                { id: 'user1', name: 'User 1', lastSeen: Date.now() },
                { id: 'user2', name: 'User 2', lastSeen: Date.now() },
            ];
            expect(onlineUsers.length).toBe(2);
            expect(onlineUsers[0].id).toBe('user1');
        });
        it('应该处理用户加入', () => {
            const userJoin = {
                userId: 'user3',
                userName: 'User 3',
                timestamp: Date.now(),
            };
            expect(userJoin.userId).toBe('user3');
            expect(userJoin.userName).toBe('User 3');
        });
        it('应该处理用户离开', () => {
            const userLeave = {
                userId: 'user1',
                timestamp: Date.now(),
            };
            expect(userLeave.userId).toBe('user1');
        });
        it('应该处理用户状态变化', () => {
            const statusChanges = [
                { userId: 'user1', oldStatus: 'idle', newStatus: 'active' },
                { userId: 'user2', oldStatus: 'active', newStatus: 'busy' },
            ];
            statusChanges.forEach((change) => {
                expect(change.userId).toBeDefined();
                expect(change.oldStatus).toBeDefined();
                expect(change.newStatus).toBeDefined();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbGxhYm9yYXRpb24vX190ZXN0c19fL3N5bmMudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRztBQUVILFFBQVEsQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7SUFDekMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtRQUN0QixFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtZQUNsQixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUM7WUFDMUIsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQztZQUM1QixNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDO1lBRXpCLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxTQUFrQixFQUFFLEVBQUU7Z0JBQ2hELGFBQWEsR0FBRyxTQUFTLENBQUM7WUFDNUIsQ0FBQyxDQUFDO1lBRUYsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVsQyxrQkFBa0IsQ0FBQyxJQUFJLENB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QzNDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxTQUFTLEdBQUc7Z0JBQ2hCLE1BQU0sRUFBRSxPQUFPO2dCQUNmLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1lBQ3BCLE1BQU0sYUFBYSxHQUFHO2dCQUNwQixFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFO2dCQUMzRCxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFO2FBQzVELENBQUM7WUFFRixhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7Z0JBQy9CLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ3BDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ3ZDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDekMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbGxhYm9yYXRpb24vX190ZXN0c19fL3N5bmMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIOWQjOatpea1i+ivlVxuICogQGRlc2NyaXB0aW9uIOa1i+ivleWNj+S9nOWQjOatpeWKn+iDvVxuICogQG1vZHVsZSBfX3Rlc3RzX18vY29sbGFib3JhdGlvbi9zeW5jLnRlc3RcbiAqIEBhdXRob3IgWVlDwrNcbiAqIEB2ZXJzaW9uIDEuMC4wXG4gKiBAY3JlYXRlZCAyMDI2LTAyLTE5XG4gKi9cblxuZGVzY3JpYmUoJ0NvbGxhYm9yYXRpb24gU3luYyBNb2R1bGUnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflkIzmraXnirbmgIHnrqHnkIYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaUr+aMgeWcqOe6v+eKtuaAgScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9ubGluZVN0YXR1cyA9IHRydWU7XG4gICAgICBleHBlY3Qob25saW5lU3RhdHVzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaUr+aMgeemu+e6v+eKtuaAgScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9mZmxpbmVTdGF0dXMgPSBmYWxzZTtcbiAgICAgIGV4cGVjdChvZmZsaW5lU3RhdHVzKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbnirbmgIHlj5jljJYnLCAoKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFN0YXR1cyA9IHRydWU7XG5cbiAgICAgIGNvbnN0IGhhbmRsZVN0YXR1c0NoYW5nZSA9IChuZXdTdGF0dXM6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgY3VycmVudFN0YXR1cyA9IG5ld1N0YXR1cztcbiAgICAgIH07XG5cbiAgICAgIGhhbmRsZVN0YXR1c0NoYW5nZShmYWxzZSk7XG4gICAgICBleHBlY3QoY3VycmVudFN0YXR1cykudG9CZShmYWxzZSk7XG5cbiAgICAgIGhhbmRsZVN0YXR1c0NoYW5nZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjdXJyZW50U3RhdHVzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5pWw5o2u5ZCM5q2lJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmlK/mjIHlkIzmraXliJ3lp4vljJYnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzeW5jQ29uZmlnID0ge1xuICAgICAgICBlbmRwb2ludDogJy9hcGkvc3luYycsXG4gICAgICAgIGludGVydmFsOiAzMDAwMCxcbiAgICAgICAgcmV0cnlBdHRlbXB0czogMyxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChzeW5jQ29uZmlnLmVuZHBvaW50KS50b0JlKCcvYXBpL3N5bmMnKTtcbiAgICAgIGV4cGVjdChzeW5jQ29uZmlnLmludGVydmFsKS50b0JlKDMwMDAwKTtcbiAgICAgIGV4cGVjdChzeW5jQ29uZmlnLnJldHJ5QXR0ZW1wdHMpLnRvQmUoMyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5ZCM5q2l5oiQ5YqfJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3luY1Jlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBjaGFuZ2VzOiBbXG4gICAgICAgICAgeyBpZDogMSwgYWN0aW9uOiAnY3JlYXRlJyB9LFxuICAgICAgICAgIHsgaWQ6IDIsIGFjdGlvbjogJ3VwZGF0ZScgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChzeW5jUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc3luY1Jlc3VsdC5jaGFuZ2VzLmxlbmd0aCkudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIblkIzmraXlpLHotKUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzeW5jRXJyb3IgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ05ldHdvcmsgZXJyb3InLFxuICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHN5bmNFcnJvci5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChzeW5jRXJyb3IuZXJyb3IpLnRvQmUoJ05ldHdvcmsgZXJyb3InKTtcbiAgICAgIGV4cGVjdChzeW5jRXJyb3IucmV0cnlDb3VudCkudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+WGsueqgeajgOa1iycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5qOA5rWL5bm25Y+R5L+u5pS5JywgKCkgPT4ge1xuICAgICAgY29uc3QgY2hhbmdlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGRvY3VtZW50SWQ6ICdkb2MxJyxcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMTAwMCxcbiAgICAgICAgICBjaGFuZ2VzOiB7IGNvbnRlbnQ6ICdjb250ZW50MScgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGRvY3VtZW50SWQ6ICdkb2MxJyxcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyMicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGNoYW5nZXM6IHsgY29udGVudDogJ2NvbnRlbnQyJyB9LFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgaGFzQ29uZmxpY3QgPSBjaGFuZ2VzLmxlbmd0aCA+IDE7XG4gICAgICBleHBlY3QoaGFzQ29uZmxpY3QpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5qCH6K6w5Yay56qB57G75Z6LJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmxpY3RUeXBlcyA9IFsnbWVyZ2UnLCAnb3ZlcnJpZGUnLCAnaWdub3JlJ107XG5cbiAgICAgIGNvbmZsaWN0VHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICBleHBlY3QodHlwZSkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaPkOS+m+WGsueqgeino+WGs+etlueVpScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSB7XG4gICAgICAgIHN0cmF0ZWd5OiAnbGFzdC13cml0ZS13aW5zJyxcbiAgICAgICAgYXV0b1Jlc29sdmU6IHRydWUsXG4gICAgICAgIG5vdGlmeVVzZXJzOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHJlc29sdXRpb24uc3RyYXRlZ3kpLnRvQmUoJ2xhc3Qtd3JpdGUtd2lucycpO1xuICAgICAgZXhwZWN0KHJlc29sdXRpb24uYXV0b1Jlc29sdmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzb2x1dGlvbi5ub3RpZnlVc2VycykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+WQjOatpemYn+WIlycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5pSv5oyB5pON5L2c6Zif5YiXJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uUXVldWUgPSBbXG4gICAgICAgIHsgdHlwZTogJ2NyZWF0ZScsIGRhdGE6IHsgaWQ6IDEsIGNvbnRlbnQ6ICd0ZXN0JyB9IH0sXG4gICAgICAgIHsgdHlwZTogJ3VwZGF0ZScsIGRhdGE6IHsgaWQ6IDIsIGNvbnRlbnQ6ICd1cGRhdGVkJyB9IH0sXG4gICAgICAgIHsgdHlwZTogJ2RlbGV0ZScsIGRhdGE6IHsgaWQ6IDMgfSB9LFxuICAgICAgXTtcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvblF1ZXVlLmxlbmd0aCkudG9CZSgzKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25RdWV1ZVswXS50eXBlKS50b0JlKCdjcmVhdGUnKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25RdWV1ZVsxXS50eXBlKS50b0JlKCd1cGRhdGUnKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25RdWV1ZVsyXS50eXBlKS50b0JlKCdkZWxldGUnKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbpmJ/liJfkvJjlhYjnuqcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmlvcml0aXplZFF1ZXVlID0gW1xuICAgICAgICB7IHR5cGU6ICdkZWxldGUnLCBkYXRhOiB7IGlkOiAxIH0sIHByaW9yaXR5OiAnaGlnaCcgfSxcbiAgICAgICAgeyB0eXBlOiAndXBkYXRlJywgZGF0YTogeyBpZDogMiB9LCBwcmlvcml0eTogJ21lZGl1bScgfSxcbiAgICAgICAgeyB0eXBlOiAnY3JlYXRlJywgZGF0YTogeyBpZDogMyB9LCBwcmlvcml0eTogJ2xvdycgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHNvcnRlZFF1ZXVlID0gcHJpb3JpdGl6ZWRRdWV1ZS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IHByaW9yaXR5T3JkZXI6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGhpZ2g6IDEsIG1lZGl1bTogMiwgbG93OiAzIH07XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgKHByaW9yaXR5T3JkZXJbYS5wcmlvcml0eSBhcyBzdHJpbmddIHx8IDApIC0gKHByaW9yaXR5T3JkZXJbYi5wcmlvcml0eSBhcyBzdHJpbmddIHx8IDApXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNvcnRlZFF1ZXVlWzBdLnByaW9yaXR5KS50b0JlKCdoaWdoJyk7XG4gICAgICBleHBlY3Qoc29ydGVkUXVldWVbMV0ucHJpb3JpdHkpLnRvQmUoJ21lZGl1bScpO1xuICAgICAgZXhwZWN0KHNvcnRlZFF1ZXVlWzJdLnByaW9yaXR5KS50b0JlKCdsb3cnKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbpmJ/liJfmibnmrKEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBiYXRjaFNpemUgPSAxMDtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyNSB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgdHlwZTogJ3VwZGF0ZScsXG4gICAgICAgIGRhdGE6IHsgaWQ6IGkgfSxcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgYmF0Y2hlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcGVyYXRpb25zLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgYmF0Y2hlcy5wdXNoKG9wZXJhdGlvbnMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSkpO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoYmF0Y2hlcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBleHBlY3QoYmF0Y2hlc1swXS5sZW5ndGgpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KGJhdGNoZXNbMV0ubGVuZ3RoKS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChiYXRjaGVzWzJdLmxlbmd0aCkudG9CZSg1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+WunuaXtuabtOaWsCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5pSv5oyBV2ViU29ja2V06L+e5o6lJywgKCkgPT4ge1xuICAgICAgY29uc3Qgd3NDb25maWcgPSB7XG4gICAgICAgIHVybDogJ3dzOi8vbG9jYWxob3N0OjMwMDAnLFxuICAgICAgICByZWNvbm5lY3RJbnRlcnZhbDogNTAwMCxcbiAgICAgICAgbWF4UmVjb25uZWN0QXR0ZW1wdHM6IDUsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qod3NDb25maWcudXJsKS50b0JlKCd3czovL2xvY2FsaG9zdDozMDAwJyk7XG4gICAgICBleHBlY3Qod3NDb25maWcucmVjb25uZWN0SW50ZXJ2YWwpLnRvQmUoNTAwMCk7XG4gICAgICBleHBlY3Qod3NDb25maWcubWF4UmVjb25uZWN0QXR0ZW1wdHMpLnRvQmUoNSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5a6e5pe25LqL5Lu2JywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRzID0gW1xuICAgICAgICB7IHR5cGU6ICdkb2N1bWVudF91cGRhdGVkJywgZGF0YTogeyBpZDogMSB9IH0sXG4gICAgICAgIHsgdHlwZTogJ3VzZXJfam9pbmVkJywgZGF0YTogeyB1c2VySWQ6ICd1c2VyMScgfSB9LFxuICAgICAgICB7IHR5cGU6ICd1c2VyX2xlZnQnLCBkYXRhOiB7IHVzZXJJZDogJ3VzZXIyJyB9IH0sXG4gICAgICBdO1xuXG4gICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcbiAgICAgICAgZXhwZWN0KGV2ZW50LnR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChldmVudC5kYXRhKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG6L+e5o6l54q25oCBJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29ubmVjdGlvblN0YXRlcyA9IFsnY29ubmVjdGluZycsICdjb25uZWN0ZWQnLCAnZGlzY29ubmVjdGVkJywgJ2Vycm9yJ107XG5cbiAgICAgIGNvbm5lY3Rpb25TdGF0ZXMuZm9yRWFjaCgoc3RhdGUpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0YXRlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfnprvnur/mlK/mjIEnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpee8k+WtmOemu+e6v+aTjeS9nCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG9mZmxpbmVDYWNoZSA9IHtcbiAgICAgICAgbWF4U2l6ZTogMTAwLFxuICAgICAgICBvcGVyYXRpb25zOiBbeyB0eXBlOiAnY3JlYXRlJywgZGF0YTogeyBpZDogMSB9LCB0aW1lc3RhbXA6IERhdGUubm93KCkgfV0sXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qob2ZmbGluZUNhY2hlLm1heFNpemUpLnRvQmUoMTAwKTtcbiAgICAgIGV4cGVjdChvZmZsaW5lQ2FjaGUub3BlcmF0aW9ucy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Zyo6YeN6L+e5pe25ZCM5q2l56a757q/5pON5L2cJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3luY09uUmVjb25uZWN0ID0gdHJ1ZTtcbiAgICAgIGV4cGVjdChzeW5jT25SZWNvbm5lY3QpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG56a757q/5Yay56qBJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2ZmbGluZUNvbmZsaWN0ID0ge1xuICAgICAgICBsb2NhbE9wZXJhdGlvbjogeyB0eXBlOiAndXBkYXRlJywgZGF0YTogeyBpZDogMSwgY29udGVudDogJ2xvY2FsJyB9IH0sXG4gICAgICAgIHNlcnZlckRhdGE6IHsgaWQ6IDEsIGNvbnRlbnQ6ICdzZXJ2ZXInIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChvZmZsaW5lQ29uZmxpY3QubG9jYWxPcGVyYXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qob2ZmbGluZUNvbmZsaWN0LnNlcnZlckRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfmgKfog73kvJjljJYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaUr+aMgeiKgua1geWQjOatpScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRocm90dGxlQ29uZmlnID0ge1xuICAgICAgICBpbnRlcnZhbDogMTAwMCxcbiAgICAgICAgbWF4QmF0Y2hTaXplOiA1MCxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCh0aHJvdHRsZUNvbmZpZy5pbnRlcnZhbCkudG9CZSgxMDAwKTtcbiAgICAgIGV4cGVjdCh0aHJvdHRsZUNvbmZpZy5tYXhCYXRjaFNpemUpLnRvQmUoNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaUr+aMgeWOi+e8qeS8oOi+kycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXByZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBhbGdvcml0aG06ICdnemlwJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMDI0LFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGNvbXByZXNzaW9uQ29uZmlnLmVuYWJsZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29tcHJlc3Npb25Db25maWcuYWxnb3JpdGhtKS50b0JlKCdnemlwJyk7XG4gICAgICBleHBlY3QoY29tcHJlc3Npb25Db25maWcudGhyZXNob2xkKS50b0JlKDEwMjQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaUr+aMgeWinumHj+WQjOatpScsICgpID0+IHtcbiAgICAgIGNvbnN0IGluY3JlbWVudGFsU3luYyA9IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbGFzdFN5bmNUaW1lc3RhbXA6IERhdGUubm93KCkgLSAzNjAwMDAwLFxuICAgICAgICBzeW5jV2luZG93OiAzNjAwMDAwLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGluY3JlbWVudGFsU3luYy5lbmFibGVkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGluY3JlbWVudGFsU3luYy5sYXN0U3luY1RpbWVzdGFtcCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChpbmNyZW1lbnRhbFN5bmMuc3luY1dpbmRvdykudG9CZSgzNjAwMDAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+mUmeivr+WkhOeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5aSE55CG572R57uc6ZSZ6K+vJywgKCkgPT4ge1xuICAgICAgY29uc3QgbmV0d29ya0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAnbmV0d29yaycsXG4gICAgICAgIG1lc3NhZ2U6ICdDb25uZWN0aW9uIGZhaWxlZCcsXG4gICAgICAgIGNvZGU6ICdORVRXT1JLX0VSUk9SJyxcbiAgICAgICAgcmV0cnlhYmxlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KG5ldHdvcmtFcnJvci50eXBlKS50b0JlKCduZXR3b3JrJyk7XG4gICAgICBleHBlY3QobmV0d29ya0Vycm9yLm1lc3NhZ2UpLnRvQmUoJ0Nvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBleHBlY3QobmV0d29ya0Vycm9yLnJldHJ5YWJsZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbmnI3liqHlmajplJnor68nLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2ZXJFcnJvciA9IHtcbiAgICAgICAgdHlwZTogJ3NlcnZlcicsXG4gICAgICAgIG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgIHJldHJ5YWJsZTogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qoc2VydmVyRXJyb3IudHlwZSkudG9CZSgnc2VydmVyJyk7XG4gICAgICBleHBlY3Qoc2VydmVyRXJyb3IuY29kZSkudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KHNlcnZlckVycm9yLnJldHJ5YWJsZSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG6LaF5pe26ZSZ6K+vJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dEVycm9yID0ge1xuICAgICAgICB0eXBlOiAndGltZW91dCcsXG4gICAgICAgIG1lc3NhZ2U6ICdSZXF1ZXN0IHRpbWVvdXQnLFxuICAgICAgICBjb2RlOiAnVElNRU9VVCcsXG4gICAgICAgIHJldHJ5YWJsZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCh0aW1lb3V0RXJyb3IudHlwZSkudG9CZSgndGltZW91dCcpO1xuICAgICAgZXhwZWN0KHRpbWVvdXRFcnJvci5jb2RlKS50b0JlKCdUSU1FT1VUJyk7XG4gICAgICBleHBlY3QodGltZW91dEVycm9yLnJldHJ5YWJsZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+eUqOaIt+euoeeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6Lef6Liq5Zyo57q/55So5oi3JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25saW5lVXNlcnMgPSBbXG4gICAgICAgIHsgaWQ6ICd1c2VyMScsIG5hbWU6ICdVc2VyIDEnLCBsYXN0U2VlbjogRGF0ZS5ub3coKSB9LFxuICAgICAgICB7IGlkOiAndXNlcjInLCBuYW1lOiAnVXNlciAyJywgbGFzdFNlZW46IERhdGUubm93KCkgfSxcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdChvbmxpbmVVc2Vycy5sZW5ndGgpLnRvQmUoMik7XG4gICAgICBleHBlY3Qob25saW5lVXNlcnNbMF0uaWQpLnRvQmUoJ3VzZXIxJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG55So5oi35Yqg5YWlJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlckpvaW4gPSB7XG4gICAgICAgIHVzZXJJZDogJ3VzZXIzJyxcbiAgICAgICAgdXNlck5hbWU6ICdVc2VyIDMnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QodXNlckpvaW4udXNlcklkKS50b0JlKCd1c2VyMycpO1xuICAgICAgZXhwZWN0KHVzZXJKb2luLnVzZXJOYW1lKS50b0JlKCdVc2VyIDMnKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbnlKjmiLfnprvlvIAnLCAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyTGVhdmUgPSB7XG4gICAgICAgIHVzZXJJZDogJ3VzZXIxJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHVzZXJMZWF2ZS51c2VySWQpLnRvQmUoJ3VzZXIxJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5aSE55CG55So5oi354q25oCB5Y+Y5YyWJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzQ2hhbmdlcyA9IFtcbiAgICAgICAgeyB1c2VySWQ6ICd1c2VyMScsIG9sZFN0YXR1czogJ2lkbGUnLCBuZXdTdGF0dXM6ICdhY3RpdmUnIH0sXG4gICAgICAgIHsgdXNlcklkOiAndXNlcjInLCBvbGRTdGF0dXM6ICdhY3RpdmUnLCBuZXdTdGF0dXM6ICdidXN5JyB9LFxuICAgICAgXTtcblxuICAgICAgc3RhdHVzQ2hhbmdlcy5mb3JFYWNoKChjaGFuZ2UpID0+IHtcbiAgICAgICAgZXhwZWN0KGNoYW5nZS51c2VySWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChjaGFuZ2Uub2xkU3RhdHVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoY2hhbmdlLm5ld1N0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9