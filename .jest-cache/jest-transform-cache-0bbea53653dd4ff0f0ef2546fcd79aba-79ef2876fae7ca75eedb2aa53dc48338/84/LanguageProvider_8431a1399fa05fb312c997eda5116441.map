{"version":3,"names":["cov_aou56fwth","actualCoverage","s","exports","useLanguage","LanguageProvider","react_1","require","LanguageContext","createContext","defaultT","args","f","length","b","defaultContext","lang","setLang","toggleLang","t","resolveKey","obj","path","parts","split","current","part","undefined","ctx","useContext","children","locales","setLangState","useState","saved","localStorage","getItem","useEffect","setItem","document","documentElement","setAttribute","useCallback","l","prev","localesMemo","useMemo","zh","en","key","resolved","otherLang","fallback","handler","e","ctrlKey","altKey","toLowerCase","preventDefault","window","addEventListener","removeEventListener","jsx_runtime_1","jsx","Provider","value"],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/i18n/LanguageProvider.tsx"],"sourcesContent":["/**\n * @file YYC³ 语言上下文提供者\n * @description 双语系统：支持中英文切换，localStorage持久化，键盘快捷键Ctrl+Alt+L\n * @module i18n\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-27\n */\n\nimport React, { createContext, useContext, useState, useCallback, useEffect, useMemo } from 'react';\n\nexport type Language = 'zh' | 'en';\n\ntype TFunction = {\n  (key: string): string;\n  (zh: string, en: string): string;\n};\n\ninterface LanguageContextType {\n  lang: Language;\n  setLang: (lang: Language) => void;\n  toggleLang: () => void;\n  t: TFunction;\n}\n\nconst LanguageContext = createContext<LanguageContextType | null>(null);\n\nconst defaultT: TFunction = ((...args: [string] | [string, string]): string => {\n  if (args.length === 2) return args[0];\n  return args[0];\n}) as TFunction;\n\nconst defaultContext: LanguageContextType = {\n  lang: 'zh',\n  setLang: () => {},\n  toggleLang: () => {},\n  t: defaultT,\n};\n\nfunction resolveKey(obj: Record<string, unknown>, path: string): string | undefined {\n  const parts = path.split('.');\n  let current: unknown = obj;\n  for (const part of parts) {\n    if (current === null || current === undefined || typeof current !== 'object') return undefined;\n    current = (current as Record<string, unknown>)[part];\n  }\n  return typeof current === 'string' ? current : undefined;\n}\n\nexport function useLanguage() {\n  const ctx = useContext(LanguageContext);\n  return ctx ?? defaultContext;\n}\n\ninterface LanguageProviderProps {\n  children: React.ReactNode;\n  locales?: {\n    zh: Record<string, unknown>;\n    en: Record<string, unknown>;\n  };\n}\n\nexport function LanguageProvider({ children, locales }: LanguageProviderProps) {\n  const [lang, setLangState] = useState<Language>(() => {\n    const saved = localStorage.getItem('yyc3-lang');\n    return (saved as Language) || 'zh';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('yyc3-lang', lang);\n    document.documentElement.setAttribute('lang', lang === 'zh' ? 'zh-CN' : 'en');\n  }, [lang]);\n\n  const setLang = useCallback((l: Language) => setLangState(l), []);\n\n  const toggleLang = useCallback(() => {\n    setLangState((prev) => (prev === 'zh' ? 'en' : 'zh'));\n  }, []);\n\n  const localesMemo = useMemo(\n    () => locales || { zh: {} as Record<string, unknown>, en: {} as Record<string, unknown> },\n    [locales]\n  );\n\n  const t: TFunction = useCallback(\n    (...args: [string] | [string, string]): string => {\n      if (args.length === 2) {\n        return lang === 'zh' ? args[0] : args[1];\n      }\n      const key = args[0];\n      const resolved = resolveKey(localesMemo[lang], key);\n      if (resolved !== undefined) return resolved;\n      const otherLang = lang === 'zh' ? 'en' : 'zh';\n      const fallback = resolveKey(localesMemo[otherLang], key);\n      return fallback !== undefined ? fallback : key;\n    },\n    [lang, localesMemo]\n  ) as TFunction;\n\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.ctrlKey && e.altKey && e.key.toLowerCase() === 'l') {\n        e.preventDefault();\n        toggleLang();\n      }\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n  }, [toggleLang]);\n\n  return (\n    <LanguageContext.Provider value={{ lang, setLang, toggleLang, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA2BM;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;AAsBNC,OAAA,CAAAC,WAAA,GAAAA,WAAA;AAGC;AAAAJ,aAAA,GAAAE,CAAA;AAUDC,OAAA,CAAAE,gBAAA,GAAAA,gBAAA;;;;AA9DA;;;;;;;;AASA,MAAAC,OAAA;AAAA;AAAA,CAAAN,aAAA,GAAAE,CAAA,OAAAK,OAAA;AAgBA,MAAMC,eAAe;AAAA;AAAA,CAAAR,aAAA,GAAAE,CAAA,OAAG,IAAAI,OAAA,CAAAG,aAAa,EAA6B,IAAI,CAAC;AAAC;AAAAT,aAAA,GAAAE,CAAA;AAExE,MAAMQ,QAAQ,GAAeA,CAAC,GAAGC,IAAiC,KAAY;EAAA;EAAAX,aAAA,GAAAY,CAAA;EAAAZ,aAAA,GAAAE,CAAA;EAC5E,IAAIS,IAAI,CAACE,MAAM,KAAK,CAAC,EAAE;IAAA;IAAAb,aAAA,GAAAc,CAAA;IAAAd,aAAA,GAAAE,CAAA;IAAA,OAAOS,IAAI,CAAC,CAAC,CAAC;EAAA,CAAC;EAAA;EAAA;IAAAX,aAAA,GAAAc,CAAA;EAAA;EAAAd,aAAA,GAAAE,CAAA;EACtC,OAAOS,IAAI,CAAC,CAAC,CAAC;AAChB,CAAe;AAEf,MAAMI,cAAc;AAAA;AAAA,CAAAf,aAAA,GAAAE,CAAA,QAAwB;EAC1Cc,IAAI,EAAE,IAAI;EACVC,OAAO,EAAEA,CAAA,KAAK;IAAA;IAAAjB,aAAA,GAAAY,CAAA;EAAE,CAAC;EACjBM,UAAU,EAAEA,CAAA,KAAK;IAAA;IAAAlB,aAAA,GAAAY,CAAA;EAAE,CAAC;EACpBO,CAAC,EAAET;CACJ;AAED,SAASU,UAAUA,CAACC,GAA4B,EAAEC,IAAY;EAAA;EAAAtB,aAAA,GAAAY,CAAA;EAC5D,MAAMW,KAAK;EAAA;EAAA,CAAAvB,aAAA,GAAAE,CAAA,QAAGoB,IAAI,CAACE,KAAK,CAAC,GAAG,CAAC;EAC7B,IAAIC,OAAO;EAAA;EAAA,CAAAzB,aAAA,GAAAE,CAAA,QAAYmB,GAAG;EAAC;EAAArB,aAAA,GAAAE,CAAA;EAC3B,KAAK,MAAMwB,IAAI,IAAIH,KAAK,EAAE;IAAA;IAAAvB,aAAA,GAAAE,CAAA;IACxB;IAAI;IAAA,CAAAF,aAAA,GAAAc,CAAA,UAAAW,OAAO,KAAK,IAAI;IAAA;IAAA,CAAAzB,aAAA,GAAAc,CAAA,UAAIW,OAAO,KAAKE,SAAS;IAAA;IAAA,CAAA3B,aAAA,GAAAc,CAAA,UAAI,OAAOW,OAAO,KAAK,QAAQ,GAAE;MAAA;MAAAzB,aAAA,GAAAc,CAAA;MAAAd,aAAA,GAAAE,CAAA;MAAA,OAAOyB,SAAS;IAAA,CAAC;IAAA;IAAA;MAAA3B,aAAA,GAAAc,CAAA;IAAA;IAAAd,aAAA,GAAAE,CAAA;IAC/FuB,OAAO,GAAIA,OAAmC,CAACC,IAAI,CAAC;EACtD;EAAC;EAAA1B,aAAA,GAAAE,CAAA;EACD,OAAO,OAAOuB,OAAO,KAAK,QAAQ;EAAA;EAAA,CAAAzB,aAAA,GAAAc,CAAA,UAAGW,OAAO;EAAA;EAAA,CAAAzB,aAAA,GAAAc,CAAA,UAAGa,SAAS;AAC1D;AAEA,SAAgBvB,WAAWA,CAAA;EAAA;EAAAJ,aAAA,GAAAY,CAAA;EACzB,MAAMgB,GAAG;EAAA;EAAA,CAAA5B,aAAA,GAAAE,CAAA,QAAG,IAAAI,OAAA,CAAAuB,UAAU,EAACrB,eAAe,CAAC;EAAC;EAAAR,aAAA,GAAAE,CAAA;EACxC,OAAO,2BAAAF,aAAA,GAAAc,CAAA,UAAAc,GAAG;EAAA;EAAA,CAAA5B,aAAA,GAAAc,CAAA,UAAIC,cAAc;AAC9B;AAUA,SAAgBV,gBAAgBA,CAAC;EAAEyB,QAAQ;EAAEC;AAAO,CAAyB;EAAA;EAAA/B,aAAA,GAAAY,CAAA;EAC3E,MAAM,CAACI,IAAI,EAAEgB,YAAY,CAAC;EAAA;EAAA,CAAAhC,aAAA,GAAAE,CAAA,QAAG,IAAAI,OAAA,CAAA2B,QAAQ,EAAW,MAAK;IAAA;IAAAjC,aAAA,GAAAY,CAAA;IACnD,MAAMsB,KAAK;IAAA;IAAA,CAAAlC,aAAA,GAAAE,CAAA,QAAGiC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAAC;IAAApC,aAAA,GAAAE,CAAA;IAChD,OAAQ,2BAAAF,aAAA,GAAAc,CAAA,UAAAoB,KAAkB;IAAA;IAAA,CAAAlC,aAAA,GAAAc,CAAA,UAAI,IAAI;EACpC,CAAC,CAAC;EAAC;EAAAd,aAAA,GAAAE,CAAA;EAEH,IAAAI,OAAA,CAAA+B,SAAS,EAAC,MAAK;IAAA;IAAArC,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAE,CAAA;IACbiC,YAAY,CAACG,OAAO,CAAC,WAAW,EAAEtB,IAAI,CAAC;IAAC;IAAAhB,aAAA,GAAAE,CAAA;IACxCqC,QAAQ,CAACC,eAAe,CAACC,YAAY,CAAC,MAAM,EAAEzB,IAAI,KAAK,IAAI;IAAA;IAAA,CAAAhB,aAAA,GAAAc,CAAA,UAAG,OAAO;IAAA;IAAA,CAAAd,aAAA,GAAAc,CAAA,UAAG,IAAI,EAAC;EAC/E,CAAC,EAAE,CAACE,IAAI,CAAC,CAAC;EAEV,MAAMC,OAAO;EAAA;EAAA,CAAAjB,aAAA,GAAAE,CAAA,QAAG,IAAAI,OAAA,CAAAoC,WAAW,EAAEC,CAAW,IAAK;IAAA;IAAA3C,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAE,CAAA;IAAA,OAAA8B,YAAY,CAACW,CAAC,CAAC;EAAD,CAAC,EAAE,EAAE,CAAC;EAEjE,MAAMzB,UAAU;EAAA;EAAA,CAAAlB,aAAA,GAAAE,CAAA,QAAG,IAAAI,OAAA,CAAAoC,WAAW,EAAC,MAAK;IAAA;IAAA1C,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAE,CAAA;IAClC8B,YAAY,CAAEY,IAAI,IAAM;MAAA;MAAA5C,aAAA,GAAAY,CAAA;MAAAZ,aAAA,GAAAE,CAAA;MAAA,OAAA0C,IAAI,KAAK,IAAI;MAAA;MAAA,CAAA5C,aAAA,GAAAc,CAAA,UAAG,IAAI;MAAA;MAAA,CAAAd,aAAA,GAAAc,CAAA,UAAG,IAAI;IAAJ,CAAK,CAAC;EACvD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM+B,WAAW;EAAA;EAAA,CAAA7C,aAAA,GAAAE,CAAA,QAAG,IAAAI,OAAA,CAAAwC,OAAO,EACzB,MAAM;IAAA;IAAA9C,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAE,CAAA;IAAA,kCAAAF,aAAA,GAAAc,CAAA,UAAAiB,OAAO;IAAA;IAAA,CAAA/B,aAAA,GAAAc,CAAA,UAAI;MAAEiC,EAAE,EAAE,EAA6B;MAAEC,EAAE,EAAE;IAA6B,CAAE;EAAF,CAAE,EACzF,CAACjB,OAAO,CAAC,CACV;EAED,MAAMZ,CAAC;EAAA;EAAA,CAAAnB,aAAA,GAAAE,CAAA,QAAc,IAAAI,OAAA,CAAAoC,WAAW,EAC9B,CAAC,GAAG/B,IAAiC,KAAY;IAAA;IAAAX,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAE,CAAA;IAC/C,IAAIS,IAAI,CAACE,MAAM,KAAK,CAAC,EAAE;MAAA;MAAAb,aAAA,GAAAc,CAAA;MAAAd,aAAA,GAAAE,CAAA;MACrB,OAAOc,IAAI,KAAK,IAAI;MAAA;MAAA,CAAAhB,aAAA,GAAAc,CAAA,WAAGH,IAAI,CAAC,CAAC,CAAC;MAAA;MAAA,CAAAX,aAAA,GAAAc,CAAA,WAAGH,IAAI,CAAC,CAAC,CAAC;IAC1C,CAAC;IAAA;IAAA;MAAAX,aAAA,GAAAc,CAAA;IAAA;IACD,MAAMmC,GAAG;IAAA;IAAA,CAAAjD,aAAA,GAAAE,CAAA,QAAGS,IAAI,CAAC,CAAC,CAAC;IACnB,MAAMuC,QAAQ;IAAA;IAAA,CAAAlD,aAAA,GAAAE,CAAA,QAAGkB,UAAU,CAACyB,WAAW,CAAC7B,IAAI,CAAC,EAAEiC,GAAG,CAAC;IAAC;IAAAjD,aAAA,GAAAE,CAAA;IACpD,IAAIgD,QAAQ,KAAKvB,SAAS,EAAE;MAAA;MAAA3B,aAAA,GAAAc,CAAA;MAAAd,aAAA,GAAAE,CAAA;MAAA,OAAOgD,QAAQ;IAAA,CAAC;IAAA;IAAA;MAAAlD,aAAA,GAAAc,CAAA;IAAA;IAC5C,MAAMqC,SAAS;IAAA;IAAA,CAAAnD,aAAA,GAAAE,CAAA,QAAGc,IAAI,KAAK,IAAI;IAAA;IAAA,CAAAhB,aAAA,GAAAc,CAAA,WAAG,IAAI;IAAA;IAAA,CAAAd,aAAA,GAAAc,CAAA,WAAG,IAAI;IAC7C,MAAMsC,QAAQ;IAAA;IAAA,CAAApD,aAAA,GAAAE,CAAA,QAAGkB,UAAU,CAACyB,WAAW,CAACM,SAAS,CAAC,EAAEF,GAAG,CAAC;IAAC;IAAAjD,aAAA,GAAAE,CAAA;IACzD,OAAOkD,QAAQ,KAAKzB,SAAS;IAAA;IAAA,CAAA3B,aAAA,GAAAc,CAAA,WAAGsC,QAAQ;IAAA;IAAA,CAAApD,aAAA,GAAAc,CAAA,WAAGmC,GAAG;EAChD,CAAC,EACD,CAACjC,IAAI,EAAE6B,WAAW,CAAC,CACP;EAAC;EAAA7C,aAAA,GAAAE,CAAA;EAEf,IAAAI,OAAA,CAAA+B,SAAS,EAAC,MAAK;IAAA;IAAArC,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAE,CAAA;IACb,MAAMmD,OAAO,GAAIC,CAAgB,IAAI;MAAA;MAAAtD,aAAA,GAAAY,CAAA;MAAAZ,aAAA,GAAAE,CAAA;MACnC;MAAI;MAAA,CAAAF,aAAA,GAAAc,CAAA,WAAAwC,CAAC,CAACC,OAAO;MAAA;MAAA,CAAAvD,aAAA,GAAAc,CAAA,WAAIwC,CAAC,CAACE,MAAM;MAAA;MAAA,CAAAxD,aAAA,GAAAc,CAAA,WAAIwC,CAAC,CAACL,GAAG,CAACQ,WAAW,EAAE,KAAK,GAAG,GAAE;QAAA;QAAAzD,aAAA,GAAAc,CAAA;QAAAd,aAAA,GAAAE,CAAA;QACxDoD,CAAC,CAACI,cAAc,EAAE;QAAC;QAAA1D,aAAA,GAAAE,CAAA;QACnBgB,UAAU,EAAE;MACd,CAAC;MAAA;MAAA;QAAAlB,aAAA,GAAAc,CAAA;MAAA;IACH,CAAC;IAAC;IAAAd,aAAA,GAAAE,CAAA;IACFyD,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEP,OAAO,CAAC;IAAC;IAAArD,aAAA,GAAAE,CAAA;IAC5C,OAAO,MAAM;MAAA;MAAAF,aAAA,GAAAY,CAAA;MAAAZ,aAAA,GAAAE,CAAA;MAAA,OAAAyD,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAER,OAAO,CAAC;IAAD,CAAC;EAC7D,CAAC,EAAE,CAACnC,UAAU,CAAC,CAAC;EAAC;EAAAlB,aAAA,GAAAE,CAAA;EAEjB,OACE,IAAA4D,aAAA,CAAAC,GAAA,EAACvD,eAAe,CAACwD,QAAQ;IAACC,KAAK,EAAE;MAAEjD,IAAI;MAAEC,OAAO;MAAEC,UAAU;MAAEC;IAAC,CAAE;IAAAW,QAAA,EAC9DA;EAAQ,EACgB;AAE/B","ignoreList":[]}