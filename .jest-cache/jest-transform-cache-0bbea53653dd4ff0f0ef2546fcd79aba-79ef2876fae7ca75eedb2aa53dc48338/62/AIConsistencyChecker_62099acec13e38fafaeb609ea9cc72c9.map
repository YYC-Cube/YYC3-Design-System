{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/components/AIConsistencyChecker.tsx","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/components/AIConsistencyChecker.tsx"],"sourcesContent":["/**\n * @file AI 一致性检查组件\n * @description 提供用户界面来检查设计令牌的一致性\n * @component AIConsistencyChecker\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-18\n */\n\nimport React, { useState, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from './Card';\nimport { Button } from './Button';\nimport { Badge } from './Badge';\nimport { useTheme } from '../theme/useTheme';\nimport { consistencyChecker, ConsistencyReport } from '../ai/consistency-checker';\nimport { DesignTokens } from '../../types/tokens';\n\nexport interface AIConsistencyCheckerProps {\n  tokens?: DesignTokens;\n  onFixIssue?: (issueId: string) => void;\n  className?: string;\n}\n\nconst getTokenValue = (tokens: Record<string, unknown>, key: string): string => {\n  const value = tokens[key];\n  return typeof value === 'string' ? value : '#000000';\n};\n\nexport const AIConsistencyChecker: React.FC<AIConsistencyCheckerProps> = ({\n  tokens,\n  onFixIssue,\n  className = '',\n}) => {\n  const { tokens: themeTokens } = useTheme();\n  const [report, setReport] = useState<ConsistencyReport | null>(null);\n  const [isChecking, setIsChecking] = useState(false);\n\n  const handleCheck = useCallback(() => {\n    setIsChecking(true);\n    const tokensToCheck = tokens || themeTokens;\n    const newReport = consistencyChecker.check(tokensToCheck);\n    setReport(newReport);\n    setIsChecking(false);\n  }, [tokens, themeTokens]);\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'error':\n        return '#ef4444';\n      case 'warning':\n        return '#f59e0b';\n      case 'info':\n        return '#3b82f6';\n      default:\n        return '#6b7280';\n    }\n  };\n\n  const getScoreColor = (score: number) => {\n    if (score >= 80) return '#10b981';\n    if (score >= 60) return '#f59e0b';\n    return '#ef4444';\n  };\n\n  const getSeverityLabel = (severity: string) => {\n    switch (severity) {\n      case 'error':\n        return '错误';\n      case 'warning':\n        return '警告';\n      case 'info':\n        return '信息';\n      default:\n        return '未知';\n    }\n  };\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle>AI 设计一致性检查</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        <Button onClick={handleCheck} disabled={isChecking} className=\"w-full\">\n          {isChecking ? '检查中...' : '开始检查'}\n        </Button>\n\n        {report && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div\n                className=\"text-5xl font-bold mb-2\"\n                style={{ color: getScoreColor(report.overallScore) }}\n              >\n                {report.overallScore}\n              </div>\n              <div\n                className=\"text-sm\"\n                style={{ color: getTokenValue(themeTokens, 'color.muted-foreground') }}\n              >\n                一致性评分\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-5 gap-2\">\n              {Object.entries(report.categories).map(([key, value]) => (\n                <div\n                  key={key}\n                  className=\"text-center p-3 rounded-lg\"\n                  style={{\n                    background: getTokenValue(themeTokens, 'color.card'),\n                    border: `1px solid ${getTokenValue(themeTokens, 'color.border')}`,\n                  }}\n                >\n                  <div className=\"text-lg font-bold\" style={{ color: getScoreColor(value.score) }}>\n                    {value.score}\n                  </div>\n                  <div\n                    className=\"text-xs mt-1\"\n                    style={{ color: getTokenValue(themeTokens, 'color.muted-foreground') }}\n                  >\n                    {key}\n                  </div>\n                  <div className=\"text-xs mt-1\" style={{ color: getSeverityColor('error') }}>\n                    {value.issues} 问题\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {report.issues.length > 0 && (\n              <div className=\"space-y-3\">\n                <h3\n                  className=\"text-sm font-medium\"\n                  style={{ color: getTokenValue(themeTokens, 'color.foreground') }}\n                >\n                  发现的问题 ({report.issues.length})\n                </h3>\n                <div className=\"space-y-2\">\n                  {report.issues.map((issue) => (\n                    <div\n                      key={issue.id}\n                      className=\"p-4 rounded-lg\"\n                      style={{\n                        background: getTokenValue(themeTokens, 'color.card'),\n                        border: `1px solid ${getTokenValue(themeTokens, 'color.border')}`,\n                      }}\n                    >\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <Badge\n                            style={{\n                              background: getSeverityColor(issue.severity),\n                              color: '#ffffff',\n                            }}\n                          >\n                            {getSeverityLabel(issue.severity)}\n                          </Badge>\n                          <Badge\n                            variant=\"outline\"\n                            style={{\n                              borderColor: getTokenValue(themeTokens, 'color.border'),\n                              color: getTokenValue(themeTokens, 'color.muted-foreground'),\n                            }}\n                          >\n                            {issue.category}\n                          </Badge>\n                        </div>\n                        {issue.location && (\n                          <span\n                            className=\"text-xs\"\n                            style={{ color: getTokenValue(themeTokens, 'color.muted-foreground') }}\n                          >\n                            {issue.location}\n                          </span>\n                        )}\n                      </div>\n                      <p\n                        className=\"text-sm mb-2\"\n                        style={{ color: getTokenValue(themeTokens, 'color.foreground') }}\n                      >\n                        {issue.message}\n                      </p>\n                      {issue.suggestion && (\n                        <p\n                          className=\"text-xs\"\n                          style={{ color: getTokenValue(themeTokens, 'color.muted-foreground') }}\n                        >\n                          建议: {issue.suggestion}\n                        </p>\n                      )}\n                      {onFixIssue && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"mt-2\"\n                          onClick={() => onFixIssue(issue.id)}\n                        >\n                          修复\n                        </Button>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {report.recommendations.length > 0 && (\n              <div className=\"space-y-2\">\n                <h3\n                  className=\"text-sm font-medium\"\n                  style={{ color: getTokenValue(themeTokens, 'color.foreground') }}\n                >\n                  改进建议\n                </h3>\n                <ul className=\"space-y-2\">\n                  {report.recommendations.map((rec, index) => (\n                    <li\n                      key={index}\n                      className=\"text-sm p-3 rounded\"\n                      style={{\n                        background: getTokenValue(themeTokens, 'color.card'),\n                        border: `1px solid ${getTokenValue(themeTokens, 'color.border')}`,\n                        color: getTokenValue(themeTokens, 'color.foreground'),\n                      }}\n                    >\n                      • {rec}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n"],"version":3}