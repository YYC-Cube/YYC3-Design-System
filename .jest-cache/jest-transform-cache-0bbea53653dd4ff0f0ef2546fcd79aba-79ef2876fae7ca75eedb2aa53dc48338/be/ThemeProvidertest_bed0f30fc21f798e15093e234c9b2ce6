e9d9eb4e1463c2960b1068ca5363f592
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
require("@testing-library/jest-dom");
const ThemeProvider_1 = require("../ThemeProvider");
describe('ThemeProvider 组件', () => {
    describe('基础渲染', () => {
        it('应该正确渲染ThemeProvider', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)("div", { children: "\u5185\u5BB9" }) }));
            expect(dom_1.screen.getByText('内容')).toBeInTheDocument();
        });
        it('应该支持设置初始主题', () => {
            const TestComponent = () => {
                const { mode } = (0, ThemeProvider_1.useTheme)();
                return (0, jsx_runtime_1.jsxs)("div", { children: ["\u5F53\u524D\u4E3B\u9898: ", mode] });
            };
        });
        describe('主题切换', () => {
            it('应该默认使用light主题', () => {
                const TestComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u5F53\u524D\u4E3B\u9898: ", mode] });
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('当前主题: light')).toBeInTheDocument();
            });
            it('应该支持设置初始主题', () => {
                const TestComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u5F53\u524D\u4E3B\u9898: ", mode] });
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { initial: "dark", children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('当前主题: dark')).toBeInTheDocument();
            });
            it('应该支持切换主题', () => {
                const TestComponent = () => {
                    const { mode, setMode } = (0, ThemeProvider_1.useTheme)();
                    return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { children: ["\u5F53\u524D\u4E3B\u9898: ", mode] }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setMode('dark'), children: "\u5207\u6362\u5230\u6DF1\u8272" })] }));
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('当前主题: light')).toBeInTheDocument();
                (0, react_1.act)(() => {
                    dom_1.screen.getByText('切换到深色').click();
                });
                expect(dom_1.screen.getByText('当前主题: dark')).toBeInTheDocument();
            });
            it('应该支持切换到light主题', () => {
                const TestComponent = () => {
                    const { mode, setMode } = (0, ThemeProvider_1.useTheme)();
                    return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { children: ["\u5F53\u524D\u4E3B\u9898: ", mode] }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setMode('light'), children: "\u5207\u6362\u5230\u6D45\u8272" })] }));
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { initial: "dark", children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('当前主题: dark')).toBeInTheDocument();
                (0, react_1.act)(() => {
                    dom_1.screen.getByText('切换到浅色').click();
                });
                expect(dom_1.screen.getByText('当前主题: light')).toBeInTheDocument();
            });
        });
        describe('useTheme Hook', () => {
            it('应该返回当前主题', () => {
                const TestComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u4E3B\u9898: ", mode] });
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('主题: light')).toBeInTheDocument();
            });
            it('应该返回setTheme函数', () => {
                const TestComponent = () => {
                    const { setMode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsx)("button", { onClick: () => setMode('dark'), children: "\u5207\u6362\u4E3B\u9898" });
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                const button = dom_1.screen.getByRole('button');
                expect(button).toBeInTheDocument();
                expect(button).toHaveTextContent('切换主题');
            });
            it('应该在ThemeProvider外使用时抛出错误', () => {
                const TestComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u4E3B\u9898: ", mode] });
                };
                expect(() => {
                    (0, react_1.render)((0, jsx_runtime_1.jsx)(TestComponent, {}));
                }).toThrow('useTheme must be used within a ThemeProvider');
            });
        });
        describe('主题持久化', () => {
            beforeEach(() => {
                localStorage.clear();
            });
            it('应该从localStorage读取保存的主题', () => {
                localStorage.setItem('theme', 'dark');
                const TestComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u4E3B\u9898: ", mode] });
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('主题: dark')).toBeInTheDocument();
            });
            it('应该将主题保存到localStorage', () => {
                const TestComponent = () => {
                    const { mode, setMode } = (0, ThemeProvider_1.useTheme)();
                    return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { children: ["\u4E3B\u9898: ", mode] }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setMode('dark'), children: "\u5207\u6362" })] }));
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                (0, react_1.act)(() => {
                    dom_1.screen.getByText('切换').click();
                });
                expect(localStorage.getItem('theme')).toBe('dark');
            });
        });
        describe('主题属性', () => {
            it('应该提供主题颜色', () => {
                const TestComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u4E3B\u9898: ", mode] });
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(TestComponent, {}) }));
                expect(dom_1.screen.getByText('主题: light')).toBeInTheDocument();
            });
        });
        describe('嵌套组件', () => {
            it('应该支持嵌套组件使用主题', () => {
                const InnerComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return (0, jsx_runtime_1.jsxs)("div", { children: ["\u5185\u90E8\u4E3B\u9898: ", mode] });
                };
                const OuterComponent = () => {
                    const { mode } = (0, ThemeProvider_1.useTheme)();
                    return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { children: ["\u5916\u90E8\u4E3B\u9898: ", mode] }), (0, jsx_runtime_1.jsx)(InnerComponent, {})] }));
                };
                (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(OuterComponent, {}) }));
                expect(dom_1.screen.getByText('外部主题: light')).toBeInTheDocument();
                expect(dom_1.screen.getByText('内部主题: light')).toBeInTheDocument();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL3RoZW1lL19fdGVzdHNfXy9UaGVtZVByb3ZpZGVyLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7OztBQUNBLGtEQUFnRTtBQUNoRSw4Q0FBOEM7QUFDOUMscUNBQW1DO0FBQ25DLG9EQUEyRDtBQUUzRCxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO0lBQ2hDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1FBQ3BCLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7WUFDN0IsSUFBQSxjQUFNLEVBQ0osdUJBQUMsNkJBQWEsY0FDWiwyREFBYSxHQUNDLENBQ2pCLENBQUM7WUFDRixNQUFNLENBQUMsWUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDckQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtZQUNwQixNQUFNLGFBQWEsR0FBRyxHQUFHLEVBQUU7Z0JBQ3pCLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFBLHdCQUFRLEdBQUUsQ0FBQztnQkFDNUIsT0FBTywwRUFBWSxJQUFJLElBQU8sQ0FBQztZQUNqQyxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1lBQ3BCLEVBQUUsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO2dCQUN2QixNQUFNLGFBQWEsR0FBRyxHQUFHLEVBQUU7b0JBQ3pCLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFBLHdCQUFRLEdBQUUsQ0FBQztvQkFDNUIsT0FBTywwRUFBWSxJQUFJLElBQU8sQ0FBQztnQkFDakMsQ0FBQyxDQUFDO2dCQUVGLElBQUEsY0FBTSxFQUNKLHVCQUFDLDZCQUFhLGNBQ1osdUJBQUMsYUFBYSxLQUFHLEdBQ0gsQ0FDakIsQ0FBQztnQkFFRixNQUFN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T0FBTywwRUFBWSxJQUFJLElBQU8sQ0FBQztnQkFDakMsQ0FBQyxDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLEdBQUcsRUFBRTtvQkFDMUIsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLElBQUEsd0JBQVEsR0FBRSxDQUFDO29CQUM1QixPQUFPLENBQ0wsNENBQ0UsMEVBQVksSUFBSSxJQUFPLEVBQ3ZCLHVCQUFDLGNBQWMsS0FBRyxJQUNkLENBQ1AsQ0FBQztnQkFDSixDQUFDLENBQUM7Z0JBRUYsSUFBQSxjQUFNLEVBQ0osdUJBQUMsNkJBQWEsY0FDWix1QkFBQyxjQUFjLEtBQUcsR0FDSixDQUNqQixDQUFDO2dCQUVGLE1BQU0sQ0FBQyxZQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQkFDNUQsTUFBTSxDQUFDLFlBQU0sQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQzlELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy90aGVtZS9fX3Rlc3RzX18vVGhlbWVQcm92aWRlci50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCwgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L2RvbSc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuaW1wb3J0IHsgVGhlbWVQcm92aWRlciwgdXNlVGhlbWUgfSBmcm9tICcuLi9UaGVtZVByb3ZpZGVyJztcblxuZGVzY3JpYmUoJ1RoZW1lUHJvdmlkZXIg57uE5Lu2JywgKCkgPT4ge1xuICBkZXNjcmliZSgn5Z+656GA5riy5p+TJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmraPnoa7muLLmn5NUaGVtZVByb3ZpZGVyJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICA8ZGl2PuWGheWuuTwvZGl2PlxuICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICApO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+WGheWuuScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeaUr+aMgeiuvue9ruWIneWni+S4u+mimCcsICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgcmV0dXJuIDxkaXY+5b2T5YmN5Li76aKYOiB7bW9kZX08L2Rpdj47XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ+S4u+mimOWIh+aNoicsICgpID0+IHtcbiAgICAgIGl0KCflupTor6Xpu5jorqTkvb/nlKhsaWdodOS4u+mimCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IG1vZGUgfSA9IHVzZVRoZW1lKCk7XG4gICAgICAgICAgcmV0dXJuIDxkaXY+5b2T5YmN5Li76aKYOiB7bW9kZX08L2Rpdj47XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+W9k+WJjeS4u+mimDogbGlnaHQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgn5bqU6K+l5pSv5oyB6K6+572u5Yid5aeL5Li76aKYJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgICByZXR1cm4gPGRpdj7lvZPliY3kuLvpopg6IHttb2RlfTwvZGl2PjtcbiAgICAgICAgfTtcblxuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPFRoZW1lUHJvdmlkZXIgaW5pdGlhbD1cImRhcmtcIj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCflvZPliY3kuLvpopg6IGRhcmsnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgn5bqU6K+l5pSv5oyB5YiH5o2i5Li76aKYJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbW9kZSwgc2V0TW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdj7lvZPliY3kuLvpopg6IHttb2RlfTwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ2RhcmsnKX0+5YiH5o2i5Yiw5rex6ImyPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCflvZPliY3kuLvpopg6IGxpZ2h0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgICBzY3JlZW4uZ2V0QnlUZXh0KCfliIfmjaLliLDmt7HoibInKS5jbGljaygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn5b2T5YmN5Li76aKYOiBkYXJrJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ+W6lOivpeaUr+aMgeWIh+aNouWIsGxpZ2h05Li76aKYJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbW9kZSwgc2V0TW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdj7lvZPliY3kuLvpopg6IHttb2RlfTwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ2xpZ2h0Jyl9PuWIh+aNouWIsOa1heiJsjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPFRoZW1lUHJvdmlkZXIgaW5pdGlhbD1cImRhcmtcIj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCflvZPliY3kuLvpopg6IGRhcmsnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgICAgICBhY3QoKCkgPT4ge1xuICAgICAgICAgIHNjcmVlbi5nZXRCeVRleHQoJ+WIh+aNouWIsOa1heiJsicpLmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCflvZPliY3kuLvpopg6IGxpZ2h0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd1c2VUaGVtZSBIb29rJywgKCkgPT4ge1xuICAgICAgaXQoJ+W6lOivpei/lOWbnuW9k+WJjeS4u+mimCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IG1vZGUgfSA9IHVzZVRoZW1lKCk7XG4gICAgICAgICAgcmV0dXJuIDxkaXY+5Li76aKYOiB7bW9kZX08L2Rpdj47XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+S4u+mimDogbGlnaHQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgn5bqU6K+l6L+U5Zuec2V0VGhlbWXlh73mlbAnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXRNb2RlIH0gPSB1c2VUaGVtZSgpO1xuICAgICAgICAgIHJldHVybiA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ2RhcmsnKX0+5YiH5o2i5Li76aKYPC9idXR0b24+O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVUZXh0Q29udGVudCgn5YiH5o2i5Li76aKYJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ+W6lOivpeWcqFRoZW1lUHJvdmlkZXLlpJbkvb/nlKjml7bmipvlh7rplJnor68nLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBtb2RlIH0gPSB1c2VUaGVtZSgpO1xuICAgICAgICAgIHJldHVybiA8ZGl2PuS4u+mimDoge21vZGV9PC9kaXY+O1xuICAgICAgICB9O1xuXG4gICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcbiAgICAgICAgfSkudG9UaHJvdygndXNlVGhlbWUgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFRoZW1lUHJvdmlkZXInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ+S4u+mimOaMgeS5heWMlicsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgn5bqU6K+l5LuObG9jYWxTdG9yYWdl6K+75Y+W5L+d5a2Y55qE5Li76aKYJywgKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCAnZGFyaycpO1xuXG4gICAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBtb2RlIH0gPSB1c2VUaGVtZSgpO1xuICAgICAgICAgIHJldHVybiA8ZGl2PuS4u+mimDoge21vZGV9PC9kaXY+O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfkuLvpopg6IGRhcmsnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgn5bqU6K+l5bCG5Li76aKY5L+d5a2Y5YiwbG9jYWxTdG9yYWdlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbW9kZSwgc2V0TW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdj7kuLvpopg6IHttb2RlfTwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ2RhcmsnKX0+5YiH5o2iPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgICAgc2NyZWVuLmdldEJ5VGV4dCgn5YiH5o2iJykuY2xpY2soKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpKS50b0JlKCdkYXJrJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCfkuLvpopjlsZ7mgKcnLCAoKSA9PiB7XG4gICAgICBpdCgn5bqU6K+l5o+Q5L6b5Li76aKY6aKc6ImyJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgICByZXR1cm4gPGRpdj7kuLvpopg6IHttb2RlfTwvZGl2PjtcbiAgICAgICAgfTtcblxuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn5Li76aKYOiBsaWdodCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgn5bWM5aWX57uE5Lu2JywgKCkgPT4ge1xuICAgICAgaXQoJ+W6lOivpeaUr+aMgeW1jOWll+e7hOS7tuS9v+eUqOS4u+mimCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgSW5uZXJDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBtb2RlIH0gPSB1c2VUaGVtZSgpO1xuICAgICAgICAgIHJldHVybiA8ZGl2PuWGhemDqOS4u+mimDoge21vZGV9PC9kaXY+O1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IE91dGVyQ29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdj7lpJbpg6jkuLvpopg6IHttb2RlfTwvZGl2PlxuICAgICAgICAgICAgICA8SW5uZXJDb21wb25lbnQgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgPE91dGVyQ29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCflpJbpg6jkuLvpopg6IGxpZ2h0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCflhoXpg6jkuLvpopg6IGxpZ2h0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==