{"file":"/Users/yanyu/Downloads/yyc3-Design-System/src/pwa/__tests__/service-worker.test.ts","mappings":"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","names":[],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/pwa/__tests__/service-worker.test.ts"],"sourcesContent":["/**\n * @file Service Worker测试\n * @description 测试PWA Service Worker功能\n * @module __tests__/pwa/service-worker.test\n * @author YYC³\n * @version 1.0.0\n * @created 2026-02-19\n */\n\nimport type { CacheStrategy } from '../service-worker';\n\ndescribe('Service Worker Module', () => {\n  beforeEach(() => {\n    jest.resetAllMocks();\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('CacheStrategy Interface', () => {\n    it('应该定义正确的缓存策略接口', () => {\n      const strategy = {\n        name: 'test-strategy',\n        urlPattern: '/api/*',\n        strategy: 'cache-first',\n        maxAge: 3600000,\n        maxEntries: 100,\n        cacheableResponse: {\n          statuses: [0, 200],\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        },\n      };\n\n      expect(strategy.name).toBe('test-strategy');\n      expect(strategy.urlPattern).toBe('/api/*');\n      expect(strategy.strategy).toBe('cache-first');\n      expect(strategy.maxAge).toBe(3600000);\n      expect(strategy.maxEntries).toBe(100);\n    });\n\n    it('应该支持不同的缓存策略', () => {\n      const strategies: Array<CacheStrategy['strategy']> = [\n        'cache-first',\n        'network-first',\n        'cache-only',\n        'network-only',\n        'stale-while-revalidate',\n      ];\n\n      strategies.forEach((strategy) => {\n        const cacheStrategy: CacheStrategy = {\n          name: `test-${strategy}`,\n          urlPattern: '/test/*',\n          strategy: strategy,\n        };\n\n        expect(cacheStrategy.strategy).toBeDefined();\n      });\n    });\n\n    it('应该支持可选配置', () => {\n      const minimalStrategy = {\n        name: 'minimal',\n        urlPattern: '/minimal/*',\n        strategy: 'network-first',\n      };\n\n      expect(minimalStrategy.name).toBe('minimal');\n      expect(minimalStrategy.urlPattern).toBe('/minimal/*');\n      expect(minimalStrategy.strategy).toBe('network-first');\n    });\n  });\n\n  describe('Service Worker生命周期', () => {\n    it('应该处理install事件', () => {\n      const mockEvent = {\n        waitUntil: jest.fn(),\n      };\n\n      expect(mockEvent.waitUntil).toBeDefined();\n    });\n\n    it('应该处理activate事件', () => {\n      const mockEvent = {\n        waitUntil: jest.fn(),\n      };\n\n      expect(mockEvent.waitUntil).toBeDefined();\n    });\n\n    it('应该处理fetch事件', () => {\n      const mockEvent = {\n        request: { url: 'https://example.com/test' },\n        respondWith: jest.fn(),\n      };\n\n      expect(mockEvent.request).toBeDefined();\n      expect(mockEvent.respondWith).toBeDefined();\n    });\n  });\n\n  describe('缓存策略实现', () => {\n    it('应该实现cache-first策略', async () => {\n      const mockCache = {\n        match: jest.fn(),\n        put: jest.fn(),\n      };\n\n      mockCache.match.mockResolvedValueOnce(new Response('cached', { status: 200 }));\n\n      const request = new Request('https://example.com/api/data');\n      const response = await mockCache.match(request);\n\n      expect(response).toBeDefined();\n      expect(mockCache.match).toHaveBeenCalledWith(request);\n    });\n\n    it('应该实现network-first策略', async () => {\n      const mockFetch = jest.fn().mockResolvedValueOnce(new Response('network', { status: 200 }));\n\n      const request = new Request('https://example.com/api/data');\n      const response = await mockFetch(request);\n\n      expect(response).toBeDefined();\n      expect(mockFetch).toHaveBeenCalledWith(request);\n    });\n\n    it('应该实现stale-while-revalidate策略', async () => {\n      const mockCache = {\n        match: jest.fn(),\n        put: jest.fn(),\n      };\n\n      mockCache.match.mockResolvedValueOnce(new Response('stale', { status: 200 }));\n\n      const request = new Request('https://example.com/api/data');\n      const cachedResponse = await mockCache.match(request);\n\n      expect(cachedResponse).toBeDefined();\n      expect(mockCache.match).toHaveBeenCalledWith(request);\n    });\n  });\n\n  describe('缓存管理', () => {\n    it('应该支持maxAge过期', () => {\n      const now = Date.now();\n      const cacheEntry = {\n        response: new Response('data'),\n        timestamp: now - 3600001,\n        maxAge: 3600000,\n      };\n\n      const isExpired = now - cacheEntry.timestamp > cacheEntry.maxAge;\n      expect(isExpired).toBe(true);\n    });\n\n    it('应该支持maxEntries限制', () => {\n      const cacheEntries = Array.from({ length: 150 }, (_, i) => ({\n        url: `/api/data/${i}`,\n        data: `data-${i}`,\n      }));\n\n      const maxEntries = 100;\n      const limitedCache = cacheEntries.slice(0, maxEntries);\n\n      expect(limitedCache.length).toBe(maxEntries);\n    });\n\n    it('应该支持LRU缓存淘汰', () => {\n      const cache = new Map();\n      cache.set('/api/1', 'data1');\n      cache.set('/api/2', 'data2');\n      cache.set('/api/3', 'data3');\n\n      cache.delete('/api/1');\n\n      expect(cache.has('/api/1')).toBe(false);\n      expect(cache.has('/api/2')).toBe(true);\n      expect(cache.has('/api/3')).toBe(true);\n    });\n  });\n\n  describe('Service Worker注册', () => {\n    it('应该正确注册Service Worker', () => {\n      const mockRegistration = {\n        scope: '/',\n        updateViaCache: '/sw.js',\n      };\n\n      expect(mockRegistration.scope).toBe('/');\n      expect(mockRegistration.updateViaCache).toBeDefined();\n    });\n\n    it('应该处理注册成功', () => {\n      const registration = {\n        active: {\n          state: 'activated',\n          scriptURL: '/sw.js',\n        },\n      };\n\n      expect(registration.active.state).toBe('activated');\n      expect(registration.active.scriptURL).toBe('/sw.js');\n    });\n\n    it('应该处理注册失败', () => {\n      const error = new Error('Service Worker registration failed');\n\n      expect(error.message).toBe('Service Worker registration failed');\n    });\n  });\n\n  describe('离线支持', () => {\n    it('应该缓存离线资源', () => {\n      const offlineResources = ['/index.html', '/manifest.json', '/styles.css', '/app.js'];\n\n      const cacheStrategy = {\n        name: 'offline-assets',\n        urlPattern: offlineResources.map((r) => r),\n        strategy: 'cache-only',\n      };\n\n      expect(cacheStrategy.urlPattern.length).toBe(offlineResources.length);\n    });\n\n    it('应该提供离线页面', () => {\n      const offlinePage = '/offline.html';\n\n      expect(offlinePage).toBeDefined();\n    });\n  });\n\n  describe('推送通知', () => {\n    it('应该支持显示通知', () => {\n      const notification = {\n        title: 'Test Notification',\n        body: 'This is a test notification',\n        icon: '/icon.png',\n        data: {\n          url: '/details',\n        },\n      };\n\n      expect(notification.title).toBe('Test Notification');\n      expect(notification.body).toBe('This is a test notification');\n      expect(notification.icon).toBe('/icon.png');\n    });\n\n    it('应该支持通知权限', () => {\n      const mockNotification = {\n        requestPermission: jest.fn().mockResolvedValue('granted'),\n      };\n\n      expect(mockNotification.requestPermission).toBeDefined();\n    });\n  });\n\n  describe('Service Worker更新', () => {\n    it('应该检测新版本', () => {\n      const currentVersion: string = '1.0.0';\n      const newVersion: string = '1.1.0';\n\n      const hasUpdate = newVersion !== currentVersion;\n      expect(hasUpdate).toBe(true);\n    });\n\n    it('应该提示用户更新', () => {\n      const updateAvailable = {\n        newVersion: '1.1.0',\n        message: 'New version available',\n      };\n\n      expect(updateAvailable.newVersion).toBe('1.1.0');\n      expect(updateAvailable.message).toBe('New version available');\n    });\n  });\n\n  describe('缓存响应处理', () => {\n    it('应该验证缓存响应状态', () => {\n      const responses = [\n        { status: 200, statusText: 'OK' },\n        { status: 404, statusText: 'Not Found' },\n        { status: 500, statusText: 'Internal Server Error' },\n      ];\n\n      responses.forEach((response) => {\n        expect(response.status).toBeDefined();\n        expect(response.statusText).toBeDefined();\n      });\n    });\n\n    it('应该验证缓存响应头', () => {\n      const headers = new Headers({\n        'Content-Type': 'application/json',\n        'Cache-Control': 'max-age=3600',\n        ETag: 'abc123',\n      });\n\n      expect(headers.get('Content-Type')).toBe('application/json');\n      expect(headers.get('Cache-Control')).toBe('max-age=3600');\n      expect(headers.get('ETag')).toBe('abc123');\n    });\n  });\n\n  describe('性能优化', () => {\n    it('应该支持预缓存关键资源', () => {\n      const criticalResources = ['/index.html', '/main.js', '/styles.css', '/logo.png'];\n\n      const preCacheStrategy = {\n        name: 'precache',\n        urlPattern: criticalResources,\n        strategy: 'cache-first',\n        maxAge: Infinity,\n      };\n\n      expect(preCacheStrategy.urlPattern.length).toBe(criticalResources.length);\n      expect(preCacheStrategy.maxAge).toBe(Infinity);\n    });\n\n    it('应该支持后台同步', () => {\n      const syncConfig = {\n        url: '/api/sync',\n        interval: 300000,\n      };\n\n      expect(syncConfig.url).toBe('/api/sync');\n      expect(syncConfig.interval).toBe(300000);\n    });\n  });\n});\n"],"version":3}