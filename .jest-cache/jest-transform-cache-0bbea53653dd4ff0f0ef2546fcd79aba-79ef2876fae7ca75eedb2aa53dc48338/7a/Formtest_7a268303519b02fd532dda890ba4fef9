53f914a2e164341791236a76827ac330
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * @file 表单组件测试
 * @description 测试表单组件的功能
 * @module __tests__/components/Form.test
 * @author YYC³
 * @version 1.0.0
 * @created 2026-02-23
 */
const react_1 = require("@testing-library/react");
const dom_1 = require("@testing-library/dom");
require("@testing-library/jest-dom");
const zod_1 = require("zod");
const Form_1 = require("../Form");
const FormField_1 = require("../FormField");
const FormError_1 = require("../FormError");
const Input_1 = require("../Input");
const ThemeProvider_1 = require("../../theme/ThemeProvider");
describe('Form', () => {
    const loginSchema = zod_1.z.object({
        username: zod_1.z.string().min(3, '用户名至少3个字符'),
        password: zod_1.z.string().min(6, '密码至少6个字符'),
    });
    it('应该渲染表单', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsxs)(Form_1.Form, { schema: loginSchema, onSubmit: jest.fn(), children: [(0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "username", label: "\u7528\u6237\u540D", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field }) }), (0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "password", label: "\u5BC6\u7801", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field, type: "password" }) })] }) }));
        expect(dom_1.screen.getByLabelText('用户名')).toBeInTheDocument();
        expect(dom_1.screen.getByLabelText('密码')).toBeInTheDocument();
    });
    it('应该验证表单', async () => {
        const handleSubmit = jest.fn();
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsxs)(Form_1.Form, { schema: loginSchema, onSubmit: handleSubmit, children: [(0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "username", label: "\u7528\u6237\u540D", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field }) }), (0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "password", label: "\u5BC6\u7801", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field, type: "password" }) })] }) }));
        const submitButton = dom_1.screen.getByRole('button');
        react_1.fireEvent.click(submitButton);
        await (0, react_1.waitFor)(() => {
            expect(dom_1.screen.getByText('用户名至少3个字符')).toBeInTheDocument();
            expect(dom_1.screen.getByText('密码至少6个字符')).toBeInTheDocument();
        });
    });
    it('应该显示验证错误', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(FormError_1.FormError, { message: "\u8FD9\u662F\u4E00\u4E2A\u9519\u8BEF\u4FE1\u606F" }) }));
        expect(dom_1.screen.getByText('这是一个错误信息')).toBeInTheDocument();
    });
    it('应该支持默认值', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsx)(Form_1.Form, { schema: loginSchema, defaultValues: { username: 'testuser' }, onSubmit: jest.fn(), children: (0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "username", label: "\u7528\u6237\u540D", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field }) }) }) }));
        const input = dom_1.screen.getByLabelText('用户名');
        expect(input.value).toBe('testuser');
    });
    it('应该在提交时调用回调', async () => {
        const handleSubmit = jest.fn();
        (0, react_1.render)((0, jsx_runtime_1.jsx)(ThemeProvider_1.ThemeProvider, { children: (0, jsx_runtime_1.jsxs)(Form_1.Form, { schema: loginSchema, onSubmit: handleSubmit, children: [(0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "username", label: "\u7528\u6237\u540D", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field, defaultValue: "validuser" }) }), (0, jsx_runtime_1.jsx)(FormField_1.FormField, { name: "password", label: "\u5BC6\u7801", children: (field) => (0, jsx_runtime_1.jsx)(Input_1.Input, { ...field, type: "password", defaultValue: "validpassword" }) })] }) }));
        const submitButton = dom_1.screen.getByRole('button');
        react_1.fireEvent.click(submitButton);
        await (0, react_1.waitFor)(() => {
            expect(handleSubmit).toHaveBeenCalledWith({
                username: 'validuser',
                password: 'validpassword',
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3lhbnl1L0Rvd25sb2Fkcy95eWMzLURlc2lnbi1TeXN0ZW0vc3JjL2NvbXBvbmVudHMvX190ZXN0c19fL0Zvcm0udGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7O0FBQUE7Ozs7Ozs7R0FPRztBQUVILGtEQUFvRTtBQUNwRSw4Q0FBOEM7QUFDOUMscUNBQW1DO0FBQ25DLDZCQUF3QjtBQUN4QixrQ0FBK0I7QUFDL0IsNENBQXlDO0FBQ3pDLDRDQUF5QztBQUN6QyxvQ0FBaUM7QUFDakMsNkRBQTBEO0FBRTFELFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO0lBQ3BCLE1BQU0sV0FBVyxHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7UUFDM0IsUUFBUSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQztRQUN4QyxRQUFRLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDO0tBQ3hDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO1FBQ2hCLElBQUEsY0FBTSxFQUNKLHVCQUFDLDZCQUFhLGNBQ1osd0JBQUMsV0FBSSxJQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsYUFDNUMsdUJBQUMscUJBQVMsSUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLEtBQUssRUFBQyxvQkFBSyxZQUNuQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsdUJBQUMsYUFBSyxPQUFLLEtBQUssR0FBSSxHQUN0QixFQUNaLHVCQUFDLHFCQUFTLElBQUMsSUFBSSxFQUFDLFVBQVUsRUFBQyxLQUFLLEVBQUMsY0FBSSxZQUNsQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsdUJBQUMsYUFBSyxPQUFLLEtBQUssRUFBRSxJQUFJLEVBQUMsVUFBVSxHQUFHLEdBQ3RDLElBQ1AsR0FDTyxDQUNqQixDQUFDO1FBRUYs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YUFDL0MsdUJBQUMscUJBQVMsSUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLEtBQUssRUFBQyxvQkFBSyxZQUNuQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsdUJBQUMsYUFBSyxPQUFLLEtBQUssRUFBRSxZQUFZLEVBQUMsV0FBVyxHQUFHLEdBQy9DLEVBQ1osdUJBQUMscUJBQVMsSUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLEtBQUssRUFBQyxjQUFJLFlBQ2xDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyx1QkFBQyxhQUFLLE9BQUssS0FBSyxFQUFFLElBQUksRUFBQyxVQUFVLEVBQUMsWUFBWSxFQUFDLGVBQWUsR0FBRyxHQUNuRSxJQUNQLEdBQ08sQ0FDakIsQ0FBQztRQUVGLE1BQU0sWUFBWSxHQUFHLFlBQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDaEQsaUJBQVMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFOUIsTUFBTSxJQUFBLGVBQU8sRUFBQyxHQUFHLEVBQUU7WUFDakIsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLG9CQUFvQixDQUFDO2dCQUN4QyxRQUFRLEVBQUUsV0FBVztnQkFDckIsUUFBUSxFQUFFLGVBQWU7YUFDMUIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW55dS9Eb3dubG9hZHMveXljMy1EZXNpZ24tU3lzdGVtL3NyYy9jb21wb25lbnRzL19fdGVzdHNfXy9Gb3JtLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUg6KGo5Y2V57uE5Lu25rWL6K+VXG4gKiBAZGVzY3JpcHRpb24g5rWL6K+V6KGo5Y2V57uE5Lu255qE5Yqf6IO9XG4gKiBAbW9kdWxlIF9fdGVzdHNfXy9jb21wb25lbnRzL0Zvcm0udGVzdFxuICogQGF1dGhvciBZWUPCs1xuICogQHZlcnNpb24gMS4wLjBcbiAqIEBjcmVhdGVkIDIwMjYtMDItMjNcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgc2NyZWVuIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9kb20nO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgRm9ybSB9IGZyb20gJy4uL0Zvcm0nO1xuaW1wb3J0IHsgRm9ybUZpZWxkIH0gZnJvbSAnLi4vRm9ybUZpZWxkJztcbmltcG9ydCB7IEZvcm1FcnJvciB9IGZyb20gJy4uL0Zvcm1FcnJvcic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4uL0lucHV0JztcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICcuLi8uLi90aGVtZS9UaGVtZVByb3ZpZGVyJztcblxuZGVzY3JpYmUoJ0Zvcm0nLCAoKSA9PiB7XG4gIGNvbnN0IGxvZ2luU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzZXJuYW1lOiB6LnN0cmluZygpLm1pbigzLCAn55So5oi35ZCN6Iez5bCRM+S4quWtl+espicpLFxuICAgIHBhc3N3b3JkOiB6LnN0cmluZygpLm1pbig2LCAn5a+G56CB6Iez5bCRNuS4quWtl+espicpLFxuICB9KTtcblxuICBpdCgn5bqU6K+l5riy5p+T6KGo5Y2VJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8Rm9ybSBzY2hlbWE9e2xvZ2luU2NoZW1hfSBvblN1Ym1pdD17amVzdC5mbigpfT5cbiAgICAgICAgICA8Rm9ybUZpZWxkIG5hbWU9XCJ1c2VybmFtZVwiIGxhYmVsPVwi55So5oi35ZCNXCI+XG4gICAgICAgICAgICB7KGZpZWxkKSA9PiA8SW5wdXQgey4uLmZpZWxkfSAvPn1cbiAgICAgICAgICA8L0Zvcm1GaWVsZD5cbiAgICAgICAgICA8Rm9ybUZpZWxkIG5hbWU9XCJwYXNzd29yZFwiIGxhYmVsPVwi5a+G56CBXCI+XG4gICAgICAgICAgICB7KGZpZWxkKSA9PiA8SW5wdXQgey4uLmZpZWxkfSB0eXBlPVwicGFzc3dvcmRcIiAvPn1cbiAgICAgICAgICA8L0Zvcm1GaWVsZD5cbiAgICAgICAgPC9Gb3JtPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCfnlKjmiLflkI0nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCflr4bnoIEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpemqjOivgeihqOWNlScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBqZXN0LmZuKCk7XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxGb3JtIHNjaGVtYT17bG9naW5TY2hlbWF9IG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuICAgICAgICAgIDxGb3JtRmllbGQgbmFtZT1cInVzZXJuYW1lXCIgbGFiZWw9XCLnlKjmiLflkI1cIj5cbiAgICAgICAgICAgIHsoZmllbGQpID0+IDxJbnB1dCB7Li4uZmllbGR9IC8+fVxuICAgICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgICAgIDxGb3JtRmllbGQgbmFtZT1cInBhc3N3b3JkXCIgbGFiZWw9XCLlr4bnoIFcIj5cbiAgICAgICAgICAgIHsoZmllbGQpID0+IDxJbnB1dCB7Li4uZmllbGR9IHR5cGU9XCJwYXNzd29yZFwiIC8+fVxuICAgICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgICA8L0Zvcm0+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn55So5oi35ZCN6Iez5bCRM+S4quWtl+espicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+WvhueggeiHs+WwkTbkuKrlrZfnrKYnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeaYvuekuumqjOivgemUmeivrycsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VGhlbWVQcm92aWRlcj5cbiAgICAgICAgPEZvcm1FcnJvciBtZXNzYWdlPVwi6L+Z5piv5LiA5Liq6ZSZ6K+v5L+h5oGvXCIgLz5cbiAgICAgIDwvVGhlbWVQcm92aWRlcj5cbiAgICApO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+i/meaYr+S4gOS4qumUmeivr+S/oeaBrycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgn5bqU6K+l5pSv5oyB6buY6K6k5YC8JywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICA8Rm9ybSBzY2hlbWE9e2xvZ2luU2NoZW1hfSBkZWZhdWx0VmFsdWVzPXt7IHVzZXJuYW1lOiAndGVzdHVzZXInIH19IG9uU3VibWl0PXtqZXN0LmZuKCl9PlxuICAgICAgICAgIDxGb3JtRmllbGQgbmFtZT1cInVzZXJuYW1lXCIgbGFiZWw9XCLnlKjmiLflkI1cIj5cbiAgICAgICAgICAgIHsoZmllbGQpID0+IDxJbnB1dCB7Li4uZmllbGR9IC8+fVxuICAgICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgICA8L0Zvcm0+XG4gICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGNvbnN0IGlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCfnlKjmiLflkI0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgndGVzdHVzZXInKTtcbiAgfSk7XG5cbiAgaXQoJ+W6lOivpeWcqOaPkOS6pOaXtuiwg+eUqOWbnuiwgycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBqZXN0LmZuKCk7XG4gICAgcmVuZGVyKFxuICAgICAgPFRoZW1lUHJvdmlkZXI+XG4gICAgICAgIDxGb3JtIHNjaGVtYT17bG9naW5TY2hlbWF9IG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuICAgICAgICAgIDxGb3JtRmllbGQgbmFtZT1cInVzZXJuYW1lXCIgbGFiZWw9XCLnlKjmiLflkI1cIj5cbiAgICAgICAgICAgIHsoZmllbGQpID0+IDxJbnB1dCB7Li4uZmllbGR9IGRlZmF1bHRWYWx1ZT1cInZhbGlkdXNlclwiIC8+fVxuICAgICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgICAgIDxGb3JtRmllbGQgbmFtZT1cInBhc3N3b3JkXCIgbGFiZWw9XCLlr4bnoIFcIj5cbiAgICAgICAgICAgIHsoZmllbGQpID0+IDxJbnB1dCB7Li4uZmllbGR9IHR5cGU9XCJwYXNzd29yZFwiIGRlZmF1bHRWYWx1ZT1cInZhbGlkcGFzc3dvcmRcIiAvPn1cbiAgICAgICAgICA8L0Zvcm1GaWVsZD5cbiAgICAgICAgPC9Gb3JtPlxuICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICk7XG5cbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KGhhbmRsZVN1Ym1pdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB1c2VybmFtZTogJ3ZhbGlkdXNlcicsXG4gICAgICAgIHBhc3N3b3JkOiAndmFsaWRwYXNzd29yZCcsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==