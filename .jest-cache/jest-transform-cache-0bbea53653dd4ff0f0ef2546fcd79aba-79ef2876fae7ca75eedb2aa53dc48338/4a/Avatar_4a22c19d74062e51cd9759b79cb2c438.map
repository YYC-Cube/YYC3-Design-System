{"version":3,"names":["react_1","cov_ib7n0tujz","s","require","useTheme_1","image_lazy_loader_1","Avatar","src","alt","b","size","fallback","className","dataTestId","f","tokens","useTheme","imageError","setImageError","useState","imageLoaded","setImageLoaded","imgRef","useRef","getSizeStyle","width","height","fontSize","sizeStyle","radius","avatarStyle","display","alignItems","justifyContent","borderRadius","backgroundColor","color","overflow","transition","imageStyle","objectFit","fallbackStyle","fontWeight","userSelect","getFallbackText","words","split","length","toUpperCase","slice","handleImageError","handleImageLoad","useEffect","current","unobserve","observeLazyImage","placeholder","errorPlaceholder","onLoad","onError","jsx_runtime_1","jsxs","style","role","children","jsx","ref","loading","exports","default"],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/components/Avatar.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { AvatarProps } from '../../types/tokens';\nimport { useTheme } from '../theme/useTheme';\nimport { observeLazyImage } from '../utils/image-lazy-loader';\n\nexport const Avatar: React.FC<AvatarProps> = ({\n  src,\n  alt = 'Avatar',\n  size = 'md',\n  fallback,\n  className = '',\n  'data-testid': dataTestId,\n}) => {\n  const { tokens } = useTheme();\n  const [imageError, setImageError] = useState(false);\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  const getSizeStyle = (): React.CSSProperties => {\n    switch (size) {\n      case 'sm':\n        return { width: '2rem', height: '2rem', fontSize: '0.75rem' };\n      case 'md':\n        return { width: '2.5rem', height: '2.5rem', fontSize: '1rem' };\n      case 'lg':\n        return { width: '3rem', height: '3rem', fontSize: '1.25rem' };\n      case 'xl':\n        return { width: '4rem', height: '4rem', fontSize: '1.5rem' };\n      default:\n        return { width: '2.5rem', height: '2.5rem', fontSize: '1rem' };\n    }\n  };\n\n  const sizeStyle = getSizeStyle();\n  const radius = (tokens['radius.lg'] as string) || '0.5rem';\n\n  const avatarStyle: React.CSSProperties = {\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: radius,\n    backgroundColor: (tokens['color.primary'] as string) || '#d45a5f',\n    color: (tokens['color.primary-foreground'] as string) || '#fff',\n    overflow: 'hidden',\n    ...sizeStyle,\n    transition: 'all 0.2s ease',\n  };\n\n  const imageStyle: React.CSSProperties = {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover',\n    display: imageLoaded ? 'block' : 'none',\n  };\n\n  const fallbackStyle: React.CSSProperties = {\n    fontSize: sizeStyle.fontSize,\n    fontWeight: '600',\n    userSelect: 'none',\n  };\n\n  const getFallbackText = (): string => {\n    if (fallback) return fallback;\n    if (alt) {\n      const words = alt.split(' ');\n      if (words.length >= 2) {\n        return (words[0][0] + words[1][0]).toUpperCase();\n      }\n      return alt.slice(0, 2).toUpperCase();\n    }\n    return '??';\n  };\n\n  const handleImageError = () => {\n    setImageError(true);\n    setImageLoaded(false);\n  };\n\n  const handleImageLoad = () => {\n    setImageLoaded(true);\n  };\n\n  useEffect(() => {\n    if (imgRef.current && src && !imageError) {\n      const unobserve = observeLazyImage(imgRef.current, {\n        placeholder:\n          'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PC9zdmc+',\n        errorPlaceholder:\n          'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZjZGNkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5OTk5OTkiIGZvbnQtc2l6ZT0iMTQiPuaXoDwvdGV4dD48L3N2Zz4=',\n        onLoad: handleImageLoad,\n        onError: handleImageError,\n      });\n      return unobserve;\n    }\n  }, [src, imageError]);\n\n  return (\n    <div\n      style={avatarStyle}\n      className={className}\n      role=\"img\"\n      aria-label={alt}\n      data-testid={dataTestId}\n    >\n      {src && !imageError && (\n        <img ref={imgRef} data-src={src} alt={alt} style={imageStyle} loading=\"lazy\" />\n      )}\n      {(!src || imageError || !imageLoaded) && (\n        <span style={fallbackStyle}>{getFallbackText()}</span>\n      )}\n    </div>\n  );\n};\n\nexport default Avatar;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}