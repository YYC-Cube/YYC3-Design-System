{"version":3,"names":["cov_297w388bsm","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","workflowYaml","packageScripts","lint","typecheck","format","test","qa","chromatic","devDependencies","jest","eslint","prettier","husky"],"sources":["/Users/yanyu/Downloads/yyc3-Design-System/src/utils/ci-workflow.ts"],"sourcesContent":["/**\n * YYCÂ³ Design System â€” CI/CD Workflow Definition (GitHub Actions)\n *\n * Pipeline: typecheck â†’ lint â†’ test â†’ coverage â†’ build â†’ performance â†’ visual-regression â†’ deploy\n *\n * Five-High / Five-Standard / Five-Implementation Coverage:\n *   âœ… è‡ªåŠ¨åŒ– (Automation)       â€” Full CI pipeline\n *   âœ… é«˜å¯è®¿é—®æ€§ (A11y)         â€” jest-axe + Lighthouse accessibility audit\n *   âœ… é«˜ä¸€è‡´æ€§ (Consistency)    â€” ESLint + Prettier + locale validation\n *   âœ… é«˜æ€§èƒ½ (Performance)      â€” Lighthouse CI + bundle size budget\n *   âœ… é«˜å¯æ‰©å±•æ€§ (Extensibility) â€” Matrix builds, modular pipeline\n *   âœ… å¯è§†åŒ– (Visualization)    â€” Chromatic visual regression\n */\n\nexport const workflowYaml = `\nname: YYCÂ³ Design System CI/CD\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\nenv:\n  NODE_VERSION: '20'\n  PNPM_VERSION: '9'\n\nconcurrency:\n  group: ci-\\${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 1: Typecheck + Lint + Format\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  quality:\n    name: Code Quality\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v4\n        with:\n          version: \\${{ env.PNPM_VERSION }}\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \\${{ env.NODE_VERSION }}\n          cache: 'pnpm'\n      - run: pnpm install --frozen-lockfile\n\n      - name: TypeScript Check\n        run: pnpm exec tsc --noEmit\n\n      - name: ESLint\n        run: pnpm lint\n\n      - name: Prettier Check\n        run: pnpm format:check\n\n      - name: Locale Validation\n        run: pnpm validate:locales\n\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 2: Unit + Integration + A11y Tests\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  test:\n    name: Tests\n    runs-on: ubuntu-latest\n    needs: quality\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v4\n        with:\n          version: \\${{ env.PNPM_VERSION }}\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \\${{ env.NODE_VERSION }}\n          cache: 'pnpm'\n      - run: pnpm install --frozen-lockfile\n\n      - name: Unit + Integration Tests\n        run: pnpm test -- --coverage --ci --reporters=default --reporters=jest-junit\n        env:\n          JEST_JUNIT_OUTPUT_DIR: test-results\n\n      - name: Upload Coverage\n        uses: actions/upload-artifact@v4\n        with:\n          name: coverage\n          path: coverage/\n          retention-days: 14\n\n      - name: Upload Test Results\n        if: always()\n        uses: actions/upload-artifact@v4\n        with:\n          name: test-results\n          path: test-results/\n          retention-days: 14\n\n      - name: Coverage Threshold Check\n        run: |\n          COVERAGE=$(cat coverage/coverage-summary.json | jq '.total.lines.pct')\n          echo \"Line coverage: \\${COVERAGE}%\"\n          if (( $(echo \"\\$COVERAGE < 80\" | bc -l) )); then\n            echo \"::error::Coverage \\${COVERAGE}% is below 80% threshold\"\n            exit 1\n          fi\n\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 3: Build + Bundle Analysis\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  build:\n    name: Build\n    runs-on: ubuntu-latest\n    needs: quality\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v4\n        with:\n          version: \\${{ env.PNPM_VERSION }}\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \\${{ env.NODE_VERSION }}\n          cache: 'pnpm'\n      - run: pnpm install --frozen-lockfile\n\n      - name: Build Application\n        run: pnpm build\n\n      - name: Build Tokens\n        run: node build-tokens.mjs\n\n      - name: Bundle Size Check\n        run: |\n          JS_SIZE=$(du -sk dist/assets/*.js 2>/dev/null | awk '{sum+=$1} END {print sum+0}')\n          CSS_SIZE=$(du -sk dist/assets/*.css 2>/dev/null | awk '{sum+=$1} END {print sum+0}')\n          TOTAL_SIZE=$((JS_SIZE + CSS_SIZE))\n          echo \"JS: \\${JS_SIZE}KB | CSS: \\${CSS_SIZE}KB | Total: \\${TOTAL_SIZE}KB\"\n\n          if [ \"\\$JS_SIZE\" -gt 200 ]; then\n            echo \"::error::JS bundle \\${JS_SIZE}KB exceeds 200KB budget\"\n            exit 1\n          fi\n          if [ \"\\$TOTAL_SIZE\" -gt 500 ]; then\n            echo \"::error::Total bundle \\${TOTAL_SIZE}KB exceeds 500KB budget\"\n            exit 1\n          fi\n          echo \"âœ… Bundle size within budget\"\n\n      - name: Upload Build Artifacts\n        uses: actions/upload-artifact@v4\n        with:\n          name: dist\n          path: dist/\n          retention-days: 7\n\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 4: E2E Tests (Playwright)\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  e2e:\n    name: E2E Tests\n    runs-on: ubuntu-latest\n    needs: build\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v4\n        with:\n          version: \\${{ env.PNPM_VERSION }}\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \\${{ env.NODE_VERSION }}\n          cache: 'pnpm'\n      - run: pnpm install --frozen-lockfile\n\n      - name: Install Playwright Browsers\n        run: npx playwright install --with-deps chromium\n\n      - name: Download Build\n        uses: actions/download-artifact@v4\n        with:\n          name: dist\n          path: dist/\n\n      - name: Run E2E Tests\n        run: pnpm test:e2e --project=chromium\n        env:\n          CI: true\n\n      - name: Upload E2E Results\n        if: always()\n        uses: actions/upload-artifact@v4\n        with:\n          name: e2e-results\n          path: |\n            test-results/\n            playwright-report/\n          retention-days: 14\n\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 5: Performance Audit (Lighthouse CI)\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  performance:\n    name: Performance Audit\n    runs-on: ubuntu-latest\n    needs: build\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v4\n        with:\n          version: \\${{ env.PNPM_VERSION }}\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \\${{ env.NODE_VERSION }}\n          cache: 'pnpm'\n      - run: pnpm install --frozen-lockfile\n\n      - name: Download Build\n        uses: actions/download-artifact@v4\n        with:\n          name: dist\n          path: dist/\n\n      - name: Run Lighthouse CI\n        run: |\n          npx @lhci/cli autorun \\\\\n            --collect.staticDistDir=dist \\\\\n            --assert.assertions.categories:performance=error \\\\\n            --assert.assertions.categories:accessibility=error \\\\\n            --assert.assertions.first-contentful-paint=\"error;maxNumericValue=1500\" \\\\\n            --assert.assertions.largest-contentful-paint=\"error;maxNumericValue=2500\" \\\\\n            --assert.assertions.cumulative-layout-shift=\"error;maxNumericValue=0.1\"\n\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 6: Visual Regression (Chromatic)\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  visual:\n    name: Visual Regression\n    runs-on: ubuntu-latest\n    needs: quality\n    if: github.event_name == 'pull_request'\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0  # Needed for TurboSnap\n      - uses: pnpm/action-setup@v4\n        with:\n          version: \\${{ env.PNPM_VERSION }}\n      - uses: actions/setup-node@v4\n        with:\n          node-version: \\${{ env.NODE_VERSION }}\n          cache: 'pnpm'\n      - run: pnpm install --frozen-lockfile\n\n      - name: Build Storybook\n        run: pnpm build-storybook\n\n      - name: Run Chromatic\n        uses: chromaui/action@latest\n        with:\n          projectToken: \\${{ secrets.CHROMATIC_PROJECT_TOKEN }}\n          exitZeroOnChanges: false\n          exitOnceUploaded: true\n          onlyChanged: true\n\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  # Stage 7: Deploy (on main only)\n  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  deploy:\n    name: Deploy\n    runs-on: ubuntu-latest\n    needs: [test, build, e2e, performance]\n    if: github.ref == 'refs/heads/main' && github.event_name == 'push'\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Download Build\n        uses: actions/download-artifact@v4\n        with:\n          name: dist\n          path: dist/\n\n      - name: Deploy to Production\n        run: echo \"ğŸš€ Deploy step â€” configure your deployment target here\"\n        # Examples:\n        # - Vercel: npx vercel --prod --token=\\${{ secrets.VERCEL_TOKEN }}\n        # - Netlify: npx netlify deploy --prod --dir=dist\n        # - AWS S3: aws s3 sync dist/ s3://your-bucket/\n        # - GitHub Pages: uses: peaceiris/actions-gh-pages@v4\n`;\n\n/**\n * Recommended package.json scripts\n */\nexport const packageScripts = {\n  lint: 'eslint src/ --max-warnings 0',\n  'lint:fix': 'eslint src/ --fix',\n  typecheck: 'tsc --noEmit',\n  format: \"prettier --write 'src/**/*.{ts,tsx,css,json}'\",\n  'format:check': \"prettier --check 'src/**/*.{ts,tsx,css,json}'\",\n  test: 'jest --passWithNoTests',\n  'test:watch': 'jest --watch',\n  'test:coverage': 'jest --coverage',\n  'test:a11y': 'jest --testPathPattern=a11y',\n  'test:e2e': 'playwright test',\n  'test:e2e:ui': 'playwright test --ui',\n  'validate:locales': 'ts-node src/qa/locale-validation.ts',\n  'build:tokens': 'node build-tokens.mjs',\n  'build-storybook': 'storybook build',\n  qa: 'pnpm typecheck && pnpm lint && pnpm test -- --coverage && pnpm format:check',\n  'qa:fix': 'pnpm lint:fix && pnpm format',\n  chromatic: 'chromatic --project-token=$CHROMATIC_PROJECT_TOKEN',\n};\n\n/**\n * Recommended devDependencies\n */\nexport const devDependencies = {\n  // Testing\n  jest: '^29.7.0',\n  'ts-jest': '^29.2.0',\n  '@jest/types': '^29.6.0',\n  'jest-environment-jsdom': '^29.7.0',\n  'jest-junit': '^16.0.0',\n  '@testing-library/react': '^16.0.0',\n  '@testing-library/jest-dom': '^6.5.0',\n  '@testing-library/user-event': '^14.5.0',\n  'jest-axe': '^9.0.0',\n  '@types/jest-axe': '^3.5.0',\n  'identity-obj-proxy': '^3.0.0',\n\n  // E2E\n  '@playwright/test': '^1.48.0',\n\n  // Linting & Formatting\n  eslint: '^9.0.0',\n  '@typescript-eslint/eslint-plugin': '^8.0.0',\n  '@typescript-eslint/parser': '^8.0.0',\n  'eslint-plugin-react-hooks': '^5.0.0',\n  'eslint-plugin-jsx-a11y': '^6.10.0',\n  prettier: '^3.4.0',\n  'prettier-plugin-tailwindcss': '^0.6.0',\n\n  // Git hooks\n  husky: '^9.1.0',\n  'lint-staged': '^15.2.0',\n\n  // Performance & Visual\n  '@lhci/cli': '^0.14.0',\n  chromatic: '^11.0.0',\n};\n"],"mappings":"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","ignoreList":[]}